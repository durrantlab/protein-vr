(function(){'use strict';function T(B){var d=0;return function(){return d<B.length?{done:!1,value:B[d++]}:{done:!0}}}var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(B,d,a){B!=Array.prototype&&B!=Object.prototype&&(B[d]=a.value)},U="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function V(B,d){if(d){var a=U;B=B.split(".");for(var y=0;y<B.length-1;y++){var A=B[y];A in a||(a[A]={});a=a[A]}B=B[B.length-1];y=a[B];d=d(y);d!=y&&null!=d&&aa(a,B,{configurable:!0,writable:!0,value:d})}}V("Array.prototype.find",function(B){return B?B:function(d,a){a:{var y=this;y instanceof String&&(y=String(y));for(var A=y.length,E=0;E<A;E++){var f=y[E];if(d.call(a,f,E,y)){d=f;break a}}d=void 0}return d}});var W;
if("function"==typeof Object.setPrototypeOf)W=Object.setPrototypeOf;else{var X;a:{var ba={ea:!0},Y={};try{Y.__proto__=ba;X=Y.ea;break a}catch(B){}X=!1}W=X?function(B,d){B.__proto__=d;if(B.__proto__!==d)throw new TypeError(B+" is not extensible");return B}:null}var ca=W;V("Object.setPrototypeOf",function(B){return B||ca});function Z(B){var d="undefined"!=typeof Symbol&&Symbol.iterator&&B[Symbol.iterator];return d?d.call(B):{next:T(B)}}
V("Promise",function(B){function d(f){this.F=0;this.K=void 0;this.A=[];var q=this.H();try{f(q.resolve,q.reject)}catch(u){q.reject(u)}}function a(){this.A=null}function y(f){return f instanceof d?f:new d(function(q){q(f)})}if(B)return B;a.prototype.F=function(f){if(null==this.A){this.A=[];var q=this;this.H(function(){q.K()})}this.A.push(f)};var A=U.setTimeout;a.prototype.H=function(f){A(f,0)};a.prototype.K=function(){for(;this.A&&this.A.length;){var f=this.A;this.A=[];for(var q=0;q<f.length;++q){var u=
f[q];f[q]=null;try{u()}catch(t){this.J(t)}}}this.A=null};a.prototype.J=function(f){this.H(function(){throw f;})};d.prototype.H=function(){function f(t){return function(g){u||(u=!0,t.call(q,g))}}var q=this,u=!1;return{resolve:f(this.ra),reject:f(this.J)}};d.prototype.ra=function(f){if(f===this)this.J(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof d)this.sa(f);else{a:switch(typeof f){case "object":var q=null!=f;break a;case "function":q=!0;break a;default:q=!1}q?this.qa(f):
this.V(f)}};d.prototype.qa=function(f){var q=void 0;try{q=f.then}catch(u){this.J(u);return}"function"==typeof q?this.ta(q,f):this.V(f)};d.prototype.J=function(f){this.W(2,f)};d.prototype.V=function(f){this.W(1,f)};d.prototype.W=function(f,q){if(0!=this.F)throw Error("Cannot settle("+f+", "+q+"): Promise already settled in state"+this.F);this.F=f;this.K=q;this.pa()};d.prototype.pa=function(){if(null!=this.A){for(var f=0;f<this.A.length;++f)E.F(this.A[f]);this.A=null}};var E=new a;d.prototype.sa=function(f){var q=
this.H();f.Y(q.resolve,q.reject)};d.prototype.ta=function(f,q){var u=this.H();try{f.call(q,u.resolve,u.reject)}catch(t){u.reject(t)}};d.prototype.then=function(f,q){function u(C,r){return"function"==typeof C?function(p){try{t(C(p))}catch(c){g(c)}}:r}var t,g,x=new d(function(C,r){t=C;g=r});this.Y(u(f,t),u(q,g));return x};d.prototype.catch=function(f){return this.then(void 0,f)};d.prototype.Y=function(f,q){function u(){switch(t.F){case 1:f(t.K);break;case 2:q(t.K);break;default:throw Error("Unexpected state: "+
t.F);}}var t=this;null==this.A?E.F(u):this.A.push(u)};d.resolve=y;d.reject=function(f){return new d(function(q,u){u(f)})};d.race=function(f){return new d(function(q,u){for(var t=Z(f),g=t.next();!g.done;g=t.next())y(g.value).Y(q,u)})};d.all=function(f){var q=Z(f),u=q.next();return u.done?y([]):new d(function(t,g){function x(p){return function(c){C[p]=c;r--;0==r&&t(C)}}var C=[],r=0;do C.push(void 0),r++,y(u.value).Y(x(C.length-1),g),u=q.next();while(!u.done)})};return d});
V("Math.sign",function(B){return B?B:function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1}});
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/7QA":function(B,d,a){a.r(d);B=a("fcUb");d=a("SYky");a.n(d);a=a("p11u");"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("service-worker.js",{scope:"./"}).then(function(y){console.log("SW registered: ",y)}).catch(function(y){console.log("SW registration failed: ",y)})});a.d();B.a()},"0fSa":function(B,d,a){function y(){setTimeout(function(){BABYLON.SceneOptimizer.OptimizeAsync(x.r,u())},
5E3);x.r.autoClear=!1;x.r.autoClearDepthAndStencil=!1;for(var c=x.r.meshes.length,b=new BABYLON.Color3(0,0,0),k=0;k<c;k++){var n=x.r.meshes[k];-1!==n.name.indexOf("baked")&&void 0!==n.material&&(n.material.diffuseColor=b,n.material.specularColor=b,n.material.emissiveTexture=n.material.diffuseTexture,n.material.diffuseTexture=null,n.freezeWorldMatrix())}}function A(c){if(void 0!==c){c=c.getVerticesData(BABYLON.VertexBuffer.PositionKind);if(null===c)return null;c=c.length/3}else c=0;return c}function E(c){var b=
A(c);null===b||100>b||(b=1+Math.floor(b/x.d),1<b&&c.subdivide(b))}function f(c,b){void 0===b&&(b=!0);b&&c.material.freeze()}function q(){g.d&&(x.r.lights[0].autoUpdateExtends=!0,g.d.getShadowMap().refreshRate=BABYLON.RenderTargetTexture.REFRESHRATE_RENDER_ONCE,x.r.lights[0].autoUpdateExtends=!1)}function u(){var c=new BABYLON.SceneOptimizerOptions(25,2E3),b=0;c.optimizations.push(new BABYLON.ShadowsOptimization(b));c.optimizations.push(new BABYLON.LensFlaresOptimization(b));c.optimizations.push(new BABYLON.PostProcessesOptimization(b));
c.optimizations.push(new BABYLON.ParticlesOptimization(b));c.optimizations.push(new C(b));b++;c.optimizations.push(new r(b));c.optimizations.push(new C(b));b++;c.optimizations.push(new BABYLON.TextureOptimization(b,512));c.optimizations.push(new C(b));b++;c.optimizations.push(new BABYLON.RenderTargetsOptimization(b));c.optimizations.push(new BABYLON.TextureOptimization(b,256));c.optimizations.push(new C(b));b++;c.optimizations.push(new BABYLON.HardwareScalingOptimization(b,4));c.optimizations.push(new p(b,
500));c.optimizations.push(new C(b));return c}function t(c){null!==c&&c.dispose()}a.d(d,"d",function(){return y});a.d(d,"b",function(){return E});a.d(d,"a",function(){return f});a.d(d,"e",function(){return q});a.d(d,"c",function(){return t});var g=a("sqbB"),x=a("gqHH"),C=function(){return function(c){var b=this;void 0===c&&(c=0);this.priority=c;this.apply=function(){console.log("Optimization priority:",b.priority);console.log("FPS:",x.q.getFps());console.log("");return!0};this.getDescription=function(){return"Reports the current priority. For debugging."}}}(),
r=function(){return function(c){"undefined"===typeof c&&(c=0);this.priority=c;this.apply=function(){var b=x.r.getMeshByName("surfaces.wrl");t(b);return!0};this.getDescription=function(){return"Removes surface representations."}}}(),p=function(){return function(c,b,k){void 0===k&&(k=void 0);"undefined"===typeof c&&(c=0);this.priority=c;this.apply=function(){for(var n=[],e=x.r.meshes.length,m=0;m<e;m++){var D=x.r.meshes[m];if(-1===D.name.indexOf("Decimated")){var v=A(D);null!==v&&(v<b||n.push([v,D,
void 0===k?1-b/v:k]))}}n.sort(function(l,F){return F[0]-l[0]});e=n.length;for(m=0;m<e;m++){v=n[m];D=v[1];for(v=v[2];0<D.getLODLevels().length;){var h=D.getLODLevels()[0].mesh;D.removeLODLevel(h);t(h)}D.simplify([{quality:v,distance:.001}],!1,BABYLON.SimplificationType.QUADRATIC,function(){})}return!0};this.getDescription=function(){return"Simplifies the geometry of complex objects in the scene."}}}()},"1RHl":function(B,d,a){function y(){f=A.r.cameras.filter(function(u){return-1===u.name.indexOf("VR")})[0];
var q=new BABYLON.DeviceOrientationCamera("DevOr_camera",f.position.clone(),A.r,!0);q.rotation=f.rotation.clone();A.r.activeCamera=q;A.r.activeCamera.rotationQuaternion=BABYLON.Quaternion.FromEulerVector(f.rotation);A.p();E.b()}a.d(d,"a",function(){return y});var A=a("gqHH"),E=a("ejGh"),f},"9bcR":function(B,d,a){(function(y){function A(){p.z.G=p.r.getMeshByID("ground");null===p.z.G&&alert("No mesh named ground");p.z.G.checkCollisions=!0;p.z.G.visibility=0;r.b(p.z.G);c.f({X:q,mesh:p.z.G});p.z.B=3;
f();b.f();g();E()}function E(){e=x.a();p.r.registerBeforeRender(function(){var l=x.a();null===b.d(l).pickedMesh&&m===p.r.activeCamera.id?x.e(e):(e=l,m=p.r.activeCamera.id)})}function f(){y("body").keypress(function(l){32===l.charCode?q():109===l.charCode&&n.c.M()})}function q(){if(void 0===k.h){var l=(new Date).getTime();if(!(250>l-D))switch(D=l,c.e()){case 2:console.log("teleport");u();break;case 4:t();break;case 3:c.d.D()}}}function u(l,F){void 0===l&&(l=void 0);void 0===F&&(F=void 0);void 0===
F&&(F=function(){});p.y.gazeTrackerMesh.isVisible=!1;var G=new BABYLON.Animation("animationCameraTeleportation","position",90,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),z=x.a();void 0===l&&(l=new BABYLON.Vector3(b.a.x,b.a.y+p.n,b.a.z));var w=x.d();l=l.subtract(w);z=z.subtract(w);G.setKeys([{frame:0,value:z},{frame:p.j,value:l}]);var I=p.r.activeCamera;I.animations=[];I.animations.push(G);p.r.beginAnimation(I,0,p.j,!1,1,function(){p.y.gazeTrackerMesh.isVisible=
!0;I.animations=[];F()})}function t(){var l=b.c,F=x.a(),G=b.a.subtract(F),z=G.length(),w;.1*z<p.g?w=b.a.subtract(G.normalize().scale(p.g)):.1*z>p.b?w=b.a.subtract(G.normalize().scale(p.b)):.1*z<p.b&&(w=F.add(G.scale(.9)));w.y=b.a.y;w.y-l.y<.5*p.a+.1&&(w.y=l.y+.5*p.a+.1);p.u(b.a.y-l.y);u(w,function(){C.a()})}function g(){v=y("#capture-clicks");v.click(function(){console.log("clicked!");q()});p.r.registerBeforeRender(function(){var l=p.r.activeCamera.inputs.attached.deviceOrientation;(l=l?0!==l._alpha||
0!==l._beta||0!==l._gamma:!1)&&!h?(h=!0,v.show()):!l&&h&&(h=!1,v.hide())})}a.d(d,"b",function(){return A});a.d(d,"a",function(){return q});var x=a("vCcv"),C=a("ejGh"),r=a("0fSa"),p=a("gqHH"),c=a("TqLJ"),b=a("ph2Y"),k=a("p11u"),n=a("jIpr"),e,m="",D=0,v=void 0,h=!1}).call(this,a("EVdn"))},BjG7:function(B,d,a){function y(){function k(D){function v(F){var G=r[h][F];n.Components[h][G]=q({},h,function(z,w){t.b([h,G],z,w)})}var h=C[D];n.Components[h]={};D=r[h].length;for(var l=0;l<D;l++)v(l)}for(var n={Components:{},
Selections:{},Clear:function(){for(var D=Object.keys(t.a),v=D.length,h=0;h<v;h++)t.a[D[h]].mesh.isVisible=!1;x.c.M()},"Remove Existing":{}},e=C.length,m=0;m<e;m++)k(m);return n}function A(k){if(!g.b()){k.Styles["Remove Existing"]={};x.e(k.Styles["Remove Existing"],["Styles","Remove Existing"]);for(var n=Object.keys(t.a),e=n.length,m=function(v){var h=n[v];!0===t.a[h].mesh.isVisible&&(v=h.replace(/--/g," "),v=v.replace(/{/g,"").replace(/}/g,"").replace(/"/g,""),k.Styles["Remove Existing"][v]=function(){x.c.M();
setTimeout(function(){var l=g.c(h);t.b(l[0],l[1],"Hide")},0)})},D=0;D<e;D++)m(D)}}function E(k){function n(F,G,z,w){function I(J){J=H[J];if(1===J.length){var K=J[0];G[K]={};G[K]=q(G[K],F,function(O,P){var M={};M[e[F]]=K;t.b([M],O,P)},w.concat([K]))}else{var N="["+J[0].toString()+"-"+J[J.length-1].toString()+"]";G[N]={};n(F,G[N],J,w.concat([N]))}}z.sort(function(J,K){J=isNaN(+J)?J:+J;K=isNaN(+K)?K:+K;return J<K?-1:J>K?1:0});var H=f(z,14);z=H.length;for(var L=0;L<z;L++)I(L);x.e(G,w)}k.Styles.Selections=
{};x.e(k.Styles.Selections,["Styles","Selections"]);for(var e={"Atom Name":"atom",Chain:"chain",Element:"elem","Residue Index":"resi","Residue Name":"resn","Secondary Structure":"ss"},m=Object.keys(u.a),D=m.length,v=0;v<D;v++){var h=m[v],l=u.a[h];k.Styles.Selections[h]={};n(h,k.Styles.Selections[h],l,["Styles","Selections",h])}}function f(k,n){if(2>n)return[k];var e=k.length,m=[],D=0,v;if(0===e%n)for(v=Math.floor(e/n);D<e;)m.push(k.slice(D,D+=v));else for(;D<e;)v=Math.ceil((e-D)/n--),m.push(k.slice(D,
D+=v));return m}function q(k,n,e,m){function D(l){function F(I){var H=c[I];k[z].Colors[H]=function(){e(z,H);x.c.M()}}function G(I){var H=b[I];k[z]["Color Schemes"][H]=function(){e(z,H);x.c.M()}}var z=v[l];k[z]={Colors:{},"Color Schemes":{}};l=b.length;for(var w=0;w<l;w++)G(w);l=c.length;for(w=0;w<l;w++)F(w);k[z].Hide=function(){e(z,"Hide");x.c.M()};void 0!==m&&(l=m.concat([z]),x.e(k[z],l),l=m.concat([z,"Colors"]),w=k[z].Colors,x.e(w,l),l=m.concat([z,"Color Schemes"]),w=k[z]["Color Schemes"],x.e(w,
l))}var v=void 0===p[n]?p.Protein:p[n];n=v.length;for(var h=0;h<n;h++)D(h);void 0!==m&&x.e(k,m);return k}a.d(d,"a",function(){return y});a.d(d,"c",function(){return A});a.d(d,"b",function(){return E});var u=a("qmVJ"),t=a("EYe7"),g=a("p11u"),x=a("jIpr"),C=["Protein","Ligand","Ligand Context","Water","Nucleic"],r={Ligand:["All"],"Ligand Context":["All"],Nucleic:["All"],Protein:["All","Hydrophobic","Hydrophilic","Charged","Aromatic"],Water:["All"]};B=["Stick","Sphere","Surface"];var p={Ligand:B,"Ligand Context":["Cartoon"].concat(B),
Nucleic:B,Protein:["Cartoon"].concat(B),Water:B},c="White Red Blue Green Orange Yellow Purple".split(" "),b=["Element","Amino Acid","Chain","Nucleic","Spectrum"]},EYe7:function(B,d,a){function y(e,m,D,v){void 0===v&&(v=void 0);c.a&&c.b(e,m,D);var h=E(e,m,D);void 0===v&&(v=function(){});if("Hide"===D){D=Object.keys(b);e=D.length;for(var l=0;l<e;l++){var F=b[D[l]];F.N===h.N&&(F.mesh.isVisible=!1,console.log("Hiding existing mesh..."))}r.b(void 0,C.r.getMeshByName("protein_box"));q()}else void 0!==b[h.$]?
(b[h.$].mesh.isVisible=!0,console.log("showing existing mesh..."),r.b(void 0,C.r.getMeshByName("protein_box")),q()):(p.e(),D=n[D],e={and:e.map(function(G){return void 0!==k[G]?k[G]:G})},"surface"===m.toLowerCase()?p.a(D,e,function(){A(h,m,v)}):(l={},l[m.toLowerCase()]=D,p.g(e,l),A(h,m,v)))}function A(e,m,D){p.d(!0,m,function(v){for(var h=Object.keys(b),l=h.length,F=0;F<l;F++){var G=h[F],z=b[G];z.N===e.N&&(u.c(z.mesh),delete b[G],console.log("deleting old mesh..."))}void 0!==v&&("Surface"===m&&(v.material.backFaceCulling=
!1),b[e.$]={N:e.N,mesh:v});q();D();console.log("added new mesh")})}function E(e,m,D){e.sort();e=e.map(function(v){return"string"===typeof v?v:JSON.stringify(v)});return{N:e.join("--")+"--"+m,$:e.join("--")+"--"+m+"--"+D}}function f(e){for(var m=e.map(function(l){return l}),D=e.length,v=0;v<D;v++){var h=e[v];m.push(h.toUpperCase());m.push(h.toLowerCase())}return m=m.filter(function(l,F){return m.indexOf(l)>=F})}function q(){x.f();g.c(t.b)}a.d(d,"a",function(){return b});a.d(d,"b",function(){return y});
var u=a("0fSa"),t=a("jIpr"),g=a("BjG7"),x=a("p11u"),C=a("gqHH"),r=a("YORc"),p=a("PjGz"),c=a("mvtX"),b={},k={All:{},Protein:{resn:f("ALA ARG ASP ASN ASX CYS GLN GLU GLX GLY HIS HSP HYP ILE LEU LYS MET PCA PHE PRO TRP TYR VAL GLU SER THR MSE".split(" "))},Acidic:{resn:f(["ASP","GLU"])},Cyclic:{resn:f(["HIS","PHE","PRO","TRP","TYR"])},Aliphatic:{resn:f(["ALA","GLY","ILE","LEU","VAL"])},Aromatic:{resn:f(["HIS","PHE","TRP","TYR"])},Basic:{resn:f(["ARG","HIS","LYS","HSP"])},Charged:{resn:f("ASP GLU ARG HIS LYS HSP".split(" "))},
Hydrophobic:{resn:f("ALA LEU VAL ILE PRO PHE MET TRP".split(" "))},Neutral:{resn:f("VAL PHE GLN TYR HIS CYS MET TRP ASX GLX PCA HYP".split(" "))},Nucleic:{resn:f("ADE A GUA G CYT C THY T URA U DA DG DC DT".split(" "))},Purine:{resn:f(["ADE","A","GUA","G"])},Pyrimidine:{resn:f("CYT C THY T URA U".split(" "))},Ions:{resn:f("AL BA CA CAL CD CES CLA CL CO CS CU CU1 CUA HG IN IOD K MG MN3 MO3 MO4 MO5 MO6 NA NAW OC7 PB POT PT RB SOD TB TL WO4 YB ZN ZN1 ZN2".split(" "))},Water:{resn:f(["WAT","HOH","TIP",
"TIP3"])}};k.Ligand={not:{or:[k.Protein,k.Nucleic,k.Ions,k.Water]}};k["Ligand Context"]={byres:!0,within:{distance:4,sel:k.Ligand}};var n={"Amino Acid":{colorscheme:"amino"},Blue:{color:"blue"},Chain:{colorscheme:"chain"},Element:{colorscheme:"default"},Green:{color:"green"},Nucleic:{colorscheme:"nucleic"},Orange:{color:"orange"},Purple:{color:"purple"},Red:{color:"red"},Spectrum:{color:"spectrum"},White:{color:"white"},Yellow:{color:"yellow"}}},O2BG:function(B,d,a){B.Ca=a.p+"cf4bd43cd8dade4b62f7e691f5d0f8cc.mp3"},
PjGz:function(B,d,a){(function(y,A){function E(H){var L=y("#mol-container");L&&L.remove();y("body").append('<div\n        id="mol-container"\n        class="mol-container"\n        style="display:none;"></div>');h=y("#mol-container");l={backgroundColor:"white"};v=A.createViewer(h,l);window.viewer=v;H()}function f(){I&&(I=!1,v=null,E(function(){v.addModel(z,"pdb")}));v.setStyle({},{})}function q(H,L){y.ajax(H,{success:function(J){z=J;w="pdb";"sdf"===H.slice(H.length-3).toLowerCase()&&(w="sdf");J=v.addModel(J,
w);L(J)},error:function(J,K,N){J="<p>Could not load molecule: "+H+"</p>";J=J+("<p><pre>"+N+'</pre></p><p>(<a href="')+(window.location.href.split("?")[0]+'">Click to restart...</a>)</p>');e.a("Error Loading Molecule",J,!1,!1)}})}function u(H,L){void 0!==H.and&&1===Object.keys(H).length&&"{}"===JSON.stringify(H.and[0])&&2===H.and.length&&(H=H.and[1]);v.setStyle(H,L);v.render()}function t(H,L,J){I=!0;v.addSurface(A.SurfaceType.MS,H,L,void 0,void 0,function(){J()})}function g(H,L,J){void 0===J&&(J=function(){});
b.q.hideLoadingUI();H&&x(function(){C(L,function(){var K=new BABYLON.StandardMaterial("Material",b.r);K.diffuseColor=new BABYLON.Color3(1,1,1);K.emissiveColor=new BABYLON.Color3(0,0,0);K.specularColor=new BABYLON.Color3(0,0,0);for(var N=[],O=m.length,P=0;P<O;P++){var M=m[P],Q=[];BABYLON.VertexData.ComputeNormals(M.coors,M.trisIdxs,Q);var R=new BABYLON.VertexData;R.positions=M.coors;R.indices=M.trisIdxs;R.normals=Q;R.colors=M.colors;M=new BABYLON.Mesh("mesh_3dmol_tmp"+P,b.r);R.applyToMesh(M);M.material=
K;N.push(M)}if(0<N.length){var S=BABYLON.Mesh.MergeMeshes(N,!0,!0);S.name="MeshFrom3DMol"+Math.random().toString();S.id=S.name;k.c(S,123456789)}K=S;void 0!==K&&n.b(K,b.r.getMeshByName("protein_box"));J(K);m=[]})})}function x(H){F=v.exportVRML();H()}function C(H,L){m=[];if("undefined"!==typeof Worker)G.onmessage=function(J){J=J.data;var K=J.chunk;J=J.status;if(void 0!==K){var N=K[0],O=K[1],P=K[2];m.length===N&&m.push({coors:new Float32Array(0),colors:new Float32Array(0),trisIdxs:new Uint32Array(0)});
K=m[N];N=[m[N][O],P];var M=0;P=N.length;for(var Q=0;Q<P;Q++){var R=N[Q];M+=R.length}M=new ("trisIdxs"===O?Uint32Array:Float32Array)(M);var S=0;for(Q=0;Q<P;Q++)R=N[Q],M.set(R,S),S+=R.length;K[O]=M}switch(J){case "more":G.postMessage({cmd:"sendDataChunk",data:void 0});break;case "done":L();break;default:console.log("Error here!")}},G.postMessage({cmd:"start",data:F,removeExtraPts:"Stick"===H});else throw e.a("Browser Error","Your browser does not support web workers. Please use a more\n            modern browser when running ProteinVR.",
!1),Error("Browser does not support web workers.");}function r(H,L){D[H]+=L;c.f()}function p(H,L,J){D=new BABYLON.Vector3(H,L,J)}a.d(d,"c",function(){return D});a.d(d,"h",function(){return E});a.d(d,"e",function(){return f});a.d(d,"b",function(){return q});a.d(d,"g",function(){return u});a.d(d,"a",function(){return t});a.d(d,"d",function(){return g});a.d(d,"i",function(){return r});a.d(d,"f",function(){return p});var c=a("p11u"),b=a("gqHH"),k=a("cw8d"),n=a("YORc"),e=a("iC5T"),m=[],D=new BABYLON.Vector3(0,
0,0),v,h,l,F,G=new Worker("vrmlWebWorker.js"),z="",w="pdb",I=!1}).call(this,a("EVdn"),a("VS3o"))},Rr3C:function(B,d,a){function y(){document.getElementById("loadingContainer").outerHTML=""}function A(t){f();q.q.displayLoadingUI();q.q.loadingUIText=t}function E(t){var g=t;clearInterval(u);u=setInterval(function(){g+=.02*(99-g);q.q.displayLoadingUI();q.q.loadingUIText="Loading the main scene... "+g.toFixed(0)+"%"},100)}function f(){clearInterval(u)}a.d(d,"b",function(){return y});a.d(d,"a",function(){return A});
a.d(d,"c",function(){return E});a.d(d,"d",function(){return f});var q=a("gqHH"),u},TqLJ:function(B,d,a){function y(m){e=m}function A(){c.push(r.z.G)}function E(m){c.push(m);b.push(m);C.b(m);t({mesh:m,X:function(){m.D()}})}function f(m){c.push(m);k.push(m);C.b(m);t({mesh:m})}function q(m){return m.id===r.z.G.id?!0:m.isVisible?-1!==c.indexOf(m):!1}function u(){return void 0===e?1:e===r.z.G?2:-1!==b.indexOf(e)?3:-1!==k.indexOf(e)?4:e===n?5:1}function t(m){void 0===m.X&&(m.X=p.a);void 0===m.ba&&(m.ba=
r.r);void 0!==m.mesh&&(m.mesh.actionManager=new BABYLON.ActionManager(m.ba),m.mesh.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(){3===r.z.B&&m.X()})))}function g(){n=BABYLON.Mesh.CreateSphere("padNavSphereAroundCamera",4,r.c-1,r.r);n.flipFaces(!0);var m=new BABYLON.StandardMaterial("padNavSphereAroundCameraMat",r.r);m.diffuseColor=new BABYLON.Color3(1,1,1);m.specularColor=new BABYLON.Color3(0,0,0);m.A=null;n.material=m;n.visibility=0;r.r.registerBeforeRender(function(){n.position=
x.a()});c.push(n)}a.d(d,"h",function(){return n});a.d(d,"i",function(){return y});a.d(d,"d",function(){return e});a.d(d,"j",function(){return A});a.d(d,"a",function(){return E});a.d(d,"b",function(){return f});a.d(d,"c",function(){return q});a.d(d,"e",function(){return u});a.d(d,"f",function(){return t});a.d(d,"g",function(){return g});var x=a("vCcv"),C=a("0fSa"),r=a("gqHH"),p=a("9bcR"),c=[],b=[],k=[],n,e},YORc:function(B,d,a){function y(c,b,k){void 0===k&&(k=!1);var n=E(c);void 0===r&&(r=x.c.clone());
c=n.map(function(O){return{mesh:O,position:O.position.clone(),rotation:r.clone(),scaling:O.scaling.clone()}});r=x.c.clone();if(0!==n.length){f(n);t.r.render();var e=b.getBoundingInfo().boundingBox,m=Object.keys(e.maximumWorld).map(function(O){return e.maximumWorld[O]-e.minimumWorld[O]}),D=0,v,h,l,F=n.length,G=function(O){O=n[O];var P=O.getBoundingInfo().boundingBox,M=Object.keys(P.maximumWorld).map(function(R){return P.maximumWorld[R]-P.minimumWorld[R]}),Q=M[0]*M[1]*M[2];Q>D&&(D=Q,v=P,h=M,l=O)};for(b=
0;b<F;b++)G(b);b=m.map(function(O,P){return O/h[P]});b=Math.min.apply(null,b);G=new BABYLON.Vector3(b,b,b);for(b=0;b<F;b++)m=n[b],m.scaling=G;t.r.render();G=v.centerWorld.subtract(e.centerWorld);for(b=0;b<F;b++)m=n[b],m.position=m.position.subtract(G);t.r.render();G=0;t.s.ma&&(G=A(l,e));for(b=0;b<F;b++)m=n[b],m.position.y=m.position.y-G,m.visibility=1;C=c[0].rotation.clone();if(!0===k)for(k=c.length,b=0;b<k;b++){var z=c[b];F=z.mesh;var w=F.position.clone(),I=F.scaling.clone(),H=F.rotation.clone();
m=q("posX","position.x",z.position.x,w.x);G=q("posY","position.y",z.position.y,w.y);w=q("posZ","position.z",z.position.z,w.z);var L=q("scaX","scaling.x",z.scaling.x,I.x),J=q("scaY","scaling.y",z.scaling.y,I.y);I=q("scaZ","scaling.z",z.scaling.z,I.z);var K=q("rotX","rotation.x",z.rotation.x,H.x),N=q("rotY","rotation.y",z.rotation.y,H.y);z=q("rotZ","rotation.z",z.rotation.z,H.z);F.animations=[m,G,w,L,J,I,K,N,z];t.r.beginAnimation(F,0,15,!1,1,function(){u.e()})}else u.e()}}function A(c,b){var k=Math.PI;
k=c.name+"-"+(c.rotation.x%k).toFixed(3)+"-"+(c.rotation.y%k).toFixed(3)+"-"+(c.rotation.z%k).toFixed(3);if(void 0!==p[k])return p[k];var n=c.getVerticesData(BABYLON.VertexBuffer.PositionKind),e=1E6,m=n.length;c=c.getWorldMatrix();for(var D=Math.max(1,3*Math.floor(m/3E3)),v=0;v<m;v+=D){var h=new BABYLON.Vector3(n[v],n[v+1],n[v+2]);h=BABYLON.Vector3.TransformCoordinates(h,c);h.y<e&&(e=h.y)}b=e-b.minimumWorld.y-.1;return p[k]=b}function E(c){for(var b=[],k=Object.keys(g.a),n=k.length,e=0;e<n;e++){var m=
g.a[k[e]].mesh;!0===m.isVisible&&b.push(m)}void 0!==c&&b.push(c);return b}function f(c){for(var b=c.length,k=0;k<b;k++){var n=c[k];n.animations=[];!0===n.isVisible&&(n.scaling=new BABYLON.Vector3(1,1,1),n.position=new BABYLON.Vector3(0,0,0),n.rotation=x.c,n.visibility=0)}}function q(c,b,k,n){c=new BABYLON.Animation(c,b,60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);c.setKeys([{frame:0,value:k},{frame:15,value:n}]);return c}a.d(d,"a",function(){return C});a.d(d,
"b",function(){return y});var u=a("0fSa"),t=a("gqHH"),g=a("EYe7"),x=a("PjGz"),C=new BABYLON.Vector3(0,0,0),r=void 0,p={}},cw8d:function(B,d,a){function y(){g.c();t.d();u.z.ka&&q.d();f.e()}function A(){g.b();if(!0===u.s.oa)if(u.z.G){u.z.G.visibility=1;var r=new BABYLON.StandardMaterial("transparentGround",u.r);r.diffuseColor=new BABYLON.Color3(1,1,1);r.specularColor=new BABYLON.Color3(0,0,0);r.emissiveColor=new BABYLON.Color3(0,0,0);r.alpha=u.i;u.z.G.material=r}else console.log("Warning: Vars.vrVars.groundMesh not defined.");
C.b()}function E(r,p){if(void 0!==r.material&&null!==r.material){var c=g.a();void 0===c.fa?(c=c.ga,c=.95<c?.05:.4>c?.0025:.013636363636363637*c-.0029545454545454545):c=c.fa;r.material.emissiveColor=new BABYLON.Color3(c,c,c);f.a(r)}r.scaling.z=-1;0<p&&(r.scaling.x=-1);g.d&&g.d.getShadowMap().renderList.push(r);x.b(r)}a.d(d,"b",function(){return y});a.d(d,"a",function(){return A});a.d(d,"c",function(){return E});var f=a("0fSa"),q=a("jIpr"),u=a("gqHH"),t=a("qmVJ"),g=a("sqbB"),x=a("TqLJ"),C=a("fcUb")},
ejGh:function(B,d,a){function y(){f=E.r.activeCamera;f.keysUp=[87,38];f.keysDown=[83,40];f.keysLeft=[65,37];f.keysRight=[68,39];E.r.gravity=new BABYLON.Vector3(0,-.1,0);f.applyGravity=!0;A();E.r.collisionsEnabled=!0;f.checkCollisions=!0;f.speed=.1;f.attachControl(E.o,!0);f._updatePosition()}function A(){f.ellipsoid=new BABYLON.Vector3(1,.5*E.n,1)}a.d(d,"b",function(){return y});a.d(d,"a",function(){return A});var E=a("gqHH"),f;new BABYLON.Vector3(0,0,0)},fRJN:function(B,d,a){(function(y){function A(){E()}
function E(){function t(b){y("#"+b.id).click(function(){b.D()})}for(var g=[{Z:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                    width="48px" height="48px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve">\n                    <g>\n                        <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linejoin="round" d="M41.99,17.573v-5.209\n                            c0-0.588-0.717-1.092-1.615-1.092H25.123V8.92c0-0.336-0.449-0.672-0.987-0.672H1.077C0.449,8.248,0,8.583,0,8.92v3.444\n                            c0,0,0,0,0,0.084v25.877c0,0.588,0.717,1.092,1.615,1.092h38.671"/>\n                        <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linejoin="round" d="M7.985,17.573h38.67\n                            c0.898,0,1.526,0.504,1.347,1.008l-5.295,19.744c-0.089,0.588-0.985,1.092-1.884,1.092H2.064c-0.898,0-1.526-0.504-1.347-1.008\n                            l5.294-19.744C6.19,18.077,7.088,17.573,7.985,17.573L7.985,17.573"/>\n                    </g>\n                    </svg>',
title:"open",id:"open-button",D:function(){f.a("Load Molecule","pages/load.html?warning")}},{Z:'<svg version="1.2" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                    x="0px" y="0px" width="48px" height="48px" viewBox="0 0 48 48" xml:space="preserve">\n                        <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="\n                            M35.5,9.8c1.7,5.4-0.6,8-1.6,8.9c-1.9,1.9-4.5,4.7-5.8,7c-1.5,2.7-4.1,12-6.8,4.4c-3.2-9.1,1.3-11.6,3.5-13.4\n                            c1.5-1.3,3.4-4.3,0.5-5.3c-4-1.3-6.1,5.3-10.7,4c-3-0.8-3.2-4.1-2.2-6.6C15.4,1.7,32.5,0.6,35.5,9.8L35.5,9.8z"/>\n                        <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" d="M28.3,39.6c0-5.5-8.5-5.5-8.5,0S28.3,45.1,28.3,39.6"/>\n                  </svg>',
title:"Help",id:"help-button",D:function(){f.a("Help","pages/index.html",!0,!0)}},{Z:'<svg version="1.2" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n             \t    x="0px" y="0px" width="48px" height="48px" viewBox="0 0 48 48" xml:space="preserve">\n                    <path fill="none" stroke="#FFFFFF" stroke-width="1.5" d="M35.4,4.6c-3.2,0-5.8,2.4-5.8,5.8l0,0c0,0.5,0.2,1.1,0.5,1.4l-13.4,7.8\n             \t    c-1-1.4-2.6-1.8-4.1-1.8c-3.2,0-5.8,2.4-5.8,5.8l0,0c0,2.9,2.6,5.8,5.8,5.8l0,0c1.3,0,2.2-0.5,3.2-1.4l13.6,8.3\n             \t    c-0.3,0.4-0.3,0.9-0.3,1.4c0,3.4,2.7,5.8,5.9,5.8l0,0c3.2,0,5.6-2.4,5.6-5.8l0,0c0-2.9-2.4-5.9-5.6-5.9l0,0c-1.7,0-3.2,1.1-4.4,2\n             \t    l-13.1-7.3c0.5-0.9,0.7-2,0.7-2.9c0-0.5,0-1.4-0.2-2l13.3-7.3c1,0.9,2.5,1.5,4.1,1.5c3.2,0,5.9-2.5,5.9-5.4l0,0\n             \t    C41.3,6.9,38.5,4.6,35.4,4.6L35.4,4.6L35.4,4.6z"/>\n                 </svg>',
title:"Share (Leader)",id:"leader",D:function(){u.e()}},{Z:'<svg style="position:relative; left:0.5px;" width="48px" height="48px" xmlns="http://www.w3.org/2000/svg"\n                    xmlns:svg="http://www.w3.org/2000/svg" clip-rule="evenodd">\n                    <g class="layer">\n                        <path d="m47.799999,43.649999l-47.699999,0l0,-39.749999l47.699999,0l0,39.749999zm-1.9875,-37.762499l-43.724999,0l0,35.774999l43.724999,0l0,-35.774999zm-7.95,13.9125l-1.9875,0l0,-6.441487l-22.341487,22.341487l6.441487,0l0,1.9875l-9.9375,0l0,-9.9375l1.9875,0l0,6.441487l22.341487,-22.341487l-6.441487,0l0,-1.9875l9.9375,0l0,9.9375z" fill="#ffffff" id="svg_1"/>\n                    </g>\n                  </svg>',
title:"Full Screen",id:"fullscreen-button",D:function(){q.q.switchFullscreen(!0);y("#renderCanvas").focus()}}],x="",C=60,r=0,p=g.reverse();r<p.length;r++){var c=p[r];x+='\n            <button\n                title="'+c.title+'"\n                id="'+c.id+'"\n                class="ui-button"\n                style="color:white;\n                    width:80px;\n                    height:50px;\n                    right:5px;\n                    position:absolute;\n                    bottom:'+
C.toString()+'px;\n                    background-color:rgba(51,51,51,0.7);\n                    border:none;\n                    outline:none;\n                    cursor:pointer;">\n                    '+c.Z+"\n            </button>";C+=55}y("body").append(x);for(x=0;x<g.length;x++)c=g[x],t(c);g=document.getElementById("babylonVRiconbtn");null!==g&&(g.style.opacity="1.0",g.style.filter="alpha(opacity=1.0)")}a.d(d,"a",function(){return A});var f=a("iC5T"),q=a("gqHH"),u=a("mvtX")}).call(this,a("EVdn"))},
fcUb:function(B,d,a){(function(y){function A(){e.w();k.b();E();f(function(){C.a();D.b()?(e.z.B=3,e.r.getMeshByID("ground").visibility=0,e.z.aa.isVisible=!1):(c.b(),b.j());p.b();n.a()});window.addEventListener("resize",function(){e.q.resize()})}function E(){var v=BABYLON.Mesh.CreateSphere("navTargetMesh",4,.1,e.r),h=new BABYLON.StandardMaterial("myMaterial",e.r);h.diffuseColor=new BABYLON.Color3(1,0,1);v.material=h;v.Ga=2;e.x({aa:v});r.a();m.d()}function f(v){k.a("Loading the main scene...");BABYLON.SceneLoader.LoadAssetContainer(e.t,
"scene.babylon",e.r,function(h){k.c(90);e.r.executeWhenReady(function(){y.getJSON(e.t+"scene_info.json",function(l){!1===l.menuActive&&(e.z.ka=!1);void 0!==l.positionOnFloor&&(e.s.ma=l.positionOnFloor);void 0!==l.infiniteDistanceSkyBox&&(e.s.ia=l.infiniteDistanceSkyBox);void 0!==l.transparentGround&&(e.s.oa=l.transparentGround);h.addAllToScene();e.r.activeCamera=e.r.cameras.filter(function(F){return-1===F.name.indexOf("VR")})[0];q();u();t();g();v()})})},function(h){h.lengthComputable&&k.a("Loading the main scene... "+
Math.round(90*h.loaded/h.total).toString()+"%")})}function q(){for(var v=!1,h=0;1<e.r.lights.length;){var l=e.r.lights[h].name.toLowerCase();-1===l.indexOf("shadowlight")&&-1===l.indexOf("shadow_light")?e.r.lights[h].dispose():v?e.r.lights[h].dispose():(v=!0,h++)}}function u(){for(var v=e.r.meshes.length,h=0;h<v;h++){var l=e.r.meshes[h];"protein_box"===l.name?l.isVisible=!1:-1!==l.name.toLowerCase().indexOf("skybox")&&e.s.ia&&(l.material.disableLighting=!0,l.infiniteDistance=!0)}}function t(){for(var v=
e.r.meshes.length,h=0;h<v;h++){var l=e.r.meshes[h];l.material&&l.material.emissiveTexture&&(l.material.emissiveColor=new BABYLON.Color3(1,1,1),l.material.albedoColor=new BABYLON.Color3(0,0,0),l.material.Ba=new BABYLON.Color3(0,0,0))}}function g(){for(var v=e.r.meshes.length,h=0;h<v;h++)if(e.r.meshes[h].material){var l=e.r.meshes[h];if(void 0===l.material.emissiveTexture||null===l.material.emissiveTexture)l.material.emissiveTexture=l.material.diffuseTexture,l.material.diffuseColor=new BABYLON.Color3(0,
0,0),l.material.specularColor=new BABYLON.Color3(0,0,0),l.material.emissiveColor=new BABYLON.Color3(0,0,0);m.a(l,!1);b.f({mesh:l,ba:e.r})}}function x(){setTimeout(m.e,1E3);k.d();e.r.activeCamera.maxZ=250;e.r.activeCamera.minZ=0;e.q.runRenderLoop(function(){e.r.render()})}a.d(d,"a",function(){return A});a.d(d,"b",function(){return x});var C=a("1RHl"),r=a("nV79"),p=a("cw8d"),c=a("9bcR"),b=a("TqLJ"),k=a("Rr3C"),n=a("fRJN"),e=a("gqHH"),m=a("0fSa"),D=a("p11u")}).call(this,a("EVdn"))},gg4m:function(B,d,
a){function y(u){void 0===u&&(u="");var t="<p>ProteinVR has encountered an error while running in leader mode. ";E.a("Leader Error",""!==u?t+" Here are the details:</p><p><pre>"+(u+"</pre></p>"):t+"</p>",!1)}function A(){y("Leader connection destroyed. Please refresh.")}a.d(d,"a",function(){return f});a.d(d,"b",function(){return q});a.d(d,"c",function(){return y});a.d(d,"d",function(){return A});var E=a("iC5T"),f=!1,q=function(){function u(){this.C=this.O=null;this.ua();this.za()}u.prototype.ua=function(){var t=
"act add age ago aid aim air all and any arm art ask bag ban bar bed bet big bit box bus but buy can cap car cat ceo cow cry cup day dig dna rna dog dry due ear eat egg end era etc eye fan far fee few fit fix fly for fun gap get guy hat hey hip hit hot how ice its jet job joy key kid lab law lay let lie lot low map may mix net new nod nor not now nut odd off oil old one our out owe own pan pay per pet pie pop put raw red rid row run say sea see set sit six ski sky sue sun tap tax ten the toe too top toy try two use via war way wet who why win yes yet you".split(" "),
g="pvr"+this.na();g+=t[Math.floor(Math.random()*t.length)]+this.na();g=g.replace(/\./g,"");this.C=new Peer(g,{debug:2,config:{iceServers:[{urls:"stun:0.peerjs.com"},{urls:"stun:stun.l.google.com:19302"},{urls:"stun:durrantlab.com/apps/proteinvr/stun"}]}})};u.prototype.za=function(){var t=this;this.C.on("disconnected",function(){A();!0===f&&console.log("Connection lost. Please reconnect");t.C.id=t.O;t.C.Aa=t.O;t.C.Fa()});this.C.on("error",function(g){y(g)})};u.prototype.na=function(){return Math.random().toString().replace(/\./g,
"").replace(/0/g,"").slice(0,3)};return u}()},gqHH:function(B,d,a){function y(k){r=k}function A(){t=document.getElementById("renderCanvas");g=new BABYLON.Engine(t,!0);BABYLON.Database.IDBStorageEnabled=!0;x=new BABYLON.Scene(g);window.scene=x}function E(){if(void 0===c){var k=new BABYLON.Ray(x.activeCamera.position,new BABYLON.Vector3(0,-1,0),50);c=x.pickWithRay(k,function(n){return"ground"===n.name}).distance}}function f(k){c=k}function q(k){b=k;u.b()||(k={createDeviceOrientationCamera:!0,useMultiview:!1},
x.getEngine().getCaps().multiview&&(k.useMultiview=!0),C=x.createDefaultVRExperience(k),k=document.getElementById("babylonVRiconbtn"),null!==k&&(k.style.opacity="0.0",k.style.filter="alpha(opacity=0)"),b.ka=!0)}a.d(d,"o",function(){return t});a.d(d,"q",function(){return g});a.d(d,"r",function(){return x});a.d(d,"y",function(){return C});a.d(d,"t",function(){return r});a.d(d,"v",function(){return y});a.d(d,"s",function(){return p});a.d(d,"n",function(){return c});a.d(d,"j",function(){return 11});a.d(d,
"b",function(){return 1.5});a.d(d,"g",function(){return 1});a.d(d,"d",function(){return 2E3});a.d(d,"a",function(){return 1.2});a.d(d,"f",function(){return 2.5});a.d(d,"e",function(){return.05});a.d(d,"h",function(){return.01});a.d(d,"m",function(){return 500});a.d(d,"l",function(){return 750});a.d(d,"k",function(){return.1});a.d(d,"c",function(){return 15});a.d(d,"i",function(){return.05});a.d(d,"z",function(){return b});a.d(d,"w",function(){return A});a.d(d,"p",function(){return E});a.d(d,"u",function(){return f});
a.d(d,"x",function(){return q});var u=a("p11u"),t,g,x,C,r="environs/day/",p={ma:!1,ia:!0,oa:!1},c,b={}},iC5T:function(B,d,a){(function(y){function A(r,p,c,b){void 0===c&&(c=!0);f||(f=!0,document.head.insertAdjacentHTML("beforeend","<link rel=stylesheet href=pages/css/bootstrap.min.css>"),document.body.insertAdjacentHTML("beforeend",'\n            \x3c!-- The Modal --\x3e\n            <div class="modal fade" id="msgModal" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n\n                    \x3c!-- Modal Header --\x3e\n                    <div class="modal-header">\n                        <h4 class="modal-title">Modal Heading</h4>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    \x3c!-- Modal body --\x3e\n                    <div class="modal-body">\n                        \x3c!-- TODO: Check if works on both iPhone and Firefox. Used to be overflow-y:auto;overflow-x:hidden; --\x3e\n                        <div id="iframe-container" style="height:350px;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch">\n                            <iframe frameBorder="0" src="" style="width:100%;height:100%;"></iframe>\n                        </div>\n                        <span id="msg-container"></span>\n                    </div>\n\n                    \x3c!-- Modal footer --\x3e\n                    <div id="modal-footer" class="modal-footer">\n                        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n                    </div>\n                </div>\n            </div>\n        '));
E(r,p,c,b)}function E(r,p,c,b){void 0===q&&(q=y("#msgModal"),u=q.find("h4.modal-title"),g=q.find("#iframe-container"),x=q.find("#msg-container"),t=g.find("iframe"),C=q.find("#modal-footer"));g.hide();t.attr("src","");u.html(r);!0===c?(x.hide(),t.attr("src",p),void 0===b&&C.hide(),t.on("load",function(){g.show()})):(x.show(),g.hide(),setTimeout(function(){"inline"===x.css("display")&&g.slideUp()},1E3),x.html(p),void 0===b&&C.show());!0===b?C.show():!1===b&&C.hide();q.modal()}a.d(d,"a",function(){return A});
var f=!1,q,u,t,g,x,C}).call(this,a("EVdn"))},jIpr:function(B,d,a){function y(){h=[];l=[];m={Styles:n.a(),Rotate:k.b()};void 0===F&&(F=new BABYLON.GUI.GUI3DManager(r.r));f();G=new BABYLON.TransformNode("");A();void 0===v&&u();void 0===D&&(D=new BABYLON.Sound("click-button",e.ea,r.r,null,{loop:!1,autoplay:!1,Ha:!0,volume:.1}));g()}function A(){function z(H){H=H.toString();h.push(new b({D:function(){},default:!1,R:H,ja:function(L){L.isVisible(!1)},level:1,name:"menu-visible-button-"+H,la:w,T:H,color:"yellow"}))}
var w=new BABYLON.GUI.SpherePanel;w.radius=r.f;w.margin=r.e;F.addControl(w);w.blockLayout=!0;for(var I=0;16>I;I++)z(I);w.columns=4;w.linkToTransformNode(G);w.blockLayout=!1}function E(z){function w(I,H){z(I,H);for(var L=Object.keys(I),J=L.length,K=0;K<J;K++){var N=L[K],O=I[N];switch(typeof O){case "object":w(O,H.concat([N]))}}}w(m,[])}function f(){E(function(z,w){q(z,w)})}function q(z,w){0<w.length&&(z["Back \u21e6"]=function(){t(w.slice(0,w.length-1))});z["Close Menu \u00d7"]=function(){v.M()}}function u(){var z=
new BABYLON.GUI.StackPanel3D;F.addControl(z);v=new b({D:function(I){I.value?t([]):t(void 0);G.position.copyFrom(x.a());G.rotation.y=x.c()},default:!1,R:"Show Menu",level:0,name:"menu-visible-button",la:z,T:"Hide Menu"});var w=new BABYLON.TransformNode("");z.linkToTransformNode(w);w.rotation.x=.5*Math.PI;w.position.copyFrom(C.b);w.position.y+=.1;w.rotation.y=x.c();r.r.registerBeforeRender(function(){w.position.copyFrom(C.b);w.position.y+=.1;w.rotation.y=x.c()})}function t(z){void 0!==z&&0<z.length&&
(l=z,void 0===m.Last&&(m.Last=function(){console.log("Going to",l);t(l)}));for(var w=h.length,I=0;I<w;I++)h[I].isVisible(!1);if(void 0!==z){var H=m;w=z.length;for(I=0;I<w;I++)H=H[z[I]];var L=Object.keys(H),J=["Close Menu \u00d7"],K=["Back \u21e6"],N=J.concat(K);L.sort(function(M,Q){var R=-1!==N.indexOf(M),S=-1!==N.indexOf(Q);return R&&!S?1:!R&&S?-1:M.localeCompare(Q)});var O=[];O=4>=L.length?[7,6,5,4]:8>=L.length?[7,6,5,4,11,10,9,8]:12>=L.length?[3,2,1,0,7,6,5,4,11,10,9,8]:[3,2,1,0,7,6,5,4,11,10,
9,8,15,14,13,12];w=L.length;var P=function(M){var Q=L[M],R=H[Q];M=h[O[M]];M.da(Q);switch(typeof R){case "object":M.D=function(){t(z.concat(Q))};M.U("green");break;case "function":M.D=R,M.U("default")}-1!==J.indexOf(Q)?M.U("red"):-1!==K.indexOf(Q)&&M.U("yellow");M.isVisible(!0)};for(I=0;I<w;I++)P(I)}}function g(){function z(w,I){var H=Object.keys(w);if(3===H.length){var L=H.filter(function(P){return"Close Menu \u00d7"===P||"Back \u21e6"===P?!1:!0});if(1===L.length){H=L[0];var J=I[I.length-1],K=J+": "+
H;I=I.slice(0,I.length-1).concat([K]);w=m;var N=I.slice(0,I.length-1),O=N.length;for(L=0;L<O;L++)w=w[N[L]];w[K]=w[J][H];delete w[J];w=w[K];H=Object.keys(w)}}J=H.length;for(L=0;L<J;L++)switch(K=H[L],N=w[K],typeof N){case "object":z(N,I.concat([K]))}}z(m,[])}var x=a("vCcv"),C=a("ph2Y"),r=a("gqHH"),p=a("TqLJ"),c=new BABYLON.Vector3(.75,.75,.75),b=function(){function z(w){var I=this;this.button=new BABYLON.GUI.HolographicButton(w.name);w.la.addControl(this.button);this.V();void 0!==w.color&&this.U(w.color);
this.level=w.level;this.A=new BABYLON.GUI.TextBlock;this.A.color="white";this.A.A=!0;this.value=w.default;this.T=w.T;this.R=w.R;this.D=w.D;this.da();this.button.scaling=c.clone();this.I=BABYLON.Mesh.CreateSphere(w.name+"-container-mesh",2,r.a,r.r);this.I.position=this.button.node.absolutePosition;this.I.visibility=0;this.I.scaling=c.clone();this.I.D=function(){I.M()};p.a(this.I);void 0!==w.ja&&w.ja(this)}z.prototype.U=function(w){switch(w){case "default":this.button.mesh.material=this.F;break;case void 0:this.button.mesh.material=
this.F;break;case "green":this.button.mesh.material=this.H;break;case "yellow":this.button.mesh.material=this.K;break;case "red":this.button.mesh.material=this.J}};z.prototype.isVisible=function(w){if(void 0===w)return this.button.isVisible;this.button.isVisible=w;this.I.isVisible=w};z.prototype.M=function(){D.setPosition(this.I.position.clone());D.play();this.value=!this.value;this.D(this);this.da()};z.prototype.da=function(w){void 0===w?this.A.text=this.value?this.T:this.R:this.R=this.T=this.A.text=
w;this.A.text=this.W(this.A.text);this.button.content.dispose();this.button.content=this.A};z.prototype.W=function(w){return w.replace(/(?![^\n]{1,25}$)([^\n]{1,25})\s/g,"$1\n")};z.prototype.V=function(){this.F=this.button.mesh.material;this.H=this.button.mesh.material.clone();this.H.albedoColor=new BABYLON.Color3(.3,.35+.1,.4);this.K=this.button.mesh.material.clone();this.K.albedoColor=new BABYLON.Color3(.4,.35+.1,.4);this.J=this.button.mesh.material.clone();this.J.albedoColor=new BABYLON.Color3(.4,
.35,.4)};return z}(),k=a("nKXq"),n=a("BjG7");B=a("O2BG");var e=a.n(B);a.d(d,"b",function(){return m});a.d(d,"a",function(){return D});a.d(d,"c",function(){return v});a.d(d,"d",function(){return y});a.d(d,"e",function(){return q});var m,D=void 0,v,h,l,F,G},mvtX:function(B,d,a){function y(){x=!0;C=new r;C.ha.then(function(p){u.a("Leader","pages/leader.html?f="+p,!0,!0)});setInterval(function(){var p=q.a(),c=q.b();C.S({type:"locrot",val:[p.x,p.y,p.z,1*c.x,1*c.y,1*c.z,1*c.w]})},100);setInterval(function(){C.S({type:"initialUrl",
val:window.location.href})},2E3)}function A(p,c,b){C.S({type:"toggleRep",val:{filters:p,repName:c,colorScheme:b}})}function E(p){C.S({type:"molAxisRotation",val:p})}function f(){C.S({type:"molUndoRot",val:void 0})}a.d(d,"a",function(){return x});a.d(d,"e",function(){return y});a.d(d,"b",function(){return A});a.d(d,"d",function(){return E});a.d(d,"c",function(){return f});var q=a("vCcv"),u=a("iC5T"),t=a("gg4m"),g=function(){function p(c,b){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,
n){k.__proto__=n}||function(k,n){for(var e in n)n.hasOwnProperty(e)&&(k[e]=n[e])};return p(c,b)}return function(c,b){function k(){this.constructor=c}p(c,b);c.prototype=null===b?Object.create(b):(k.prototype=b.prototype,new k)}}(),x=!1,C,r=function(p){function c(){var b=p.call(this)||this;b.ha=null;b.wa=null;b.P=[];var k;b.wa=new Promise(function(n){k=n});b.ha=new Promise(function(n){b.ca(n,k)});return b}g(c,p);c.prototype.S=function(b){!0===t.a&&console.log("Send:",b);for(var k=this.P.length,n=0;n<
k;n++)this.P[n].send(b)};c.prototype.ca=function(b,k){var n=this;this.C.on("open",function(){null===n.C.id?(t.c("Received null id from peer open."),n.C.id=n.O):n.O=n.C.id;b(n.O);!0===t.a&&console.log(n.O)});this.C.on("connection",function(e){n.P.push(e);k();!0===t.a&&console.log("Lecturer: added a connection")});this.C.on("close",function(){for(var e=n.P.length,m=0;m<e;m++)n.P[m]=null;t.d()})};return c}(t.b)},nKXq:function(B,d,a){function y(){return{"Undo Rotate":function(){E()},"X Axis":function(){A("x")},
"Y Axis":function(){A("y")},"Z Axis":function(){A("z")}}}function A(g){q.i(g,15*Math.PI/180);f.b(void 0,u.r.getMeshByName("protein_box"),!0);t.a&&t.d(g)}function E(){var g=f.a;q.f(g.x,g.y,g.z);f.b(void 0,u.r.getMeshByName("protein_box"),!0);t.a&&t.c()}a.d(d,"b",function(){return y});a.d(d,"a",function(){return A});a.d(d,"c",function(){return E});var f=a("YORc"),q=a("PjGz"),u=a("gqHH"),t=a("mvtX")},nV79:function(B,d,a){(function(y){function A(){C.b()||(E(),x.a(),setInterval(function(){var p=(new Date).getTime();
void 0===r&&(r=p);2E3<p-r&&void 0!==g.y&&(g.y.exitVR(),g.r.getEngine().exitFullscreen());r=p},1E3))}function E(){g.y.onEnteringVRObservable.add(function(){g.z.B=2;q();u.i(void 0);t.e();y(".ui-button").hide();y(".babylonVRicon").hide();x.b();window.vrHelper=g.y});g.y.onExitingVRObservable.add(function(){g.z.B=3;u.i(void 0);t.e();y(".ui-button").show();y(".babylonVRicon").show()})}function f(){var p=new BABYLON.Mesh("vrNavTargetMesh",g.r),c=new BABYLON.VertexData;c.Ea=[0,0,0];c.Da=[0];c.applyToMesh(p);
p.isVisible=!1;return p}function q(){g.y.raySelectionPredicate=function(p){return u.c(p)};g.y.gazeTrackerMesh=f();g.y.updateGazeTrackerScale=!1;g.y.displayGaze=!0;g.y.enableGazeEvenWhenNoPointerLock=!0;g.y.enableInteractions()}a.d(d,"a",function(){return A});a.d(d,"b",function(){return q});var u=a("TqLJ"),t=a("0fSa"),g=a("gqHH"),x=a("pAUf"),C=a("p11u"),r}).call(this,a("EVdn"))},p11u:function(B,d,a){(function(y){function A(h){return(Math.round(1E5*h)/1E5).toString()}function E(){var h=[],l=c.c.x;0!==
l&&h.push("rx="+A(l));l=c.c.y;0!==l&&h.push("ry="+A(l));l=c.c.z;0!==l&&h.push("rz="+A(l));h.push("s="+r.b);void 0!==m&&(console.log("setting webrtc..."),h.push("f="+m));l=0;for(var F=[],G=Object.keys(p.a),z=G.length,w=0;w<z;w++){var I=G[w];p.a[I].mesh.isVisible&&(F.push("st"+l.toString()+"="+I),l++)}h=h.concat(F);l=n.a();F=n.b();h.push("cx="+A(l.x));h.push("cy="+A(l.y));h.push("cz="+A(l.z));h.push("crx="+A(F.x));h.push("cry="+A(F.y));h.push("crz="+A(F.z));h.push("crw="+A(F.w));h.push("e="+k.t);void 0===
D&&(D=!1);h.push("sh="+D.toString());window.history.pushState({},document.title,window.location.href.split("?")[0]+"?"+h.join("&"))}function f(){var h=window.location.href,l=h?h.split("?")[1]:window.location.search.slice(1);h={};if(l){l=l.split("#")[0];l=l.split("&");for(var F=l.length,G=0;G<F;G++){var z=l[G].split("=");h[z[0]]=void 0===z[1]?!0:z[1]}}v=h;h=v.e;void 0!==h&&k.v(h)}function q(){m=v.f;if(void 0!==m){b.a(m);k.r.activeCamera.inputs.clear();y("#help-button").hide();y("#leader").hide();y("#babylonVRiconbtn").hide();
y("#open-button").hide();var h=y("#fullscreen-button"),l=h.css("bottom");void 0!==l&&(l=+l.replace(/px/g,""),h.css("bottom",(l-60).toString()+"px"));y("#capture-clicks").remove()}h=v.rx;l=v.ry;var F=v.rz;c.f(void 0===h?0:+h,void 0===l?0:+l,void 0===F?0:+F);h=v.s;void 0!==h&&""!==h&&(4===h.length&&-1===h.indexOf(".")&&(h="https://files.rcsb.org/view/"+h.toUpperCase()+".pdb"),r.c(h));h=Object.keys(v);l=h.length;for(F=0;F<l;F++){var G=h[F];"st"===G.slice(0,2)&&(G=u(v[G]),e.push(G))}0===e.length&&(e.push([["Protein",
"All"],"Cartoon","Spectrum"]),e.push([["Nucleic","All"],"Stick","Element"]),e.push([["Ligand","All"],"Stick","Element"]));h=v.cx;l=v.cy;F=v.cz;void 0!==h&&void 0!==l&&void 0!==F&&n.e(new BABYLON.Vector3(+h,+l,+F));h=v.crx;l=v.cry;F=v.crz;G=v.crw;void 0!==h&&void 0!==l&&void 0!==F&&void 0!==G&&n.f(new BABYLON.Quaternion(+h,+l,+F,+G));D=v.sh;C()}function u(h){h=h.split("--");var l=decodeURIComponent(h[h.length-2]),F=decodeURIComponent(h[h.length-1]);return[h.slice(0,h.length-2).map(function(G){G=decodeURIComponent(G);
"{"===G.charAt(0)&&(G=JSON.parse(G));return G}),l,F]}function t(){if(0<e.length){var h=e.pop();p.b(h[0],h[1],h[2],function(){t()})}}function g(){return-1!==window.location.href.indexOf("f=")}function x(){return-1!==window.location.href.indexOf("sh=t")}function C(){setInterval(function(){E()},1E3)}a.d(d,"h",function(){return m});a.d(d,"f",function(){return E});a.d(d,"d",function(){return f});a.d(d,"e",function(){return q});a.d(d,"c",function(){return u});a.d(d,"g",function(){return t});a.d(d,"b",function(){return g});
a.d(d,"a",function(){return x});var r=a("qmVJ"),p=a("EYe7"),c=a("PjGz"),b=a("uBLq"),k=a("gqHH"),n=a("vCcv"),e=[],m=void 0,D=!1,v}).call(this,a("EVdn"))},pAUf:function(B,d,a){function y(){function n(e){g.z.B=1;C.b();E(e);f(e)}u.g();g.y.webVRCamera.onControllerMeshLoadedObservable.add(function(e){n(e)});g.y.onControllerMeshLoaded.add(function(e){n(e)})}function A(){}function E(n){n.onTriggerStateChangedObservable.add(function(e){e.pressed&&(e=(new Date).getTime(),e-r>g.m&&(r=e,q.a()))})}function f(n){n.onPadStateChangedObservable.add(function(e){(k=
e.pressed)&&Math.abs(c)<g.k&&Math.abs(b)<g.k&&console.log("Would reset camera view if you didn't get an error below...")});n.onPadValuesChangedObservable.add(function(e){c=e.y;b=e.x;Math.abs(b)<g.k&&Math.abs(c)<g.k?b=c=0:.5>Math.abs(b)?b=0:(b+=0<b?-.5:.5,b=2*b)});g.r.registerBeforeRender(function(){if(k){if(!t.a.equals(t.e)){var e=x.a(),m=t.a.subtract(e);m.normalize();m=m.scale(c*g.h*g.r.getAnimationRatio());x.e(e.subtract(m))}0!==b&&(e=(new Date).getTime(),e-p<g.l||(p=e,e=g.y.webVRCamera.rotationQuaternion.toEulerAngles(),
e.y+=.25*Math.sign(b)*Math.PI,g.y.webVRCamera.rotationQuaternion=BABYLON.Quaternion.FromEulerVector(e)))}})}a.d(d,"a",function(){return y});a.d(d,"b",function(){return A});var q=a("9bcR"),u=a("TqLJ"),t=a("ph2Y"),g=a("gqHH"),x=a("vCcv"),C=a("nV79"),r=0,p=0,c=0,b=0,k=!1},ph2Y:function(B,d,a){function y(){var p=1.5*q.a;q.r.registerBeforeRender(function(){a:{if(3===q.z.B)var c=q.r.activeCamera.getForwardRay();else if(2===q.z.B||1===q.z.B){c=void 0;1===q.z.B?(c=q.y.rightControllerGazeTrackerMesh,c||(c=
q.y.leftControllerGazeTrackerMesh)):2===q.z.B&&(c=q.y.gazeTrackerMesh);if(!c){console.log("error!");break a}c.isVisible?r.copyFrom(c.absolutePosition):r.copyFrom(g);c=f.a();c=new BABYLON.Ray(c,r.subtract(c))}else console.log("Unexpected error.");A(c)}void 0===r?(r.copyFrom(g),u.i(void 0)):10<BABYLON.Vector3.Distance(f.a(),r)&&(r.copyFrom(g),u.i(void 0));q.z.aa.position.copyFrom(r);void 0!==u.d&&(q.z.aa.isVisible=u.d!==u.h);c=f.a();var b=E(c).pickedPoint;b&&(x=b,c.y-b.y<p?(t.c.button.isVisible=!1,
t.c.I.isVisible=!1):(t.c.button.isVisible=!0,t.c.I.isVisible=!0));(b=E(r).pickedPoint)&&(C=b)})}function A(p,c){void 0===c&&(c=!0);p=q.r.pickWithRay(p,function(k){return u.c(k)});var b=p.distance;p.hit&&b<q.c?(c&&r.copyFrom(p.pickedPoint),u.i(p.pickedMesh)):(r.copyFrom(g),u.i(void 0))}function E(p){p=new BABYLON.Ray(p,new BABYLON.Vector3(0,-1,0),50);return q.r.pickWithRay(p,function(c){return c.id===q.z.G.id})}a.d(d,"e",function(){return g});a.d(d,"b",function(){return x});a.d(d,"c",function(){return C});
a.d(d,"a",function(){return r});a.d(d,"f",function(){return y});a.d(d,"d",function(){return E});var f=a("vCcv"),q=a("gqHH"),u=a("TqLJ"),t=a("jIpr"),g=new BABYLON.Vector3(-1E3,1E3,1E3),x=new BABYLON.Vector3(0,0,0),C=new BABYLON.Vector3(0,0,0),r=new BABYLON.Vector3(0,0,0)},qmVJ:function(B,d,a){function y(c){p=c}function A(){E()}function E(){C.h(function(){g.e();C.b(p,function(c){g.f();g.b()||(f(c),u.b(q.b));g.g();x.a();"nanokid.sdf"===p&&!1===g.b()&&setTimeout(function(){t.a("Load Molecule","pages/load.html")},
3E3)})})}function f(c){var b=c.selectedAtoms({});r={"Atom Name":[],Chain:[],Element:[],"Residue Index":[],"Residue Name":[],"Secondary Structure":[]};var k=b.length;for(c=0;c<k;c++){var n=b[c];r["Atom Name"].push(n.atom);r.Chain.push(n.chain);r.Element.push(n.elem);r["Residue Name"].push(n.resn);r["Residue Index"].push(n.resi);r["Secondary Structure"].push(n.ss)}b=Object.keys(r);k=b.length;for(c=0;c<k;c++){var e=b[c];n=r;var m=e;e=r[e];for(var D={},v=[],h=0,l=e.length;h<l;++h)D.hasOwnProperty(e[h])||
(v.push(e[h]),D[e[h]]=1);n[m]=v}}a.d(d,"a",function(){return r});a.d(d,"b",function(){return p});a.d(d,"c",function(){return y});a.d(d,"d",function(){return A});var q=a("jIpr"),u=a("BjG7"),t=a("iC5T"),g=a("p11u"),x=a("cw8d"),C=a("PjGz"),r={},p="nanokid.sdf"},sqbB:function(B,d,a){function y(){var t=f.r.lights[0],g=A();q.a()?(u=new BABYLON.ShadowGenerator(4096,t),u.useBlurExponentialShadowMap=!0,u.F=!0,u.A=g.blur,u.setDarkness(g.ga)):console.log("iOS, so not generating shadows... causes an error... See https://forum.babylonjs.com/t/issues-between-shadowgenerator-and-ios-osx/795")}
function A(){var t=f.r.lights[0],g=64,x=.9625,C=void 0,r=t.name.match(/blur_([0-9\.]+)/g);null!==r&&(g=+r[0].substr(5));r=t.name.match(/dark_([0-9\.]+)/g);null!==r&&(x=+r[0].substr(5));t=t.name.match(/ambient_([0-9\.]+)/g);null!==t&&(C=+t[0].substr(8));return{blur:g,ga:x,fa:C}}function E(){for(var t=f.r.meshes.length,g=0;g<t;g++){var x=f.r.meshes[g];if(-1!==x.name.toLowerCase().indexOf("shadowcatcher")||-1!==x.name.toLowerCase().indexOf("shadow_catcher"))x.material=new BABYLON.ShadowOnlyMaterial("shadow_catch"+
g.toString(),f.r),x.material.activeLight=f.r.lights[0],x.receiveShadows=!0}}a.d(d,"d",function(){return u});a.d(d,"c",function(){return y});a.d(d,"a",function(){return A});a.d(d,"b",function(){return E});var f=a("gqHH"),q=a("p11u"),u},uBLq:function(B,d,a){function y(c){r=new Float32Array(E.a().asArray());p=new Float32Array(E.b().asArray());(new C(function(b){!0===f.a&&console.log("stud1 got data",b);var k=b.val;switch(b.type){case "locrot":r=new Float32Array([k[0],k[1],k[2]]);p=new Float32Array([k[3],
k[4],k[5],k[6]]);break;case "initialUrl":-1!==window.location.href.indexOf("nanokid.sdf")&&(b=k+"&f="+x,b=b.replace(/sh=true/g,"sh=false"),top.location.href=b);break;case "toggleRep":u.b(k.filters,k.repName,k.colorScheme,void 0);break;case "molAxisRotation":t.a(k);break;case "molUndoRot":t.c()}})).xa(c);q.r.registerBeforeRender(function(){var b=new Float32Array(E.a().asArray());b=A(b,r);b=BABYLON.Vector3.FromArray(b);E.e(b);b=new Float32Array(E.b().asArray());b=A(b,p);b=BABYLON.Quaternion.FromArray(b);
E.f(b)})}function A(c,b){for(var k=c.length,n=new Float32Array(k),e=0;e<k;e++)n[e]=b[e]-c[e];b=q.r.getAnimationRatio();var m=new Float32Array(k);for(e=0;e<k;e++)m[e]=c[e]+.02*b*n[e];return m}a.d(d,"a",function(){return y});var E=a("vCcv"),f=a("gg4m"),q=a("gqHH"),u=a("EYe7"),t=a("nKXq"),g=function(){function c(b,k){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var m in e)e.hasOwnProperty(m)&&(n[m]=e[m])};return c(b,k)}return function(b,k){function n(){this.constructor=
b}c(b,k);b.prototype=null===k?Object.create(k):(n.prototype=k.prototype,new n)}}(),x,C=function(c){function b(k){var n=c.call(this)||this;n.L=null;n.va=k;n.ca();return n}g(b,c);b.prototype.xa=function(k){var n=this;this.L&&this.L.close();this.L=this.C.connect(k,{reliable:!0});this.ya();this.L.on("open",function(){!0===f.a&&console.log("Connected to: "+n.L.C)});x=k};b.prototype.ca=function(){var k=this;this.C.on("close",function(){k.L=null;f.d()})};b.prototype.ya=function(){var k=this;this.L.on("data",
function(n){!0===f.a&&console.log("Received:",n);k.va(n)});this.L.on("close",function(){f.c("Leader connection closed.")})};return b}(f.b),r=null,p=null},vCcv:function(B,d,a){function y(){var r=g.r.activeCamera,p=r.position.clone();if(2===g.z.B||1===g.z.B)r.leftCamera?p.copyFrom(r.leftCamera.globalPosition):console.log("Prob here");return p}function A(r){if(3===g.z.B){var p=g.r.activeCamera;p.position.copyFrom(r)}else if(2===g.z.B||1===g.z.B)p=g.y.webVRCamera,p.position.copyFrom(r.subtract(u()))}
function E(){if(2===g.z.B||1===g.z.B){var r=g.y.webVRCamera.deviceRotationQuaternion;return 0!==r.x?r:g.r.activeCamera.rotationQuaternion}return g.r.activeCamera.rotationQuaternion}function f(r){2===g.z.B||1===g.z.B?console.log("PROBLEM!"):(g.r.activeCamera.rotationQuaternion=r.clone(),g.r.activeCamera.rotation=g.r.activeCamera.rotationQuaternion.toEulerAngles())}function q(){if(2===g.z.B||1===g.z.B){var r=t.c.subtract(t.b),p=BABYLON.Vector3.GetAngleBetweenVectors(r,x,C);for(0>r.z&&(p=-p);0>p;)p+=
2*Math.PI;for(;p>2*Math.PI;)p-=2*Math.PI;return p+=.5*Math.PI}return g.r.activeCamera.rotation.clone().y}function u(){if(3===g.z.B)return new BABYLON.Vector3(0,0,0);var r=g.y.webVRCamera,p;r.leftCamera?p=r.leftCamera.globalPosition.subtract(r.position):p=new BABYLON.Vector3(0,0,0);return p}a.d(d,"a",function(){return y});a.d(d,"e",function(){return A});a.d(d,"b",function(){return E});a.d(d,"f",function(){return f});a.d(d,"c",function(){return q});a.d(d,"d",function(){return u});var t=a("ph2Y"),g=
a("gqHH"),x=new BABYLON.Vector3(1,0,0),C=new BABYLON.Vector3(1,0,0)}},[["/7QA",1,2]]]);}).call(this || window)
