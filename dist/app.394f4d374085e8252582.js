(function(){'use strict';function T(C){var d=0;return function(){return d<C.length?{done:!1,value:C[d++]}:{done:!0}}}var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(C,d,a){C!=Array.prototype&&C!=Object.prototype&&(C[d]=a.value)},U="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function V(C,d){if(d){var a=U;C=C.split(".");for(var y=0;y<C.length-1;y++){var A=C[y];A in a||(a[A]={});a=a[A]}C=C[C.length-1];y=a[C];d=d(y);d!=y&&null!=d&&aa(a,C,{configurable:!0,writable:!0,value:d})}}V("Array.prototype.find",function(C){return C?C:function(d,a){a:{var y=this;y instanceof String&&(y=String(y));for(var A=y.length,E=0;E<A;E++){var g=y[E];if(d.call(a,g,E,y)){d=g;break a}}d=void 0}return d}});var W;
if("function"==typeof Object.setPrototypeOf)W=Object.setPrototypeOf;else{var X;a:{var ba={ea:!0},Y={};try{Y.__proto__=ba;X=Y.ea;break a}catch(C){}X=!1}W=X?function(C,d){C.__proto__=d;if(C.__proto__!==d)throw new TypeError(C+" is not extensible");return C}:null}var ca=W;V("Object.setPrototypeOf",function(C){return C||ca});function Z(C){var d="undefined"!=typeof Symbol&&Symbol.iterator&&C[Symbol.iterator];return d?d.call(C):{next:T(C)}}
V("Promise",function(C){function d(g){this.F=0;this.K=void 0;this.A=[];var r=this.H();try{g(r.resolve,r.reject)}catch(u){r.reject(u)}}function a(){this.A=null}function y(g){return g instanceof d?g:new d(function(r){r(g)})}if(C)return C;a.prototype.F=function(g){if(null==this.A){this.A=[];var r=this;this.H(function(){r.K()})}this.A.push(g)};var A=U.setTimeout;a.prototype.H=function(g){A(g,0)};a.prototype.K=function(){for(;this.A&&this.A.length;){var g=this.A;this.A=[];for(var r=0;r<g.length;++r){var u=
g[r];g[r]=null;try{u()}catch(q){this.J(q)}}}this.A=null};a.prototype.J=function(g){this.H(function(){throw g;})};d.prototype.H=function(){function g(q){return function(m){u||(u=!0,q.call(r,m))}}var r=this,u=!1;return{resolve:g(this.ra),reject:g(this.J)}};d.prototype.ra=function(g){if(g===this)this.J(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof d)this.sa(g);else{a:switch(typeof g){case "object":var r=null!=g;break a;case "function":r=!0;break a;default:r=!1}r?this.qa(g):
this.V(g)}};d.prototype.qa=function(g){var r=void 0;try{r=g.then}catch(u){this.J(u);return}"function"==typeof r?this.ta(r,g):this.V(g)};d.prototype.J=function(g){this.W(2,g)};d.prototype.V=function(g){this.W(1,g)};d.prototype.W=function(g,r){if(0!=this.F)throw Error("Cannot settle("+g+", "+r+"): Promise already settled in state"+this.F);this.F=g;this.K=r;this.pa()};d.prototype.pa=function(){if(null!=this.A){for(var g=0;g<this.A.length;++g)E.F(this.A[g]);this.A=null}};var E=new a;d.prototype.sa=function(g){var r=
this.H();g.Y(r.resolve,r.reject)};d.prototype.ta=function(g,r){var u=this.H();try{g.call(r,u.resolve,u.reject)}catch(q){u.reject(q)}};d.prototype.then=function(g,r){function u(B,t){return"function"==typeof B?function(n){try{q(B(n))}catch(b){m(b)}}:t}var q,m,x=new d(function(B,t){q=B;m=t});this.Y(u(g,q),u(r,m));return x};d.prototype.catch=function(g){return this.then(void 0,g)};d.prototype.Y=function(g,r){function u(){switch(q.F){case 1:g(q.K);break;case 2:r(q.K);break;default:throw Error("Unexpected state: "+
q.F);}}var q=this;null==this.A?E.F(u):this.A.push(u)};d.resolve=y;d.reject=function(g){return new d(function(r,u){u(g)})};d.race=function(g){return new d(function(r,u){for(var q=Z(g),m=q.next();!m.done;m=q.next())y(m.value).Y(r,u)})};d.all=function(g){var r=Z(g),u=r.next();return u.done?y([]):new d(function(q,m){function x(n){return function(b){B[n]=b;t--;0==t&&q(B)}}var B=[],t=0;do B.push(void 0),t++,y(u.value).Y(x(B.length-1),m),u=r.next();while(!u.done)})};return d});
V("Math.sign",function(C){return C?C:function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1}});
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/7QA":function(C,d,a){a.r(d);C=a("fcUb");d=a("SYky");a.n(d);a=a("p11u");"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("service-worker.js",{scope:"./"}).then(function(y){console.log("SW registered: ",y)}).catch(function(y){console.log("SW registration failed: ",y)})});a.d();C.a()},"0fSa":function(C,d,a){function y(){setTimeout(function(){BABYLON.SceneOptimizer.OptimizeAsync(x.r,u())},
5E3);x.r.autoClear=!1;x.r.autoClearDepthAndStencil=!1;for(var b=x.r.meshes.length,c=new BABYLON.Color3(0,0,0),f=0;f<b;f++){var e=x.r.meshes[f];-1!==e.name.indexOf("baked")&&void 0!==e.material&&(e.material.diffuseColor=c,e.material.specularColor=c,e.material.emissiveTexture=e.material.diffuseTexture,e.material.diffuseTexture=null,e.freezeWorldMatrix())}}function A(b){if(void 0!==b){b=b.getVerticesData(BABYLON.VertexBuffer.PositionKind);if(null===b)return null;b=b.length/3}else b=0;return b}function E(b){var c=
A(b);null===c||100>c||(c=1+Math.floor(c/x.d),1<c&&b.subdivide(c))}function g(b,c){void 0===c&&(c=!0);c&&b.material.freeze()}function r(){m.d&&(x.r.lights[0].autoUpdateExtends=!0,m.d.getShadowMap().refreshRate=BABYLON.RenderTargetTexture.REFRESHRATE_RENDER_ONCE,x.r.lights[0].autoUpdateExtends=!1)}function u(){var b=new BABYLON.SceneOptimizerOptions(25,2E3),c=0;b.optimizations.push(new BABYLON.ShadowsOptimization(c));b.optimizations.push(new BABYLON.LensFlaresOptimization(c));b.optimizations.push(new BABYLON.PostProcessesOptimization(c));
b.optimizations.push(new BABYLON.ParticlesOptimization(c));b.optimizations.push(new B(c));c++;b.optimizations.push(new t(c));b.optimizations.push(new B(c));c++;b.optimizations.push(new BABYLON.TextureOptimization(c,512));b.optimizations.push(new B(c));c++;b.optimizations.push(new BABYLON.RenderTargetsOptimization(c));b.optimizations.push(new BABYLON.TextureOptimization(c,256));b.optimizations.push(new B(c));c++;b.optimizations.push(new BABYLON.HardwareScalingOptimization(c,4));b.optimizations.push(new n(c,
500));b.optimizations.push(new B(c));return b}function q(b){null!==b&&b.dispose()}a.d(d,"d",function(){return y});a.d(d,"b",function(){return E});a.d(d,"a",function(){return g});a.d(d,"e",function(){return r});a.d(d,"c",function(){return q});var m=a("sqbB"),x=a("gqHH"),B=function(){return function(b){var c=this;void 0===b&&(b=0);this.priority=b;this.apply=function(){console.log("Optimization priority:",c.priority);console.log("FPS:",x.q.getFps());console.log("");return!0};this.getDescription=function(){return"Reports the current priority. For debugging."}}}(),
t=function(){return function(b){"undefined"===typeof b&&(b=0);this.priority=b;this.apply=function(){var c=x.r.getMeshByName("surfaces.wrl");q(c);return!0};this.getDescription=function(){return"Removes surface representations."}}}(),n=function(){return function(b,c,f){void 0===f&&(f=void 0);"undefined"===typeof b&&(b=0);this.priority=b;this.apply=function(){for(var e=[],k=x.r.meshes.length,p=0;p<k;p++){var D=x.r.meshes[p];if(-1===D.name.indexOf("Decimated")){var v=A(D);null!==v&&(v<c||e.push([v,D,
void 0===f?1-c/v:f]))}}e.sort(function(l,F){return F[0]-l[0]});k=e.length;for(p=0;p<k;p++){v=e[p];D=v[1];for(v=v[2];0<D.getLODLevels().length;){var h=D.getLODLevels()[0].mesh;D.removeLODLevel(h);q(h)}D.simplify([{quality:v,distance:.001}],!1,BABYLON.SimplificationType.QUADRATIC,function(){})}return!0};this.getDescription=function(){return"Simplifies the geometry of complex objects in the scene."}}}()},"1RHl":function(C,d,a){function y(){g=A.r.cameras.filter(function(u){return-1===u.name.indexOf("VR")})[0];
var r=new BABYLON.DeviceOrientationCamera("DevOr_camera",g.position.clone(),A.r,!0);r.rotation=g.rotation.clone();A.r.activeCamera=r;A.r.activeCamera.rotationQuaternion=BABYLON.Quaternion.FromEulerVector(g.rotation);A.p();E.b()}a.d(d,"a",function(){return y});var A=a("gqHH"),E=a("ejGh"),g},"9bcR":function(C,d,a){(function(y){function A(){n.z.G=n.r.getMeshByID("ground");null===n.z.G&&alert("No mesh named ground");n.z.G.checkCollisions=!0;n.z.G.visibility=0;t.b(n.z.G);b.f({X:r,mesh:n.z.G});n.z.B=3;
g();c.f();m();E()}function E(){k=x.a();n.r.registerBeforeRender(function(){var l=x.a();null===c.d(l).pickedMesh&&p===n.r.activeCamera.id?x.e(k):(k=l,p=n.r.activeCamera.id)})}function g(){y("body").keypress(function(l){32===l.charCode?r():109===l.charCode&&e.c.M()})}function r(){if(void 0===f.h){var l=(new Date).getTime();if(!(250>l-D))switch(D=l,b.e()){case 2:console.log("teleport");u();break;case 4:q();break;case 3:b.d.D()}}}function u(l,F){void 0===l&&(l=void 0);void 0===F&&(F=void 0);void 0===
F&&(F=function(){});n.y.gazeTrackerMesh.isVisible=!1;var G=new BABYLON.Animation("animationCameraTeleportation","position",90,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),z=x.a();void 0===l&&(l=new BABYLON.Vector3(c.a.x,c.a.y+n.n,c.a.z));var w=x.d();l=l.subtract(w);z=z.subtract(w);G.setKeys([{frame:0,value:z},{frame:n.j,value:l}]);var I=n.r.activeCamera;I.animations=[];I.animations.push(G);n.r.beginAnimation(I,0,n.j,!1,1,function(){n.y.gazeTrackerMesh.isVisible=
!0;I.animations=[];F()})}function q(){var l=c.c,F=x.a(),G=c.a.subtract(F),z=G.length(),w;.1*z<n.g?w=c.a.subtract(G.normalize().scale(n.g)):.1*z>n.b?w=c.a.subtract(G.normalize().scale(n.b)):.1*z<n.b&&(w=F.add(G.scale(.9)));w.y=c.a.y;w.y-l.y<.5*n.a+.1&&(w.y=l.y+.5*n.a+.1);n.u(c.a.y-l.y);u(w,function(){B.a()})}function m(){v=y("#capture-clicks");v.click(function(){console.log("clicked!");r()});n.r.registerBeforeRender(function(){var l=n.r.activeCamera.inputs.attached.deviceOrientation;(l=l?0!==l._alpha||
0!==l._beta||0!==l._gamma:!1)&&!h?(h=!0,v.show()):!l&&h&&(h=!1,v.hide())})}a.d(d,"b",function(){return A});a.d(d,"a",function(){return r});var x=a("vCcv"),B=a("ejGh"),t=a("0fSa"),n=a("gqHH"),b=a("TqLJ"),c=a("ph2Y"),f=a("p11u"),e=a("jIpr"),k,p="",D=0,v=void 0,h=!1}).call(this,a("EVdn"))},BjG7:function(C,d,a){function y(){function f(D){function v(F){var G=t[h][F];e.Components[h][G]=r({},h,function(z,w){q.b([h,G],z,w)})}var h=B[D];e.Components[h]={};D=t[h].length;for(var l=0;l<D;l++)v(l)}for(var e={Components:{},
Selections:{},Clear:function(){for(var D=Object.keys(q.a),v=D.length,h=0;h<v;h++)q.a[D[h]].mesh.isVisible=!1;x.c.M()},"Remove Existing":{}},k=B.length,p=0;p<k;p++)f(p);return e}function A(f){if(!m.b()){f.Styles["Remove Existing"]={};x.e(f.Styles["Remove Existing"],["Styles","Remove Existing"]);for(var e=Object.keys(q.a),k=e.length,p=function(v){var h=e[v];!0===q.a[h].mesh.isVisible&&(v=h.replace(/--/g," "),v=v.replace(/{/g,"").replace(/}/g,"").replace(/"/g,""),f.Styles["Remove Existing"][v]=function(){x.c.M();
setTimeout(function(){var l=m.c(h);q.b(l[0],l[1],"Hide")},0)})},D=0;D<k;D++)p(D)}}function E(f){function e(F,G,z,w){function I(J){J=H[J];if(1===J.length){var K=J[0];G[K]={};G[K]=r(G[K],F,function(O,P){var M={};M[k[F]]=K;q.b([M],O,P)},w.concat([K]))}else{var N="["+J[0].toString()+"-"+J[J.length-1].toString()+"]";G[N]={};e(F,G[N],J,w.concat([N]))}}z.sort(function(J,K){J=isNaN(+J)?J:+J;K=isNaN(+K)?K:+K;return J<K?-1:J>K?1:0});var H=g(z,14);z=H.length;for(var L=0;L<z;L++)I(L);x.e(G,w)}f.Styles.Selections=
{};x.e(f.Styles.Selections,["Styles","Selections"]);for(var k={"Atom Name":"atom",Chain:"chain",Element:"elem","Residue Index":"resi","Residue Name":"resn","Secondary Structure":"ss"},p=Object.keys(u.a),D=p.length,v=0;v<D;v++){var h=p[v],l=u.a[h];f.Styles.Selections[h]={};e(h,f.Styles.Selections[h],l,["Styles","Selections",h])}}function g(f,e){if(2>e)return[f];var k=f.length,p=[],D=0,v;if(0===k%e)for(v=Math.floor(k/e);D<k;)p.push(f.slice(D,D+=v));else for(;D<k;)v=Math.ceil((k-D)/e--),p.push(f.slice(D,
D+=v));return p}function r(f,e,k,p){function D(l){function F(I){var H=b[I];f[z].Colors[H]=function(){k(z,H);x.c.M()}}function G(I){var H=c[I];f[z]["Color Schemes"][H]=function(){k(z,H);x.c.M()}}var z=v[l];f[z]={Colors:{},"Color Schemes":{}};l=c.length;for(var w=0;w<l;w++)G(w);l=b.length;for(w=0;w<l;w++)F(w);f[z].Hide=function(){k(z,"Hide");x.c.M()};void 0!==p&&(l=p.concat([z]),x.e(f[z],l),l=p.concat([z,"Colors"]),w=f[z].Colors,x.e(w,l),l=p.concat([z,"Color Schemes"]),w=f[z]["Color Schemes"],x.e(w,
l))}var v=void 0===n[e]?n.Protein:n[e];e=v.length;for(var h=0;h<e;h++)D(h);void 0!==p&&x.e(f,p);return f}a.d(d,"a",function(){return y});a.d(d,"c",function(){return A});a.d(d,"b",function(){return E});var u=a("qmVJ"),q=a("EYe7"),m=a("p11u"),x=a("jIpr"),B=["Protein","Ligand","Ligand Context","Water","Nucleic"],t={Ligand:["All"],"Ligand Context":["All"],Nucleic:["All"],Protein:["All","Hydrophobic","Hydrophilic","Charged","Aromatic"],Water:["All"]};C=["Stick","Sphere","Surface"];var n={Ligand:C,"Ligand Context":["Cartoon"].concat(C),
Nucleic:C,Protein:["Cartoon"].concat(C),Water:C},b="White Red Blue Green Orange Yellow Purple".split(" "),c=["Element","Amino Acid","Chain","Nucleic","Spectrum"]},EYe7:function(C,d,a){function y(k,p,D,v){void 0===v&&(v=void 0);b.a&&b.b(k,p,D);var h=E(k,p,D);void 0===v&&(v=function(){});if("Hide"===D){D=Object.keys(c);k=D.length;for(var l=0;l<k;l++){var F=c[D[l]];F.N===h.N&&(F.mesh.isVisible=!1,console.log("Hiding existing mesh..."))}t.b(void 0,B.r.getMeshByName("protein_box"));r()}else void 0!==c[h.$]?
(c[h.$].mesh.isVisible=!0,console.log("showing existing mesh..."),t.b(void 0,B.r.getMeshByName("protein_box")),r()):(n.e(),D=e[D],k={and:k.map(function(G){return void 0!==f[G]?f[G]:G})},"surface"===p.toLowerCase()?n.a(D,k,function(){A(h,p,v)}):(l={},l[p.toLowerCase()]=D,n.g(k,l),A(h,p,v)))}function A(k,p,D){n.d(!0,p,function(v){for(var h=Object.keys(c),l=h.length,F=0;F<l;F++){var G=h[F],z=c[G];z.N===k.N&&(u.c(z.mesh),delete c[G],console.log("deleting old mesh..."))}void 0!==v&&("Surface"===p&&(v.material.backFaceCulling=
!1),c[k.$]={N:k.N,mesh:v});r();D();console.log("added new mesh")})}function E(k,p,D){k.sort();k=k.map(function(v){return"string"===typeof v?v:JSON.stringify(v)});return{N:k.join("--")+"--"+p,$:k.join("--")+"--"+p+"--"+D}}function g(k){for(var p=k.map(function(l){return l}),D=k.length,v=0;v<D;v++){var h=k[v];p.push(h.toUpperCase());p.push(h.toLowerCase())}return p=p.filter(function(l,F){return p.indexOf(l)>=F})}function r(){x.f();m.c(q.b)}a.d(d,"a",function(){return c});a.d(d,"b",function(){return y});
var u=a("0fSa"),q=a("jIpr"),m=a("BjG7"),x=a("p11u"),B=a("gqHH"),t=a("YORc"),n=a("PjGz"),b=a("mvtX"),c={},f={All:{},Protein:{resn:g("ALA ARG ASP ASN ASX CYS GLN GLU GLX GLY HIS HSP HYP ILE LEU LYS MET PCA PHE PRO TRP TYR VAL GLU SER THR MSE".split(" "))},Acidic:{resn:g(["ASP","GLU"])},Cyclic:{resn:g(["HIS","PHE","PRO","TRP","TYR"])},Aliphatic:{resn:g(["ALA","GLY","ILE","LEU","VAL"])},Aromatic:{resn:g(["HIS","PHE","TRP","TYR"])},Basic:{resn:g(["ARG","HIS","LYS","HSP"])},Charged:{resn:g("ASP GLU ARG HIS LYS HSP".split(" "))},
Hydrophobic:{resn:g("ALA LEU VAL ILE PRO PHE MET TRP".split(" "))},Neutral:{resn:g("VAL PHE GLN TYR HIS CYS MET TRP ASX GLX PCA HYP".split(" "))},Nucleic:{resn:g("ADE A GUA G CYT C THY T URA U DA DG DC DT".split(" "))},Purine:{resn:g(["ADE","A","GUA","G"])},Pyrimidine:{resn:g("CYT C THY T URA U".split(" "))},Ions:{resn:g("AL BA CA CAL CD CES CLA CL CO CS CU CU1 CUA HG IN IOD K MG MN3 MO3 MO4 MO5 MO6 NA NAW OC7 PB POT PT RB SOD TB TL WO4 YB ZN ZN1 ZN2".split(" "))},Water:{resn:g(["WAT","HOH","TIP",
"TIP3"])}};f.Ligand={not:{or:[f.Protein,f.Nucleic,f.Ions,f.Water]}};f["Ligand Context"]={byres:!0,within:{distance:4,sel:f.Ligand}};var e={"Amino Acid":{colorscheme:"amino"},Blue:{color:"blue"},Chain:{colorscheme:"chain"},Element:{colorscheme:"default"},Green:{color:"green"},Nucleic:{colorscheme:"nucleic"},Orange:{color:"orange"},Purple:{color:"purple"},Red:{color:"red"},Spectrum:{color:"spectrum"},White:{color:"white"},Yellow:{color:"yellow"}}},O2BG:function(C,d,a){C.Ca=a.p+"cf4bd43cd8dade4b62f7e691f5d0f8cc.mp3"},
PjGz:function(C,d,a){(function(y,A){function E(H){var L=y("#mol-container");L&&L.remove();y("body").append('<div\n        id="mol-container"\n        class="mol-container"\n        style="display:none;"></div>');h=y("#mol-container");l={backgroundColor:"white"};v=A.createViewer(h,l);window.viewer=v;H()}function g(){I&&(I=!1,v=null,E(function(){v.addModel(z,"pdb")}));v.setStyle({},{})}function r(H,L){y.ajax(H,{success:function(J){z=J;w="pdb";"sdf"===H.slice(H.length-3).toLowerCase()&&(w="sdf");J=v.addModel(J,
w);L(J)},error:function(J,K,N){J="<p>Could not load molecule: "+H+"</p>";J=J+("<p><pre>"+N+'</pre></p><p>(<a href="')+(window.location.href.split("?")[0]+'">Click to restart...</a>)</p>');k.a("Error Loading Molecule",J,!1,!1)}})}function u(H,L){void 0!==H.and&&1===Object.keys(H).length&&"{}"===JSON.stringify(H.and[0])&&2===H.and.length&&(H=H.and[1]);v.setStyle(H,L);v.render()}function q(H,L,J){I=!0;v.addSurface(A.SurfaceType.MS,H,L,void 0,void 0,function(){J()})}function m(H,L,J){void 0===J&&(J=function(){});
c.q.hideLoadingUI();H&&x(function(){B(L,function(){var K=new BABYLON.StandardMaterial("Material",c.r);K.diffuseColor=new BABYLON.Color3(1,1,1);K.emissiveColor=new BABYLON.Color3(0,0,0);K.specularColor=new BABYLON.Color3(0,0,0);for(var N=[],O=p.length,P=0;P<O;P++){var M=p[P],Q=[];BABYLON.VertexData.ComputeNormals(M.coors,M.trisIdxs,Q);var R=new BABYLON.VertexData;R.positions=M.coors;R.indices=M.trisIdxs;R.normals=Q;R.colors=M.colors;M=new BABYLON.Mesh("mesh_3dmol_tmp"+P,c.r);R.applyToMesh(M);M.material=
K;N.push(M)}if(0<N.length){var S=BABYLON.Mesh.MergeMeshes(N,!0,!0);S.name="MeshFrom3DMol"+Math.random().toString();S.id=S.name;f.c(S,123456789)}K=S;void 0!==K&&e.b(K,c.r.getMeshByName("protein_box"));J(K);p=[]})})}function x(H){F=v.exportVRML();H()}function B(H,L){p=[];if("undefined"!==typeof Worker)G.onmessage=function(J){J=J.data;var K=J.chunk;J=J.status;if(void 0!==K){var N=K[0],O=K[1],P=K[2];p.length===N&&p.push({coors:new Float32Array(0),colors:new Float32Array(0),trisIdxs:new Uint32Array(0)});
K=p[N];N=[p[N][O],P];var M=0;P=N.length;for(var Q=0;Q<P;Q++){var R=N[Q];M+=R.length}M=new ("trisIdxs"===O?Uint32Array:Float32Array)(M);var S=0;for(Q=0;Q<P;Q++)R=N[Q],M.set(R,S),S+=R.length;K[O]=M}switch(J){case "more":G.postMessage({cmd:"sendDataChunk",data:void 0});break;case "done":L();break;default:console.log("Error here!")}},G.postMessage({cmd:"start",data:F,removeExtraPts:"Stick"===H});else throw k.a("Browser Error","Your browser does not support web workers. Please use a more\n            modern browser when running ProteinVR.",
!1),Error("Browser does not support web workers.");}function t(H,L){D[H]+=L;b.f()}function n(H,L,J){D=new BABYLON.Vector3(H,L,J)}a.d(d,"c",function(){return D});a.d(d,"h",function(){return E});a.d(d,"e",function(){return g});a.d(d,"b",function(){return r});a.d(d,"g",function(){return u});a.d(d,"a",function(){return q});a.d(d,"d",function(){return m});a.d(d,"i",function(){return t});a.d(d,"f",function(){return n});var b=a("p11u"),c=a("gqHH"),f=a("cw8d"),e=a("YORc"),k=a("iC5T"),p=[],D=new BABYLON.Vector3(0,
0,0),v,h,l,F,G=new Worker("vrmlWebWorker.js"),z="",w="pdb",I=!1}).call(this,a("EVdn"),a("VS3o"))},Rr3C:function(C,d,a){function y(){document.getElementById("loadingContainer").outerHTML=""}function A(q){g();r.q.displayLoadingUI();r.q.loadingUIText=q}function E(q){var m=q;clearInterval(u);u=setInterval(function(){m+=.02*(99-m);r.q.displayLoadingUI();r.q.loadingUIText="Loading the main scene... "+m.toFixed(0)+"%"},100)}function g(){clearInterval(u)}a.d(d,"b",function(){return y});a.d(d,"a",function(){return A});
a.d(d,"c",function(){return E});a.d(d,"d",function(){return g});var r=a("gqHH"),u},TqLJ:function(C,d,a){function y(p){k=p}function A(){b.push(t.z.G)}function E(p){b.push(p);c.push(p);B.b(p);q({mesh:p,X:function(){p.D()}})}function g(p){b.push(p);f.push(p);B.b(p);q({mesh:p})}function r(p){return p.id===t.z.G.id?!0:p.isVisible?-1!==b.indexOf(p):!1}function u(){return void 0===k?1:k===t.z.G?2:-1!==c.indexOf(k)?3:-1!==f.indexOf(k)?4:k===e?5:1}function q(p){void 0===p.X&&(p.X=n.a);void 0===p.ba&&(p.ba=
t.r);void 0!==p.mesh&&(p.mesh.actionManager=new BABYLON.ActionManager(p.ba),p.mesh.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(){3===t.z.B&&p.X()})))}function m(){e=BABYLON.Mesh.CreateSphere("padNavSphereAroundCamera",4,t.c-1,t.r);e.flipFaces(!0);var p=new BABYLON.StandardMaterial("padNavSphereAroundCameraMat",t.r);p.diffuseColor=new BABYLON.Color3(1,1,1);p.specularColor=new BABYLON.Color3(0,0,0);p.A=null;e.material=p;e.visibility=0;t.r.registerBeforeRender(function(){e.position=
x.a()});b.push(e)}a.d(d,"h",function(){return e});a.d(d,"i",function(){return y});a.d(d,"d",function(){return k});a.d(d,"j",function(){return A});a.d(d,"a",function(){return E});a.d(d,"b",function(){return g});a.d(d,"c",function(){return r});a.d(d,"e",function(){return u});a.d(d,"f",function(){return q});a.d(d,"g",function(){return m});var x=a("vCcv"),B=a("0fSa"),t=a("gqHH"),n=a("9bcR"),b=[],c=[],f=[],e,k},YORc:function(C,d,a){function y(b,c,f){void 0===f&&(f=!1);var e=E(b);void 0===t&&(t=x.c.clone());
b=e.map(function(O){return{mesh:O,position:O.position.clone(),rotation:t.clone(),scaling:O.scaling.clone()}});t=x.c.clone();if(0!==e.length){g(e);q.r.render();var k=c.getBoundingInfo().boundingBox,p=Object.keys(k.maximumWorld).map(function(O){return k.maximumWorld[O]-k.minimumWorld[O]}),D=0,v,h,l,F=e.length,G=function(O){O=e[O];var P=O.getBoundingInfo().boundingBox,M=Object.keys(P.maximumWorld).map(function(R){return P.maximumWorld[R]-P.minimumWorld[R]}),Q=M[0]*M[1]*M[2];Q>D&&(D=Q,v=P,h=M,l=O)};for(c=
0;c<F;c++)G(c);c=p.map(function(O,P){return O/h[P]});c=Math.min.apply(null,c);G=new BABYLON.Vector3(c,c,c);for(c=0;c<F;c++)p=e[c],p.scaling=G;q.r.render();G=v.centerWorld.subtract(k.centerWorld);for(c=0;c<F;c++)p=e[c],p.position=p.position.subtract(G);q.r.render();G=0;q.s.ma&&(G=A(l,k));for(c=0;c<F;c++)p=e[c],p.position.y=p.position.y-G,p.visibility=1;B=b[0].rotation.clone();if(!0===f)for(f=b.length,c=0;c<f;c++){var z=b[c];F=z.mesh;var w=F.position.clone(),I=F.scaling.clone(),H=F.rotation.clone();
p=r("posX","position.x",z.position.x,w.x);G=r("posY","position.y",z.position.y,w.y);w=r("posZ","position.z",z.position.z,w.z);var L=r("scaX","scaling.x",z.scaling.x,I.x),J=r("scaY","scaling.y",z.scaling.y,I.y);I=r("scaZ","scaling.z",z.scaling.z,I.z);var K=r("rotX","rotation.x",z.rotation.x,H.x),N=r("rotY","rotation.y",z.rotation.y,H.y);z=r("rotZ","rotation.z",z.rotation.z,H.z);F.animations=[p,G,w,L,J,I,K,N,z];q.r.beginAnimation(F,0,15,!1,1,function(){u.e()})}else u.e()}}function A(b,c){var f=Math.PI;
f=b.name+"-"+(b.rotation.x%f).toFixed(3)+"-"+(b.rotation.y%f).toFixed(3)+"-"+(b.rotation.z%f).toFixed(3);if(void 0!==n[f])return n[f];var e=b.getVerticesData(BABYLON.VertexBuffer.PositionKind),k=1E6,p=e.length;b=b.getWorldMatrix();for(var D=Math.max(1,3*Math.floor(p/3E3)),v=0;v<p;v+=D){var h=new BABYLON.Vector3(e[v],e[v+1],e[v+2]);h=BABYLON.Vector3.TransformCoordinates(h,b);h.y<k&&(k=h.y)}c=k-c.minimumWorld.y-.1;return n[f]=c}function E(b){for(var c=[],f=Object.keys(m.a),e=f.length,k=0;k<e;k++){var p=
m.a[f[k]].mesh;!0===p.isVisible&&c.push(p)}void 0!==b&&c.push(b);return c}function g(b){for(var c=b.length,f=0;f<c;f++){var e=b[f];e.animations=[];!0===e.isVisible&&(e.scaling=new BABYLON.Vector3(1,1,1),e.position=new BABYLON.Vector3(0,0,0),e.rotation=x.c,e.visibility=0)}}function r(b,c,f,e){b=new BABYLON.Animation(b,c,60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);b.setKeys([{frame:0,value:f},{frame:15,value:e}]);return b}a.d(d,"a",function(){return B});a.d(d,
"b",function(){return y});var u=a("0fSa"),q=a("gqHH"),m=a("EYe7"),x=a("PjGz"),B=new BABYLON.Vector3(0,0,0),t=void 0,n={}},cw8d:function(C,d,a){function y(){m.c();q.d();u.z.ka&&r.d();g.e()}function A(){m.b();if(!0===u.s.oa)if(u.z.G){u.z.G.visibility=1;var t=new BABYLON.StandardMaterial("transparentGround",u.r);t.diffuseColor=new BABYLON.Color3(1,1,1);t.specularColor=new BABYLON.Color3(0,0,0);t.emissiveColor=new BABYLON.Color3(0,0,0);t.alpha=u.i;u.z.G.material=t}else console.log("Warning: Vars.vrVars.groundMesh not defined.");
B.b()}function E(t,n){if(void 0!==t.material&&null!==t.material){var b=m.a();void 0===b.fa?(b=b.ga,b=.95<b?.05:.4>b?.0025:.013636363636363637*b-.0029545454545454545):b=b.fa;t.material.emissiveColor=new BABYLON.Color3(b,b,b);g.a(t)}t.scaling.z=-1;0<n&&(t.scaling.x=-1);m.d&&m.d.getShadowMap().renderList.push(t);x.b(t)}a.d(d,"b",function(){return y});a.d(d,"a",function(){return A});a.d(d,"c",function(){return E});var g=a("0fSa"),r=a("jIpr"),u=a("gqHH"),q=a("qmVJ"),m=a("sqbB"),x=a("TqLJ"),B=a("fcUb")},
ejGh:function(C,d,a){function y(){g=E.r.activeCamera;g.keysUp=[87,38];g.keysDown=[83,40];g.keysLeft=[65,37];g.keysRight=[68,39];E.r.gravity=new BABYLON.Vector3(0,-.1,0);g.applyGravity=!0;A();E.r.collisionsEnabled=!0;g.checkCollisions=!0;g.speed=.1;g.attachControl(E.o,!0);g._updatePosition()}function A(){g.ellipsoid=new BABYLON.Vector3(1,.5*E.n,1)}a.d(d,"b",function(){return y});a.d(d,"a",function(){return A});var E=a("gqHH"),g;new BABYLON.Vector3(0,0,0)},fRJN:function(C,d,a){(function(y){function A(){E()}
function E(){function q(c){y("#"+c.id).click(function(){c.D()})}for(var m=[{Z:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                    width="48px" height="48px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve">\n                    <g>\n                        <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linejoin="round" d="M41.99,17.573v-5.209\n                            c0-0.588-0.717-1.092-1.615-1.092H25.123V8.92c0-0.336-0.449-0.672-0.987-0.672H1.077C0.449,8.248,0,8.583,0,8.92v3.444\n                            c0,0,0,0,0,0.084v25.877c0,0.588,0.717,1.092,1.615,1.092h38.671"/>\n                        <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linejoin="round" d="M7.985,17.573h38.67\n                            c0.898,0,1.526,0.504,1.347,1.008l-5.295,19.744c-0.089,0.588-0.985,1.092-1.884,1.092H2.064c-0.898,0-1.526-0.504-1.347-1.008\n                            l5.294-19.744C6.19,18.077,7.088,17.573,7.985,17.573L7.985,17.573"/>\n                    </g>\n                    </svg>',
title:"open",id:"open-button",D:function(){g.a("Load Molecule","pages/load.html?warning")}},{Z:'<svg version="1.2" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                    x="0px" y="0px" width="48px" height="48px" viewBox="0 0 48 48" xml:space="preserve">\n                        <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="\n                            M35.5,9.8c1.7,5.4-0.6,8-1.6,8.9c-1.9,1.9-4.5,4.7-5.8,7c-1.5,2.7-4.1,12-6.8,4.4c-3.2-9.1,1.3-11.6,3.5-13.4\n                            c1.5-1.3,3.4-4.3,0.5-5.3c-4-1.3-6.1,5.3-10.7,4c-3-0.8-3.2-4.1-2.2-6.6C15.4,1.7,32.5,0.6,35.5,9.8L35.5,9.8z"/>\n                        <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" d="M28.3,39.6c0-5.5-8.5-5.5-8.5,0S28.3,45.1,28.3,39.6"/>\n                  </svg>',
title:"Help",id:"help-button",D:function(){g.a("Help","pages/index.html",!0,!0)}},{Z:'<svg version="1.2" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n             \t    x="0px" y="0px" width="48px" height="48px" viewBox="0 0 48 48" xml:space="preserve">\n                    <path fill="none" stroke="#FFFFFF" stroke-width="1.5" d="M35.4,4.6c-3.2,0-5.8,2.4-5.8,5.8l0,0c0,0.5,0.2,1.1,0.5,1.4l-13.4,7.8\n             \t    c-1-1.4-2.6-1.8-4.1-1.8c-3.2,0-5.8,2.4-5.8,5.8l0,0c0,2.9,2.6,5.8,5.8,5.8l0,0c1.3,0,2.2-0.5,3.2-1.4l13.6,8.3\n             \t    c-0.3,0.4-0.3,0.9-0.3,1.4c0,3.4,2.7,5.8,5.9,5.8l0,0c3.2,0,5.6-2.4,5.6-5.8l0,0c0-2.9-2.4-5.9-5.6-5.9l0,0c-1.7,0-3.2,1.1-4.4,2\n             \t    l-13.1-7.3c0.5-0.9,0.7-2,0.7-2.9c0-0.5,0-1.4-0.2-2l13.3-7.3c1,0.9,2.5,1.5,4.1,1.5c3.2,0,5.9-2.5,5.9-5.4l0,0\n             \t    C41.3,6.9,38.5,4.6,35.4,4.6L35.4,4.6L35.4,4.6z"/>\n                 </svg>',
title:"Share (Leader)",id:"leader",D:function(){u.e()}},{Z:'<svg style="position:relative; left:0.5px;" width="48px" height="48px" xmlns="http://www.w3.org/2000/svg"\n                    xmlns:svg="http://www.w3.org/2000/svg" clip-rule="evenodd">\n                    <g class="layer">\n                        <path d="m47.799999,43.649999l-47.699999,0l0,-39.749999l47.699999,0l0,39.749999zm-1.9875,-37.762499l-43.724999,0l0,35.774999l43.724999,0l0,-35.774999zm-7.95,13.9125l-1.9875,0l0,-6.441487l-22.341487,22.341487l6.441487,0l0,1.9875l-9.9375,0l0,-9.9375l1.9875,0l0,6.441487l22.341487,-22.341487l-6.441487,0l0,-1.9875l9.9375,0l0,9.9375z" fill="#ffffff" id="svg_1"/>\n                    </g>\n                  </svg>',
title:"Full Screen",id:"fullscreen-button",D:function(){r.q.switchFullscreen(!0);y("#renderCanvas").focus()}}],x="",B=60,t=0,n=m.reverse();t<n.length;t++){var b=n[t];x+='\n            <button\n                title="'+b.title+'"\n                id="'+b.id+'"\n                class="ui-button"\n                style="color:white;\n                    width:80px;\n                    height:50px;\n                    right:5px;\n                    position:absolute;\n                    bottom:'+
B.toString()+'px;\n                    background-color:rgba(51,51,51,0.7);\n                    border:none;\n                    outline:none;\n                    cursor:pointer;">\n                    '+b.Z+"\n            </button>";B+=55}y("body").append(x);for(x=0;x<m.length;x++)b=m[x],q(b);m=document.getElementById("babylonVRiconbtn");null!==m&&(m.style.opacity="1.0",m.style.filter="alpha(opacity=1.0)")}a.d(d,"a",function(){return A});var g=a("iC5T"),r=a("gqHH"),u=a("mvtX")}).call(this,a("EVdn"))},
fcUb:function(C,d,a){(function(y){function A(){k.w();f.b();E();g(function(){B.a();D.b()?(k.z.B=3,k.r.getMeshByID("ground").visibility=0,k.z.aa.isVisible=!1):(b.b(),c.j());n.b();e.a()});window.addEventListener("resize",function(){k.q.resize()})}function E(){var v=BABYLON.Mesh.CreateSphere("navTargetMesh",4,.1,k.r),h=new BABYLON.StandardMaterial("myMaterial",k.r);h.diffuseColor=new BABYLON.Color3(1,0,1);v.material=h;v.Ga=1;k.x({aa:v});t.a();p.d()}function g(v){f.a("Loading the main scene...");BABYLON.SceneLoader.LoadAssetContainer(k.t,
"scene.babylon",k.r,function(h){f.c(90);k.r.executeWhenReady(function(){y.getJSON(k.t+"scene_info.json",function(l){!1===l.menuActive&&(k.z.ka=!1);void 0!==l.positionOnFloor&&(k.s.ma=l.positionOnFloor);void 0!==l.infiniteDistanceSkyBox&&(k.s.ia=l.infiniteDistanceSkyBox);void 0!==l.transparentGround&&(k.s.oa=l.transparentGround);h.addAllToScene();k.r.activeCamera=k.r.cameras.filter(function(F){return-1===F.name.indexOf("VR")})[0];r();u();q();m();v()})})},function(h){h.lengthComputable&&f.a("Loading the main scene... "+
Math.round(90*h.loaded/h.total).toString()+"%")})}function r(){for(var v=!1,h=0;1<k.r.lights.length;){var l=k.r.lights[h].name.toLowerCase();-1===l.indexOf("shadowlight")&&-1===l.indexOf("shadow_light")?k.r.lights[h].dispose():v?k.r.lights[h].dispose():(v=!0,h++)}}function u(){for(var v=k.r.meshes.length,h=0;h<v;h++){var l=k.r.meshes[h];"protein_box"===l.name?l.isVisible=!1:-1!==l.name.toLowerCase().indexOf("skybox")&&k.s.ia&&(l.material.disableLighting=!0,l.infiniteDistance=!0)}}function q(){for(var v=
k.r.meshes.length,h=0;h<v;h++){var l=k.r.meshes[h];l.material&&l.material.emissiveTexture&&(l.material.emissiveColor=new BABYLON.Color3(1,1,1),l.material.albedoColor=new BABYLON.Color3(0,0,0),l.material.Ba=new BABYLON.Color3(0,0,0))}}function m(){for(var v=k.r.meshes.length,h=0;h<v;h++)if(k.r.meshes[h].material){var l=k.r.meshes[h];if(void 0===l.material.emissiveTexture||null===l.material.emissiveTexture)l.material.emissiveTexture=l.material.diffuseTexture,l.material.diffuseColor=new BABYLON.Color3(0,
0,0),l.material.specularColor=new BABYLON.Color3(0,0,0),l.material.emissiveColor=new BABYLON.Color3(0,0,0);p.a(l,!1);c.f({mesh:l,ba:k.r})}}function x(){setTimeout(p.e,1E3);f.d();k.r.activeCamera.maxZ=250;k.r.activeCamera.minZ=0;k.q.runRenderLoop(function(){k.r.render()})}a.d(d,"a",function(){return A});a.d(d,"b",function(){return x});var B=a("1RHl"),t=a("nV79"),n=a("cw8d"),b=a("9bcR"),c=a("TqLJ"),f=a("Rr3C"),e=a("fRJN"),k=a("gqHH"),p=a("0fSa"),D=a("p11u")}).call(this,a("EVdn"))},gg4m:function(C,d,
a){function y(u){void 0===u&&(u="");var q="<p>ProteinVR has encountered an error while running in leader mode. ";E.a("Leader Error",""!==u?q+" Here are the details:</p><p><pre>"+(u+"</pre></p>"):q+"</p>",!1)}function A(){y("Leader connection destroyed. Please refresh.")}a.d(d,"a",function(){return g});a.d(d,"b",function(){return r});a.d(d,"c",function(){return y});a.d(d,"d",function(){return A});var E=a("iC5T"),g=!1,r=function(){function u(){this.C=this.O=null;this.ua();this.za()}u.prototype.ua=function(){var q=
"act add age ago aid aim air all and any arm art ask bag ban bar bed bet big bit box bus but buy can cap car cat ceo cow cry cup day dig dna rna dog dry due ear eat egg end era etc eye fan far fee few fit fix fly for fun gap get guy hat hey hip hit hot how ice its jet job joy key kid lab law lay let lie lot low map may mix net new nod nor not now nut odd off oil old one our out owe own pan pay per pet pie pop put raw red rid row run say sea see set sit six ski sky sue sun tap tax ten the toe too top toy try two use via war way wet who why win yes yet you".split(" "),
m="pvr"+this.na();m+=q[Math.floor(Math.random()*q.length)]+this.na();m=m.replace(/\./g,"");this.C=new Peer(m,{debug:2,config:{iceServers:[{urls:"stun:0.peerjs.com"},{urls:"stun:stun.l.google.com:19302"},{urls:"stun:durrantlab.com/apps/proteinvr/stun"}]}})};u.prototype.za=function(){var q=this;this.C.on("disconnected",function(){A();!0===g&&console.log("Connection lost. Please reconnect");q.C.id=q.O;q.C.Aa=q.O;q.C.Fa()});this.C.on("error",function(m){y(m)})};u.prototype.na=function(){return Math.random().toString().replace(/\./g,
"").replace(/0/g,"").slice(0,3)};return u}()},gqHH:function(C,d,a){function y(f){t=f}function A(){q=document.getElementById("renderCanvas");m=new BABYLON.Engine(q,!0);BABYLON.Database.IDBStorageEnabled=!0;x=new BABYLON.Scene(m);window.scene=x}function E(){if(void 0===b){var f=new BABYLON.Ray(x.activeCamera.position,new BABYLON.Vector3(0,-1,0),50);b=x.pickWithRay(f,function(e){return"ground"===e.name}).distance}}function g(f){b=f}function r(f){c=f;u.b()||(f={createDeviceOrientationCamera:!0,useMultiview:!1},
x.getEngine().getCaps().multiview&&(f.useMultiview=!0),B=x.createDefaultVRExperience(f),f=document.getElementById("babylonVRiconbtn"),null!==f&&(f.style.opacity="0.0",f.style.filter="alpha(opacity=0)"),c.ka=!0)}a.d(d,"o",function(){return q});a.d(d,"q",function(){return m});a.d(d,"r",function(){return x});a.d(d,"y",function(){return B});a.d(d,"t",function(){return t});a.d(d,"v",function(){return y});a.d(d,"s",function(){return n});a.d(d,"n",function(){return b});a.d(d,"j",function(){return 11});a.d(d,
"b",function(){return 1.5});a.d(d,"g",function(){return 1});a.d(d,"d",function(){return 2E3});a.d(d,"a",function(){return 1.2});a.d(d,"f",function(){return 2.5});a.d(d,"e",function(){return.05});a.d(d,"h",function(){return.01});a.d(d,"m",function(){return 500});a.d(d,"l",function(){return 750});a.d(d,"k",function(){return.1});a.d(d,"c",function(){return 15});a.d(d,"i",function(){return.05});a.d(d,"z",function(){return c});a.d(d,"w",function(){return A});a.d(d,"p",function(){return E});a.d(d,"u",function(){return g});
a.d(d,"x",function(){return r});var u=a("p11u"),q,m,x,B,t="environs/day/",n={ma:!1,ia:!0,oa:!1},b,c={}},iC5T:function(C,d,a){(function(y){function A(t,n,b,c){void 0===b&&(b=!0);g||(g=!0,document.head.insertAdjacentHTML("beforeend","<link rel=stylesheet href=pages/css/bootstrap.min.css>"),document.body.insertAdjacentHTML("beforeend",'\n            \x3c!-- The Modal --\x3e\n            <div class="modal fade" id="msgModal" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n\n                    \x3c!-- Modal Header --\x3e\n                    <div class="modal-header">\n                        <h4 class="modal-title">Modal Heading</h4>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    \x3c!-- Modal body --\x3e\n                    <div class="modal-body">\n                        <div id="iframe-container" style="height:350px;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch">\x3c!-- TODO: Check if works on both iPhone and Firefox. Used to be overflow-y:auto;overflow-x:hidden; --\x3e\n                            <iframe frameBorder="0" src="" style="width:100%;height:100%;"></iframe>\n                        </div>\n                        <span id="msg-container"></span>\n                    </div>\n\n                    \x3c!-- Modal footer --\x3e\n                    <div id="modal-footer" class="modal-footer">\n                        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n                    </div>\n                </div>\n            </div>\n        '));
E(t,n,b,c)}function E(t,n,b,c){void 0===r&&(r=y("#msgModal"),u=r.find("h4.modal-title"),m=r.find("#iframe-container"),x=r.find("#msg-container"),q=m.find("iframe"),B=r.find("#modal-footer"));m.hide();q.attr("src","");u.html(t);!0===b?(x.hide(),q.attr("src",n),void 0===c&&B.hide(),q.on("load",function(){m.show()})):(x.show(),m.hide(),setTimeout(function(){"inline"===x.css("display")&&m.slideUp()},1E3),x.html(n),void 0===c&&B.show());!0===c?B.show():!1===c&&B.hide();r.modal()}a.d(d,"a",function(){return A});
var g=!1,r,u,q,m,x,B}).call(this,a("EVdn"))},jIpr:function(C,d,a){function y(){h=[];l=[];p={Styles:e.a(),Rotate:f.b()};void 0===F&&(F=new BABYLON.GUI.GUI3DManager(t.r));g();G=new BABYLON.TransformNode("");A();void 0===v&&u();void 0===D&&(D=new BABYLON.Sound("click-button",k.ea,t.r,null,{loop:!1,autoplay:!1,Ha:!0,volume:.1}));m()}function A(){function z(H){H=H.toString();h.push(new c({D:function(){},default:!1,R:H,ja:function(L){L.isVisible(!1)},level:1,name:"menu-visible-button-"+H,la:w,T:H,color:"yellow"}))}
var w=new BABYLON.GUI.SpherePanel;w.radius=t.f;w.margin=t.e;F.addControl(w);w.blockLayout=!0;for(var I=0;16>I;I++)z(I);w.columns=4;w.linkToTransformNode(G);w.blockLayout=!1}function E(z){function w(I,H){z(I,H);for(var L=Object.keys(I),J=L.length,K=0;K<J;K++){var N=L[K],O=I[N];switch(typeof O){case "object":w(O,H.concat([N]))}}}w(p,[])}function g(){E(function(z,w){r(z,w)})}function r(z,w){0<w.length&&(z["Back \u21e6"]=function(){q(w.slice(0,w.length-1))});z["Close Menu \u00d7"]=function(){v.M()}}function u(){var z=
new BABYLON.GUI.StackPanel3D;F.addControl(z);v=new c({D:function(I){I.value?q([]):q(void 0);G.position.copyFrom(x.a());G.rotation.y=x.c()},default:!1,R:"Show Menu",level:0,name:"menu-visible-button",la:z,T:"Hide Menu"});var w=new BABYLON.TransformNode("");z.linkToTransformNode(w);w.rotation.x=.5*Math.PI;w.position.copyFrom(B.b);w.position.y+=.1;w.rotation.y=x.c();t.r.registerBeforeRender(function(){w.position.copyFrom(B.b);w.position.y+=.1;w.rotation.y=x.c()})}function q(z){void 0!==z&&0<z.length&&
(l=z,void 0===p.Last&&(p.Last=function(){console.log("Going to",l);q(l)}));for(var w=h.length,I=0;I<w;I++)h[I].isVisible(!1);if(void 0!==z){var H=p;w=z.length;for(I=0;I<w;I++)H=H[z[I]];var L=Object.keys(H),J=["Close Menu \u00d7"],K=["Back \u21e6"],N=J.concat(K);L.sort(function(M,Q){var R=-1!==N.indexOf(M),S=-1!==N.indexOf(Q);return R&&!S?1:!R&&S?-1:M.localeCompare(Q)});var O=[];O=4>=L.length?[7,6,5,4]:8>=L.length?[7,6,5,4,11,10,9,8]:12>=L.length?[3,2,1,0,7,6,5,4,11,10,9,8]:[3,2,1,0,7,6,5,4,11,10,
9,8,15,14,13,12];w=L.length;var P=function(M){var Q=L[M],R=H[Q];M=h[O[M]];M.da(Q);switch(typeof R){case "object":M.D=function(){q(z.concat(Q))};M.U("green");break;case "function":M.D=R,M.U("default")}-1!==J.indexOf(Q)?M.U("red"):-1!==K.indexOf(Q)&&M.U("yellow");M.isVisible(!0)};for(I=0;I<w;I++)P(I)}}function m(){function z(w,I){var H=Object.keys(w);if(3===H.length){var L=H.filter(function(P){return"Close Menu \u00d7"===P||"Back \u21e6"===P?!1:!0});if(1===L.length){H=L[0];var J=I[I.length-1],K=J+": "+
H;I=I.slice(0,I.length-1).concat([K]);w=p;var N=I.slice(0,I.length-1),O=N.length;for(L=0;L<O;L++)w=w[N[L]];w[K]=w[J][H];delete w[J];w=w[K];H=Object.keys(w)}}J=H.length;for(L=0;L<J;L++)switch(K=H[L],N=w[K],typeof N){case "object":z(N,I.concat([K]))}}z(p,[])}var x=a("vCcv"),B=a("ph2Y"),t=a("gqHH"),n=a("TqLJ"),b=new BABYLON.Vector3(.75,.75,.75),c=function(){function z(w){var I=this;this.button=new BABYLON.GUI.HolographicButton(w.name);w.la.addControl(this.button);this.V();void 0!==w.color&&this.U(w.color);
this.level=w.level;this.A=new BABYLON.GUI.TextBlock;this.A.color="white";this.A.A=!0;this.value=w.default;this.T=w.T;this.R=w.R;this.D=w.D;this.da();this.button.scaling=b.clone();this.I=BABYLON.Mesh.CreateSphere(w.name+"-container-mesh",2,t.a,t.r);this.I.position=this.button.node.absolutePosition;this.I.visibility=0;this.I.scaling=b.clone();this.I.D=function(){I.M()};n.a(this.I);void 0!==w.ja&&w.ja(this)}z.prototype.U=function(w){switch(w){case "default":this.button.mesh.material=this.F;break;case void 0:this.button.mesh.material=
this.F;break;case "green":this.button.mesh.material=this.H;break;case "yellow":this.button.mesh.material=this.K;break;case "red":this.button.mesh.material=this.J}};z.prototype.isVisible=function(w){if(void 0===w)return this.button.isVisible;this.button.isVisible=w;this.I.isVisible=w};z.prototype.M=function(){D.setPosition(this.I.position.clone());D.play();this.value=!this.value;this.D(this);this.da()};z.prototype.da=function(w){void 0===w?this.A.text=this.value?this.T:this.R:this.R=this.T=this.A.text=
w;this.A.text=this.W(this.A.text);this.button.content.dispose();this.button.content=this.A};z.prototype.W=function(w){return w.replace(/(?![^\n]{1,25}$)([^\n]{1,25})\s/g,"$1\n")};z.prototype.V=function(){this.F=this.button.mesh.material;this.H=this.button.mesh.material.clone();this.H.albedoColor=new BABYLON.Color3(.3,.35+.1,.4);this.K=this.button.mesh.material.clone();this.K.albedoColor=new BABYLON.Color3(.4,.35+.1,.4);this.J=this.button.mesh.material.clone();this.J.albedoColor=new BABYLON.Color3(.4,
.35,.4)};return z}(),f=a("nKXq"),e=a("BjG7");C=a("O2BG");var k=a.n(C);a.d(d,"b",function(){return p});a.d(d,"a",function(){return D});a.d(d,"c",function(){return v});a.d(d,"d",function(){return y});a.d(d,"e",function(){return r});var p,D=void 0,v,h,l,F,G},mvtX:function(C,d,a){function y(){x=!0;B=new t;B.ha.then(function(n){u.a("Leader","pages/leader.html?f="+n,!0,!0)});setInterval(function(){var n=r.a(),b=r.b();B.S({type:"locrot",val:[n.x,n.y,n.z,1*b.x,1*b.y,1*b.z,1*b.w]})},100);setInterval(function(){B.S({type:"initialUrl",
val:window.location.href})},2E3)}function A(n,b,c){B.S({type:"toggleRep",val:{filters:n,repName:b,colorScheme:c}})}function E(n){B.S({type:"molAxisRotation",val:n})}function g(){B.S({type:"molUndoRot",val:void 0})}a.d(d,"a",function(){return x});a.d(d,"e",function(){return y});a.d(d,"b",function(){return A});a.d(d,"d",function(){return E});a.d(d,"c",function(){return g});var r=a("vCcv"),u=a("iC5T"),q=a("gg4m"),m=function(){function n(b,c){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,
e){f.__proto__=e}||function(f,e){for(var k in e)e.hasOwnProperty(k)&&(f[k]=e[k])};return n(b,c)}return function(b,c){function f(){this.constructor=b}n(b,c);b.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)}}(),x=!1,B,t=function(n){function b(){var c=n.call(this)||this;c.ha=null;c.wa=null;c.P=[];var f;c.wa=new Promise(function(e){f=e});c.ha=new Promise(function(e){c.ca(e,f)});return c}m(b,n);b.prototype.S=function(c){!0===q.a&&console.log("Send:",c);for(var f=this.P.length,e=0;e<
f;e++)this.P[e].send(c)};b.prototype.ca=function(c,f){var e=this;this.C.on("open",function(){null===e.C.id?(q.c("Received null id from peer open."),e.C.id=e.O):e.O=e.C.id;c(e.O);!0===q.a&&console.log(e.O)});this.C.on("connection",function(k){e.P.push(k);f();!0===q.a&&console.log("Lecturer: added a connection")});this.C.on("close",function(){for(var k=e.P.length,p=0;p<k;p++)e.P[p]=null;q.d()})};return b}(q.b)},nKXq:function(C,d,a){function y(){return{"Undo Rotate":function(){E()},"X Axis":function(){A("x")},
"Y Axis":function(){A("y")},"Z Axis":function(){A("z")}}}function A(m){r.i(m,15*Math.PI/180);g.b(void 0,u.r.getMeshByName("protein_box"),!0);q.a&&q.d(m)}function E(){var m=g.a;r.f(m.x,m.y,m.z);g.b(void 0,u.r.getMeshByName("protein_box"),!0);q.a&&q.c()}a.d(d,"b",function(){return y});a.d(d,"a",function(){return A});a.d(d,"c",function(){return E});var g=a("YORc"),r=a("PjGz"),u=a("gqHH"),q=a("mvtX")},nV79:function(C,d,a){(function(y){function A(){B.b()||(E(),x.a(),setInterval(function(){var n=(new Date).getTime();
void 0===t&&(t=n);2E3<n-t&&void 0!==m.y&&(m.y.exitVR(),m.r.getEngine().exitFullscreen());t=n},1E3))}function E(){m.y.onEnteringVRObservable.add(function(){m.z.B=2;r();u.i(void 0);q.e();y(".ui-button").hide();y(".babylonVRicon").hide();window.vrHelper=m.y});m.y.onExitingVRObservable.add(function(){m.z.B=3;u.i(void 0);q.e();y(".ui-button").show();y(".babylonVRicon").show()})}function g(){var n=new BABYLON.Mesh("vrNavTargetMesh",m.r),b=new BABYLON.VertexData;b.Ea=[0,0,0];b.Da=[0];b.applyToMesh(n);n.isVisible=
!1;return n}function r(){m.y.raySelectionPredicate=function(n){return u.c(n)};m.y.gazeTrackerMesh=g();m.y.updateGazeTrackerScale=!1;m.y.displayGaze=!0;m.y.enableGazeEvenWhenNoPointerLock=!0;m.y.enableInteractions()}a.d(d,"a",function(){return A});a.d(d,"b",function(){return r});var u=a("TqLJ"),q=a("0fSa"),m=a("gqHH"),x=a("pAUf"),B=a("p11u"),t}).call(this,a("EVdn"))},p11u:function(C,d,a){(function(y){function A(h){return(Math.round(1E5*h)/1E5).toString()}function E(){var h=[],l=b.c.x;0!==l&&h.push("rx="+
A(l));l=b.c.y;0!==l&&h.push("ry="+A(l));l=b.c.z;0!==l&&h.push("rz="+A(l));h.push("s="+t.b);void 0!==p&&(console.log("setting webrtc..."),h.push("f="+p));l=0;for(var F=[],G=Object.keys(n.a),z=G.length,w=0;w<z;w++){var I=G[w];n.a[I].mesh.isVisible&&(F.push("st"+l.toString()+"="+I),l++)}h=h.concat(F);l=e.a();F=e.b();h.push("cx="+A(l.x));h.push("cy="+A(l.y));h.push("cz="+A(l.z));h.push("crx="+A(F.x));h.push("cry="+A(F.y));h.push("crz="+A(F.z));h.push("crw="+A(F.w));h.push("e="+f.t);void 0===D&&(D=!1);
h.push("sh="+D.toString());window.history.pushState({},document.title,window.location.href.split("?")[0]+"?"+h.join("&"))}function g(){var h=window.location.href,l=h?h.split("?")[1]:window.location.search.slice(1);h={};if(l){l=l.split("#")[0];l=l.split("&");for(var F=l.length,G=0;G<F;G++){var z=l[G].split("=");h[z[0]]=void 0===z[1]?!0:z[1]}}v=h;h=v.e;void 0!==h&&f.v(h)}function r(){p=v.f;if(void 0!==p){c.a(p);f.r.activeCamera.inputs.clear();y("#help-button").hide();y("#leader").hide();y("#babylonVRiconbtn").hide();
y("#open-button").hide();var h=y("#fullscreen-button"),l=h.css("bottom");void 0!==l&&(l=+l.replace(/px/g,""),h.css("bottom",(l-60).toString()+"px"));y("#capture-clicks").remove()}h=v.rx;l=v.ry;var F=v.rz;b.f(void 0===h?0:+h,void 0===l?0:+l,void 0===F?0:+F);h=v.s;void 0!==h&&""!==h&&(4===h.length&&-1===h.indexOf(".")&&(h="https://files.rcsb.org/view/"+h.toUpperCase()+".pdb"),t.c(h));h=Object.keys(v);l=h.length;for(F=0;F<l;F++){var G=h[F];"st"===G.slice(0,2)&&(G=u(v[G]),k.push(G))}0===k.length&&(k.push([["Protein",
"All"],"Cartoon","Spectrum"]),k.push([["Nucleic","All"],"Stick","Element"]),k.push([["Ligand","All"],"Stick","Element"]));h=v.cx;l=v.cy;F=v.cz;void 0!==h&&void 0!==l&&void 0!==F&&e.e(new BABYLON.Vector3(+h,+l,+F));h=v.crx;l=v.cry;F=v.crz;G=v.crw;void 0!==h&&void 0!==l&&void 0!==F&&void 0!==G&&e.f(new BABYLON.Quaternion(+h,+l,+F,+G));D=v.sh;B()}function u(h){h=h.split("--");var l=decodeURIComponent(h[h.length-2]),F=decodeURIComponent(h[h.length-1]);return[h.slice(0,h.length-2).map(function(G){G=decodeURIComponent(G);
"{"===G.charAt(0)&&(G=JSON.parse(G));return G}),l,F]}function q(){if(0<k.length){var h=k.pop();n.b(h[0],h[1],h[2],function(){q()})}}function m(){return-1!==window.location.href.indexOf("f=")}function x(){return-1!==window.location.href.indexOf("sh=t")}function B(){setInterval(function(){E()},1E3)}a.d(d,"h",function(){return p});a.d(d,"f",function(){return E});a.d(d,"d",function(){return g});a.d(d,"e",function(){return r});a.d(d,"c",function(){return u});a.d(d,"g",function(){return q});a.d(d,"b",function(){return m});
a.d(d,"a",function(){return x});var t=a("qmVJ"),n=a("EYe7"),b=a("PjGz"),c=a("uBLq"),f=a("gqHH"),e=a("vCcv"),k=[],p=void 0,D=!1,v}).call(this,a("EVdn"))},pAUf:function(C,d,a){function y(){function f(e){q.z.B=1;x.b();A(e);E(e)}r.g();q.y.webVRCamera.onControllerMeshLoadedObservable.add(function(e){f(e)});q.y.onControllerMeshLoaded.add(function(e){f(e)})}function A(f){f.onTriggerStateChangedObservable.add(function(e){e.pressed&&(e=(new Date).getTime(),e-B>q.m&&(B=e,g.a()))})}function E(f){f.onPadStateChangedObservable.add(function(e){(c=
e.pressed)&&Math.abs(n)<q.k&&Math.abs(b)<q.k&&console.log("Would reset camera view if you didn't get an error below...")});f.onPadValuesChangedObservable.add(function(e){n=e.y;b=e.x;Math.abs(b)<q.k&&Math.abs(n)<q.k?b=n=0:.5>Math.abs(b)?b=0:(b+=0<b?-.5:.5,b=2*b)});q.r.registerBeforeRender(function(){if(c){if(!u.a.equals(u.e)){var e=m.a(),k=u.a.subtract(e);k.normalize();k=k.scale(n*q.h*q.r.getAnimationRatio());m.e(e.subtract(k))}0!==b&&(e=(new Date).getTime(),e-t<q.l||(t=e,e=q.y.webVRCamera.rotationQuaternion.toEulerAngles(),
e.y+=.25*Math.sign(b)*Math.PI,q.y.webVRCamera.rotationQuaternion=BABYLON.Quaternion.FromEulerVector(e)))}})}a.d(d,"a",function(){return y});var g=a("9bcR"),r=a("TqLJ"),u=a("ph2Y"),q=a("gqHH"),m=a("vCcv"),x=a("nV79"),B=0,t=0,n=0,b=0,c=!1},ph2Y:function(C,d,a){function y(){var n=1.5*r.a;r.r.registerBeforeRender(function(){a:{if(3===r.z.B)var b=r.r.activeCamera.getForwardRay();else if(2===r.z.B||1===r.z.B){b=void 0;1===r.z.B?(b=r.y.rightControllerGazeTrackerMesh,b||(b=r.y.leftControllerGazeTrackerMesh)):
2===r.z.B&&(b=r.y.gazeTrackerMesh);if(!b){console.log("error!");break a}b.isVisible?t.copyFrom(b.absolutePosition):t.copyFrom(m);b=g.a();b=new BABYLON.Ray(b,t.subtract(b))}else console.log("Unexpected error.");A(b)}void 0===t?(t.copyFrom(m),u.i(void 0)):10<BABYLON.Vector3.Distance(g.a(),t)&&(t.copyFrom(m),u.i(void 0));r.z.aa.position.copyFrom(t);void 0!==u.d&&(r.z.aa.isVisible=u.d!==u.h);b=g.a();var c=E(b).pickedPoint;c&&(x=c,b.y-c.y<n?(q.c.button.isVisible=!1,q.c.I.isVisible=!1):(q.c.button.isVisible=
!0,q.c.I.isVisible=!0));(c=E(t).pickedPoint)&&(B=c)})}function A(n,b){void 0===b&&(b=!0);n=r.r.pickWithRay(n,function(f){return u.c(f)});var c=n.distance;n.hit&&c<r.c?(b&&t.copyFrom(n.pickedPoint),u.i(n.pickedMesh)):(t.copyFrom(m),u.i(void 0))}function E(n){n=new BABYLON.Ray(n,new BABYLON.Vector3(0,-1,0),50);return r.r.pickWithRay(n,function(b){return b.id===r.z.G.id})}a.d(d,"e",function(){return m});a.d(d,"b",function(){return x});a.d(d,"c",function(){return B});a.d(d,"a",function(){return t});a.d(d,
"f",function(){return y});a.d(d,"d",function(){return E});var g=a("vCcv"),r=a("gqHH"),u=a("TqLJ"),q=a("jIpr"),m=new BABYLON.Vector3(-1E3,1E3,1E3),x=new BABYLON.Vector3(0,0,0),B=new BABYLON.Vector3(0,0,0),t=new BABYLON.Vector3(0,0,0)},qmVJ:function(C,d,a){function y(b){n=b}function A(){E()}function E(){B.h(function(){m.e();B.b(n,function(b){m.f();m.b()||(g(b),u.b(r.b));m.g();x.a();"nanokid.sdf"===n&&!1===m.b()&&setTimeout(function(){q.a("Load Molecule","pages/load.html")},3E3)})})}function g(b){var c=
b.selectedAtoms({});t={"Atom Name":[],Chain:[],Element:[],"Residue Index":[],"Residue Name":[],"Secondary Structure":[]};var f=c.length;for(b=0;b<f;b++){var e=c[b];t["Atom Name"].push(e.atom);t.Chain.push(e.chain);t.Element.push(e.elem);t["Residue Name"].push(e.resn);t["Residue Index"].push(e.resi);t["Secondary Structure"].push(e.ss)}c=Object.keys(t);f=c.length;for(b=0;b<f;b++){var k=c[b];e=t;var p=k;k=t[k];for(var D={},v=[],h=0,l=k.length;h<l;++h)D.hasOwnProperty(k[h])||(v.push(k[h]),D[k[h]]=1);
e[p]=v}}a.d(d,"a",function(){return t});a.d(d,"b",function(){return n});a.d(d,"c",function(){return y});a.d(d,"d",function(){return A});var r=a("jIpr"),u=a("BjG7"),q=a("iC5T"),m=a("p11u"),x=a("cw8d"),B=a("PjGz"),t={},n="nanokid.sdf"},sqbB:function(C,d,a){function y(){var q=g.r.lights[0],m=A();r.a()?(u=new BABYLON.ShadowGenerator(4096,q),u.useBlurExponentialShadowMap=!0,u.F=!0,u.A=m.blur,u.setDarkness(m.ga)):console.log("iOS, so not generating shadows... causes an error... See https://forum.babylonjs.com/t/issues-between-shadowgenerator-and-ios-osx/795")}
function A(){var q=g.r.lights[0],m=64,x=.9625,B=void 0,t=q.name.match(/blur_([0-9\.]+)/g);null!==t&&(m=+t[0].substr(5));t=q.name.match(/dark_([0-9\.]+)/g);null!==t&&(x=+t[0].substr(5));q=q.name.match(/ambient_([0-9\.]+)/g);null!==q&&(B=+q[0].substr(8));return{blur:m,ga:x,fa:B}}function E(){for(var q=g.r.meshes.length,m=0;m<q;m++){var x=g.r.meshes[m];if(-1!==x.name.toLowerCase().indexOf("shadowcatcher")||-1!==x.name.toLowerCase().indexOf("shadow_catcher"))x.material=new BABYLON.ShadowOnlyMaterial("shadow_catch"+
m.toString(),g.r),x.material.activeLight=g.r.lights[0],x.receiveShadows=!0}}a.d(d,"d",function(){return u});a.d(d,"c",function(){return y});a.d(d,"a",function(){return A});a.d(d,"b",function(){return E});var g=a("gqHH"),r=a("p11u"),u},uBLq:function(C,d,a){function y(b){t=new Float32Array(E.a().asArray());n=new Float32Array(E.b().asArray());(new B(function(c){!0===g.a&&console.log("stud1 got data",c);var f=c.val;switch(c.type){case "locrot":t=new Float32Array([f[0],f[1],f[2]]);n=new Float32Array([f[3],
f[4],f[5],f[6]]);break;case "initialUrl":-1!==window.location.href.indexOf("nanokid.sdf")&&(c=f+"&f="+x,c=c.replace(/sh=true/g,"sh=false"),top.location.href=c);break;case "toggleRep":u.b(f.filters,f.repName,f.colorScheme,void 0);break;case "molAxisRotation":q.a(f);break;case "molUndoRot":q.c()}})).xa(b);r.r.registerBeforeRender(function(){var c=new Float32Array(E.a().asArray());c=A(c,t);c=BABYLON.Vector3.FromArray(c);E.e(c);c=new Float32Array(E.b().asArray());c=A(c,n);c=BABYLON.Quaternion.FromArray(c);
E.f(c)})}function A(b,c){for(var f=b.length,e=new Float32Array(f),k=0;k<f;k++)e[k]=c[k]-b[k];c=r.r.getAnimationRatio();var p=new Float32Array(f);for(k=0;k<f;k++)p[k]=b[k]+.02*c*e[k];return p}a.d(d,"a",function(){return y});var E=a("vCcv"),g=a("gg4m"),r=a("gqHH"),u=a("EYe7"),q=a("nKXq"),m=function(){function b(c,f){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,k){e.__proto__=k}||function(e,k){for(var p in k)k.hasOwnProperty(p)&&(e[p]=k[p])};return b(c,f)}return function(c,f){function e(){this.constructor=
c}b(c,f);c.prototype=null===f?Object.create(f):(e.prototype=f.prototype,new e)}}(),x,B=function(b){function c(f){var e=b.call(this)||this;e.L=null;e.va=f;e.ca();return e}m(c,b);c.prototype.xa=function(f){var e=this;this.L&&this.L.close();this.L=this.C.connect(f,{reliable:!0});this.ya();this.L.on("open",function(){!0===g.a&&console.log("Connected to: "+e.L.C)});x=f};c.prototype.ca=function(){var f=this;this.C.on("close",function(){f.L=null;g.d()})};c.prototype.ya=function(){var f=this;this.L.on("data",
function(e){!0===g.a&&console.log("Received:",e);f.va(e)});this.L.on("close",function(){g.c("Leader connection closed.")})};return c}(g.b),t=null,n=null},vCcv:function(C,d,a){function y(){var t=m.r.activeCamera,n=t.position.clone();if(2===m.z.B||1===m.z.B)t.leftCamera?n.copyFrom(t.leftCamera.globalPosition):console.log("Prob here");return n}function A(t){if(3===m.z.B){var n=m.r.activeCamera;n.position.copyFrom(t)}else if(2===m.z.B||1===m.z.B)n=m.y.webVRCamera,n.position.copyFrom(t.subtract(u()))}
function E(){if(2===m.z.B||1===m.z.B){var t=m.y.webVRCamera.deviceRotationQuaternion;return 0!==t.x?t:m.r.activeCamera.rotationQuaternion}return m.r.activeCamera.rotationQuaternion}function g(t){2===m.z.B||1===m.z.B?console.log("PROBLEM!"):(m.r.activeCamera.rotationQuaternion=t.clone(),m.r.activeCamera.rotation=m.r.activeCamera.rotationQuaternion.toEulerAngles())}function r(){if(2===m.z.B||1===m.z.B){var t=q.c.subtract(q.b),n=BABYLON.Vector3.GetAngleBetweenVectors(t,x,B);for(0>t.z&&(n=-n);0>n;)n+=
2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;return n+=.5*Math.PI}return m.r.activeCamera.rotation.clone().y}function u(){if(3===m.z.B)return new BABYLON.Vector3(0,0,0);var t=m.y.webVRCamera,n;t.leftCamera?n=t.leftCamera.globalPosition.subtract(t.position):n=new BABYLON.Vector3(0,0,0);return n}a.d(d,"a",function(){return y});a.d(d,"e",function(){return A});a.d(d,"b",function(){return E});a.d(d,"f",function(){return g});a.d(d,"c",function(){return r});a.d(d,"d",function(){return u});var q=a("ph2Y"),m=
a("gqHH"),x=new BABYLON.Vector3(1,0,0),B=new BABYLON.Vector3(1,0,0)}},[["/7QA",1,2]]]);}).call(this || window)
