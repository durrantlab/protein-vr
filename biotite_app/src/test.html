<!doctype html>

<html lang="en">
    <head>
        <title>test</title>
    </head>

    <body>
        <canvas id="renderCanvas" touch-action="none" style="touch-action: none;"></canvas>
        <script src="js/babylon/babylon.3.3.full.preview.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script>
            var canvas = document.getElementById("renderCanvas");
            var engine = new BABYLON.Engine(canvas, true);

            // let test = "SceneLoader.Load";
            // let test = "SceneLoader.Append";
            let test = "Scene From Scratch";

            switch (test) {
                case "SceneLoader.Load":
                    console.log(test);
                    BABYLON.SceneLoader.Load("scene/", "scene.babylon", engine, (scene) => {
                        scene.executeWhenReady(() => {
                            setupScene(scene);
                        });
                    });
                    break;
                case "SceneLoader.Append":
                    console.log(test);
                    var scene = new BABYLON.Scene(engine);
                    BABYLON.SceneLoader.Append("scene/", "scene.babylon", scene, (scene) => {
                        scene.executeWhenReady(() => {
                            setupScene(scene);
                        });
                    });
                    break;
                case "Scene From Scratch":
                    console.log(test);
                    var scene = new BABYLON.Scene(engine);
                    var camera = new BABYLON.ArcRotateCamera("Camera", Math.PI / 2, Math.PI / 2, 2, BABYLON.Vector3.Zero(), scene);
                    var light1 = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(1, 1, 0), scene);
                    var light2 = new BABYLON.PointLight("light2", new BABYLON.Vector3(0, 1, -1), scene);
                    var sphere = BABYLON.Mesh.CreateSphere("sphere", {}, scene);
                    setupScene(scene);
                    break;
            }

            function setupScene(scene) {
                scene.activeCamera.attachControl(canvas);

                // Make scene global for debugging.
                window.scene = scene;

                // VR Load
                vrHelper = scene.createDefaultVRExperience();

                // Register a render loop to repeatedly render the scene
                engine.runRenderLoop(() => {
                    scene.render();
                });
            }
        </script>
    </body>
</html>
