/*
 almond 0.3.3 Copyright jQuery Foundation and other contributors.
 Released under MIT license, http://github.com/requirejs/almond/LICENSE
*/
var E="function"==typeof Object.defineProperties?Object.defineProperty:function(z,y,n){z!=Array.prototype&&z!=Object.prototype&&(z[y]=n.value)},F="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function G(z){if(z){for(var y=F,n=["Math","sign"],p=0;p<n.length-1;p++){var a=n[p];a in y||(y[a]={});y=y[a]}n=n[n.length-1];p=y[n];z=z(p);z!=p&&null!=z&&E(y,n,{configurable:!0,writable:!0,value:z})}}
G(function(z){return z?z:function(y){y=Number(y);return 0===y||isNaN(y)?y:0<y?1:-1}});
(function(){var z,y,n;(function(p){function a(f,a){var d,h;a=a&&a.split("/");var c=x.map,e=c&&c["*"]||{};if(f){f=f.split("/");var b=f.length-1;x.Ta&&D.test(f[b])&&(f[b]=f[b].replace(D,""));"."===f[0].charAt(0)&&a&&(b=a.slice(0,a.length-1),f=b.concat(f));for(b=0;b<f.length;b++){var B=f[b];"."===B?(f.splice(b,1),--b):".."===B&&0!==b&&(1!==b||".."!==f[2])&&".."!==f[b-1]&&0<b&&(f.splice(b-1,2),b-=2)}f=f.join("/")}if((a||e)&&c){B=f.split("/");for(b=B.length;0<b;--b){var r=B.slice(0,b).join("/");if(a)for(h=
a.length;0<h;--h)if(d=c[a.slice(0,h).join("/")])if(d=d[r]){var u=d;var l=b;break}if(u)break;if(!k&&e&&e[r]){var k=e[r];var m=b}}!u&&k&&(u=k,l=m);u&&(B.splice(0,l,u),f=B.join("/"))}return f}function b(f,a){return function(){var d=w.call(arguments,0);"string"!==typeof d[0]&&1===d.length&&d.push(null);return k.apply(p,d.concat([f,a]))}}function c(f){return function(d){return a(d,f)}}function e(f){return function(a){d[f]=a}}function t(f){if(l.call(h,f)){var a=h[f];delete h[f];v[f]=!0;u.apply(p,a)}if(!l.call(d,
f)&&!l.call(v,f))throw Error("No "+f);return d[f]}function q(f){var a=f?f.indexOf("!"):-1;if(-1<a){var d=f.substring(0,a);f=f.substring(a+1,f.length)}return[d,f]}function m(a){return function(){return x&&x.O&&x.O[a]||{}}}var k,d={},h={},x={},v={},l=Object.prototype.hasOwnProperty,w=[].slice,D=/\.js$/;var C=function(f,d){f=q(f);var h=f[0];d=d[1];f=f[1];if(h){h=a(h,d);var b=t(h)}h?b&&b.normalize?f=b.normalize(f,c(d)):f=a(f,d):(f=a(f,d),f=q(f),h=f[0],f=f[1],h&&(b=t(h)));return{fa:h?h+"!"+f:f,n:f,Ua:h,
p:b}};var r={Ja:function(a){return b(a)},H:function(a){var f=d[a];return"undefined"!==typeof f?f:d[a]={}},Ia:function(a){return{id:a,uri:"",H:d[a],O:m(a)}}};var u=function(a,c,u,k){var f,B=[];var m=typeof u;var x=(k=k||a)?q(k):[];if("undefined"===m||"function"===m){c=!c.length&&u.length?["require","exports","module"]:c;for(f=0;f<c.length;f+=1){var w=C(c[f],x);m=w.fa;if("require"===m)B[f]=r.Ja(a);else if("exports"===m){B[f]=r.H(a);var H=!0}else if("module"===m)var D=B[f]=r.Ia(a);else if(l.call(d,m)||
l.call(h,m)||l.call(v,m))B[f]=t(m);else if(w.p)w.p.load(w.n,b(k,!0),e(m),{}),B[f]=d[m];else throw Error(a+" missing "+m);}c=u?u.apply(d[a],B):void 0;a&&(D&&D.H!==p&&D.H!==d[a]?d[a]=D.H:c===p&&H||(d[a]=c))}else a&&(d[a]=u)};z=y=k=function(a,d,h,b,c){if("string"===typeof a)return r[a]?r[a](d):t(C(a,d?q(d):[]).fa);if(!a.splice){x=a;x.xa&&k(x.xa,x.Ra);if(!d)return;d.splice?(a=d,d=h,h=null):a=p}d=d||function(){};"function"===typeof h&&(h=b,b=c);b?u(p,a,d,h):setTimeout(function(){u(p,a,d,h)},4);return k};
k.O=function(a){return k(a)};z.g=d;n=function(a,b,c){if("string"!==typeof a)throw Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]);l.call(d,a)||l.call(h,a)||(h[a]=[a,b,c])};n.g={jQuery:!0}})();n("external/almond",function(){});n("Scene/Vars",["require","exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});a.da=11;a.V=1.5;a.ca=1;a.na=2E3;a.U=1.2;a.pa=2.5;a.oa=.1;a.qa=.01;a.ta=500;a.sa=750;a.L=.1;a.ba=15;a.ra=.05;a.c=function(){a.canvas=document.getElementById("renderCanvas");
a.o=new BABYLON.Engine(a.canvas,!0);BABYLON.Database.IDBStorageEnabled=!0;a.a=new BABYLON.Scene(a.o);window.scene=a.a};a.ya=function(){if(void 0===a.N){var b=new BABYLON.Ray(a.a.activeCamera.position,new BABYLON.Vector3(0,-1,0),50);b=a.a.pickWithRay(b,function(a){return"ground"===a.name});a.N=b.distance}};a.La=function(b){a.N=b};a.Oa=function(b){var c={};a.a.getEngine().getCaps().multiview&&(c.useMultiview=!0);a.f=a.a.createDefaultVRExperience(c);a.b=b;a.b.ka=!0}});n("Scene/jQuery",["require","exports"],
function(p,a){Object.defineProperty(a,"__esModule",{value:!0});a.jQuery=function(a){return new b(a)};var b=function(){function a(a){this.element=void 0;if("string"===typeof a)if("#"===a.charAt(0))this.element=document.getElementById(a.substr(1));else if("."===a.charAt(0))this.element=document.getElementsByClassName(a.substr(1));else if("body"===a)this.element=document.body;else throw Error("Selector not recognized: "+a);else this.element=a;null===this.element&&console.warn("Selector not found/recognized: "+
a)}a.prototype.Ga=function(a){this.element&&this.element.addEventListener("keypress",a)};a.prototype.click=function(a){if(this.element)this.on("click",a)};a.prototype.show=function(){this.element&&(this.element.style.display="inline-block")};a.prototype.Fa=function(){this.element&&(this.element.style.display="none")};a.prototype.on=function(a,b){this.element&&this.element.addEventListener(a,b)};a.prototype.focus=function(){this.element&&this.element.focus()};a.prototype.ready=function(a){this.element&&
((this.element.attachEvent?"complete"===this.element.readyState:"loading"!==this.element.readyState)?a():this.element.addEventListener("DOMContentLoaded",a))};return a}();a.Ba=function(a){var b=new XMLHttpRequest;b.open("GET","scene_info.json",!0);b.onload=function(){if(200<=b.status&&400>b.status){var c=JSON.parse(b.responseText);a(c)}};b.onerror=function(){};b.send()};a.Ca=function(a){var b=document.createElement("script"),c=document.getElementsByTagName("script")[0];b.async=!0;b.onload=b.onreadystatechange=
function(c,e){if(e||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,b=void 0,e||a&&a()};b.src="js/annyang.min.js";c.parentNode.insertBefore(b,c)}});n("Scene/VR/NonVRCamera",["require","exports","../Vars"],function(p,a,b){function c(){e.ellipsoid=new BABYLON.Vector3(1,.5*b.N,1)}Object.defineProperty(a,"__esModule",{value:!0});var e;new BABYLON.Vector3(0,0,0);a.c=function(){e=b.a.activeCamera;e.keysUp=[87,38];e.keysDown=[83,40];e.keysLeft=[65,37];e.keysRight=[68,
39];c();b.a.collisionsEnabled=!0;e.checkCollisions=!0;e.speed=.1;e.attachControl(b.canvas,!0);e._updatePosition()};a.Ka=c});n("Scene/VR/Optimizations",["require","exports","../Extras","../Vars"],function(p,a,b,c){function e(a){if(void 0!==a){a=a.getVerticesData(BABYLON.VertexBuffer.PositionKind);if(null===a)return null;a=a.length/3}else a=0;return a}function t(){var a=new BABYLON.SceneOptimizerOptions(25,2E3),b=0;a.optimizations.push(new BABYLON.ShadowsOptimization(b));a.optimizations.push(new BABYLON.LensFlaresOptimization(b));
a.optimizations.push(new BABYLON.PostProcessesOptimization(b));a.optimizations.push(new BABYLON.ParticlesOptimization(b));a.optimizations.push(new q(b));b++;a.optimizations.push(new m(b));a.optimizations.push(new q(b));b++;a.optimizations.push(new BABYLON.TextureOptimization(b,512));a.optimizations.push(new q(b));b++;a.optimizations.push(new BABYLON.RenderTargetsOptimization(b));a.optimizations.push(new BABYLON.TextureOptimization(b,256));a.optimizations.push(new q(b));b++;a.optimizations.push(new BABYLON.HardwareScalingOptimization(b,
4));a.optimizations.push(new k(b,500));a.optimizations.push(new q(b));return a}function q(a){var b=this;"undefined"===typeof a&&(a=0);this.priority=a;this.apply=function(){console.log("Optimization priority:",b.priority);console.log("FPS:",c.o.getFps());console.log("");return!0};this.getDescription=function(){return"Reports the current priority. For debugging."}}function m(a){"undefined"===typeof a&&(a=0);this.priority=a;this.apply=function(){var a=c.a.getMeshByName("surfaces.wrl");null!==a&&a.dispose();
return!0};this.getDescription=function(){return"Removes surface representations."}}function k(a,b,k){void 0===k&&(k=void 0);"undefined"===typeof a&&(a=0);this.priority=a;this.apply=function(){var a=[],d;for(d in c.a.meshes)if(c.a.meshes.hasOwnProperty(d)){var h=c.a.meshes[d];if(-1===h.name.indexOf("Decimated")){var m=e(h);null!==m&&(m<b||a.push([m,h,void 0===k?1-b/m:k]))}}a.sort(function(a,b){return b[0]-a[0]});for(d in a)if(a.hasOwnProperty(d)){h=a[d][1];for(m=a[d][2];0<h.getLODLevels().length;){var C=
h.getLODLevels()[0].mesh;h.removeLODLevel(C);null!==C&&C.dispose()}h.simplify([{quality:m,distance:.001}],!1,BABYLON.SimplificationType.QUADRATIC,function(){})}return!0};this.getDescription=function(){return"Simplifies the geometry of complex objects in the scene."}}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){BABYLON.SceneOptimizer.OptimizeAsync(c.a,t());c.a.autoClear=!1;c.a.autoClearDepthAndStencil=!1;for(var a in c.a.meshes)if(c.a.meshes.hasOwnProperty(a)){var b=c.a.meshes[a];
-1!==b.name.indexOf("baked")&&void 0!==b.material&&(b.material.diffuseColor=new BABYLON.Color3(0,0,0),b.material.specularColor=new BABYLON.Color3(0,0,0),b.material.emissiveTexture=b.material.diffuseTexture,b.material.diffuseTexture=null,b.freezeWorldMatrix())}};a.$=function(a){var b=e(a);null===b||100>b||(b=1+Math.floor(b/c.na),1<b&&a.subdivide(b),a.createOrUpdateSubmeshesOctree(64,2),a.useOctreeForCollisions=!0)};a.ga=function(a,b){void 0===b&&(b=!0);b&&a.material.freeze()};a.S=function(){c.a.lights[0].autoUpdateExtends=
!0;b.A.getShadowMap().refreshRate=BABYLON.RenderTargetTexture.REFRESHRATE_RENDER_ONCE;c.a.lights[0].autoUpdateExtends=!1}});n("Scene/VR/Navigation","require exports ../jQuery ../Vars ./CommonCamera ./NonVRCamera ./Optimizations ./Pickables ./Points".split(" "),function(p,a,b,c,e,t,q,m,k){function d(){n=e.m();c.a.registerBeforeRender(function(){var a=e.m();null===k.Ea(a).pickedMesh?e.ma(n):n=a})}function h(){b.jQuery("body").Ga(function(a){32===a.charCode&&x()})}function x(){var a=(new Date).getTime();
if(!(250>a-C))switch(C=a,console.log("hi"),m.Aa()){case 2:console.log("teleport");v();break;case 4:l();break;case 3:m.v.u()}}function v(a,b){void 0===a&&(a=void 0);void 0===b&&(b=void 0);void 0===b&&(b=function(){});c.f.gazeTrackerMesh.isVisible=!1;var f=new BABYLON.Animation("animationCameraTeleportation","position",90,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),d=e.m();void 0===a&&(a=new BABYLON.Vector3(k.i.x,k.i.y+c.N,k.i.z));var h=e.Da();a=a.subtract(h);
d=d.subtract(h);f.setKeys([{frame:0,value:d},{frame:c.da,value:a}]);var r=c.a.activeCamera;r.animations=[];r.animations.push(f);c.a.beginAnimation(r,0,c.da,!1,1,function(){c.f.gazeTrackerMesh.isVisible=!0;r.animations=[];b()})}function l(){var a=k.Y,b=e.m(),d=k.i.subtract(b),h=d.length(),r;.1*h<c.ca?r=k.i.subtract(d.normalize().scale(c.ca)):.1*h>c.V?r=k.i.subtract(d.normalize().scale(c.V)):.1*h<c.V&&(r=b.add(d.scale(.9)));r.y=k.i.y;r.y-a.y<.5*c.U+.1&&(r.y=a.y+.5*c.U+.1);c.La(k.i.y-a.y);v(r,function(){t.Ka()})}
function w(){r=b.jQuery("#capture-clicks");r.click(function(){console.log("clicked!");x()});c.a.registerBeforeRender(function(){var a=c.a.activeCamera.inputs.attached.deviceOrientation;(a=a?0!==a._alpha||0!==a._beta||0!==a._gamma:!1)&&!u?(u=!0,r.show()):!a&&u&&(u=!1,r.Fa())})}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){c.b.l=c.a.getMeshByID(c.b.ia);null===c.b.l&&alert("No mesh named "+c.b.ia);c.b.l.checkCollisions=!0;c.b.l.visibility=0;q.$(c.b.l);m.ja({M:x,F:c.b.l});c.b.h=3;h();
k.c();w();d()};var n,C=0;a.B=x;var r=void 0,u=!1});n("Scene/VR/Pickables","require exports ../Vars ./CommonCamera ./Navigation ./Optimizations".split(" "),function(n,a,b,c,e,t){function q(a){void 0===a.M&&(a.M=e.B);void 0===a.a&&(a.a=b.a);void 0!==a.F&&(a.F.ua=new BABYLON.ActionManager(a.a),a.F.ua.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(){3===b.b.h&&a.M()})))}Object.defineProperty(a,"__esModule",{value:!0});var m=[],k=[],d=[];a.G=function(b){a.v=b};
a.c=function(){m.push(b.b.l)};a.va=function(a){m.push(a);k.push(a);t.$(a);q({F:a,M:function(){a.u()}})};a.wa=function(a){m.push(a);d.push(a);t.$(a);q({F:a})};a.ea=function(a){return a.id===b.b.l.id?!0:a.isVisible?-1!==m.indexOf(a):!1};a.Aa=function(){return void 0===a.v?1:a.v===b.b.l?2:-1!==k.indexOf(a.v)?3:-1!==d.indexOf(a.v)?4:a.v===a.D?5:1};a.ja=q;a.Ha=function(){a.D=BABYLON.Mesh.CreateSphere("padNavSphereAroundCamera",4,b.ba-1,b.a);a.D.flipFaces(!0);var d=new BABYLON.StandardMaterial("padNavSphereAroundCameraMat",
b.a);d.diffuseColor=new BABYLON.Color3(1,1,1);d.specularColor=new BABYLON.Color3(0,0,0);d.g=null;a.D.material=d;a.D.visibility=0;b.a.registerBeforeRender(function(){a.D.position=c.m()});m.push(a.D)}});n("Scene/VR/Points",["require","exports","../Vars","./CommonCamera","./Pickables"],function(n,a,b,c,e){function t(b){a.i.copyFrom(b)}function q(){if(3===b.b.h)var d=b.a.activeCamera.getForwardRay();else if(2===b.b.h||1===b.b.h){d=void 0;1===b.b.h?(d=b.f.rightControllerGazeTrackerMesh,d||(d=b.f.leftControllerGazeTrackerMesh)):
2===b.b.h&&(d=b.f.gazeTrackerMesh);if(!d){console.log("error!");return}d.isVisible?t(d.absolutePosition):t(a.J);d=c.m();d=new BABYLON.Ray(d,a.i.subtract(d))}else console.log("Unexpected error.");m(d)}function m(d,c){void 0===c&&(c=!0);d=b.a.pickWithRay(d,function(a){return e.ea(a)});d.hit&&d.distance<b.ba?(c&&t(d.pickedPoint),e.G(d.pickedMesh)):(t(a.J),e.G(void 0))}function k(a){a=new BABYLON.Ray(a,new BABYLON.Vector3(0,-1,0),50);return b.a.pickWithRay(a,function(a){return a.id===b.b.l.id})}Object.defineProperty(a,
"__esModule",{value:!0});a.J=new BABYLON.Vector3(-1E3,1E3,1E3);a.X=new BABYLON.Vector3(0,0,0);a.Y=new BABYLON.Vector3(0,0,0);a.i=new BABYLON.Vector3(0,0,0);a.Va=t;a.c=function(){b.a.registerBeforeRender(function(){q();void 0===a.i?(t(a.J),e.G(void 0)):10<BABYLON.Vector3.Distance(c.m(),a.i)&&(t(a.J),e.G(void 0));b.b.la.position.copyFrom(a.i);void 0!==e.v&&(b.b.la.isVisible=e.v!==e.D);var d=k(c.m()).pickedPoint;d&&(a.X=d);if(d=k(a.i).pickedPoint)a.Y=d})};a.Wa=q;a.Ea=k});n("Scene/VR/CommonCamera",["require",
"exports","../Vars","./Points"],function(n,a,b,c){function e(){if(3===b.b.h)return new BABYLON.Vector3(0,0,0);var a=b.f.webVRCamera,c;a.leftCamera?c=a.leftCamera.globalPosition.subtract(a.position):c=new BABYLON.Vector3(0,0,0);return c}Object.defineProperty(a,"__esModule",{value:!0});var t=new BABYLON.Vector3(1,0,0),q=new BABYLON.Vector3(1,0,0);a.m=function(){var a=b.a.activeCamera,c=a.position.clone();if(2===b.b.h||1===b.b.h)a.leftCamera?c.copyFrom(a.leftCamera.globalPosition):console.log("Prob here");
return c};a.ma=function(a){if(3===b.b.h){var c=b.a.activeCamera;c.position.copyFrom(a)}else if(2===b.b.h||1===b.b.h)c=b.f.webVRCamera,c.position.copyFrom(a.subtract(e()))};a.ha=function(){if(2===b.b.h||1===b.b.h){var a=c.Y.subtract(c.X),e=BABYLON.Vector3.GetAngleBetweenVectors(a,t,q);for(0>a.z&&(e=-e);0>e;)e+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI;return e+=.5*Math.PI}return b.a.activeCamera.rotation.clone().y};a.Da=e});n("Scene/VR/VoiceCommands","require exports ../jQuery ../Vars ./Navigation ./Optimizations".split(" "),
function(n,a,b,c,e,t){function q(b){function c(a){function b(a){if(v.hasOwnProperty(a)){var b=v[a];if(""!==b){a=function(a){if(l.hasOwnProperty(a)){var c=l[a];""!==c&&(f[r+" "+b+" "+c]=function(){h([b,c],e)})}};for(var c in l)a(c)}}}function c(a){if(l.hasOwnProperty(a)){var b=l[a];""!==b&&(f[r+" "+b]=function(){h([b],e)})}}function d(a){if(v.hasOwnProperty(a)){var b=v[a];""!==b&&(f[r+" "+b]=function(){h([b],e)})}}var r=["hide","show","high"][a],e="show"===r,u;for(u in v)d(u);for(var k in l)c(k);for(u in v)b(u);
f[r+" surface"]=function(){h(["Surfaces"],e)}}var f={};void 0===a.j&&d(b);for(b=0;3>b;b++)c(b);f.teleport=function(){e.B()};f.click=function(){e.B()};f.move=function(){e.B()};f.look=function(){e.B()};f.hiya=function(){e.B()};annyang&&(annyang.debug(),annyang.removeCommands(),annyang.addCommands(f),annyang.start());p||(C.speak("The show and hide commands control visualization. For example, show proteen or hide ribbon. The teleport command moves your position to the stair point sphere."),p=!0)}function m(a){return a.charAt(0).toUpperCase()+
a.substring(1)}function k(a){a=a.replace(/.sdf/g,"").replace(/.pdb/g,"");a=a.replace(/.wrl/g,"");a=a.replace(/surfaces/g,"Surfaces");var b=a.split("_");a=b[0];if("Surfaces"===a)return{key:"Surfaces",s:a,w:""};b=b[1].replace(/[A-Z]/g,function(a){return"_"+a}).split(/_/g)[1];a=m(a);b=m(b);return{key:a+"_"+b,s:a,w:b}}function d(b){a.j={};for(var c in b.objIDs)if(b.objIDs.hasOwnProperty(c)){var d=b.objIDs[c],e=k(d);void 0===a.j[e.key]&&(a.j[e.key]={description:e.key.replace(/_/g," "),R:[],s:e.s,w:e.w});
a.j[e.key].R.push(d);-1===v.indexOf(e.s)&&v.push(e.s);-1===l.indexOf(e.w)&&l.push(e.w)}}function h(b,c){for(var d in a.j)if(a.j.hasOwnProperty(d)){var e=a.j[d];a:{var h=void 0;var r=b,u=[e.s,e.w];for(h in r)if(r.hasOwnProperty(h)&&-1===u.indexOf(r[h])){h=!1;break a}h=!0}h&&x(e.s,e.w,c)}}function x(b,d,f){b=m(b);""!==d&&(b+="_"+m(d));for(var e in a.j[b].R)a.j[b].R.hasOwnProperty(e)&&(c.a.getMeshByName(a.j[b].R[e]).isVisible=f);t.S()}Object.defineProperty(a,"__esModule",{value:!0});var v=[],l=[],w=
!1,p=!1;a.c=function(a){w?q(a):b.Ca(function(){q(a);w=!0})};a.Ma=d;a.Sa=h;a.Pa=x;a.Qa=function(){annyang.abort()};var C=new (function(){function a(){var a=this;this.T=null;b.jQuery(document).ready(function(){"speechSynthesis"in window&&(a.T=window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged=function(){a.T=window.speechSynthesis.getVoices()})})}a.prototype.speak=function(a){if(null!==this.T){a=new SpeechSynthesisUtterance(a);a.rate=1;var b=this.T.filter(function(a){return-1<
a.name.toUpperCase().indexOf("SAMANTHA")});0<b.length&&(a.voice=b[0]);a.lang="en";a.volume=1;annyang&&annyang.abort();window.speechSynthesis.speak(a);setTimeout(function(){annyang&&annyang.start()},2E3)}};return a}())});n("Scene/GUI","require exports ./Vars ./VR/CommonCamera ./VR/Pickables ./VR/Points ./VR/VoiceCommands".split(" "),function(n,a,b,c,e,t,q){function m(a){function c(a){if(q.j.hasOwnProperty(a)){var b=q.j[a];a=b.description;h.push(new p({u:function(a){q.Pa(b.s,b.w,!a.value)},default:!1,
I:a+"\n(Hide)",Z:function(a){a.isVisible(!1)},name:"menu-visible-button-"+b.s.replace(/ /g,"").replace(/\n/g,""),aa:w,K:a+"\n(Show)"}))}}q.Ma(a);x=new BABYLON.GUI.GUI3DManager(b.a);w=new BABYLON.GUI.CylinderPanel;x.addControl(w);w.g=!0;for(var d in q.j)c(d);k(w,a);w.g=!1;v=new BABYLON.TransformNode("");w.linkToTransformNode(v);setInterval(function(){w.radius=b.pa;w.margin=b.oa},1E3);window.cylinderPanelMainMenu=w}function k(a,b){h.push(new p({u:function(a){a.value?q.c(b):q.Qa()},default:!1,I:"Audio Commands\n(On)",
Z:function(a){a.isVisible(!1)},name:"menu-audio-commands-button",aa:a,K:"Audio Commands\n(Off)"}))}function d(){var a=new BABYLON.GUI.GUI3DManager(b.a),d=new BABYLON.GUI.StackPanel3D;a.addControl(d);new p({u:function(a){for(var b in h)h.hasOwnProperty(b)&&h[parseInt(b,10)].isVisible(a.value);v.position.copyFrom(c.m());v.rotation.y=c.ha()},default:!1,I:"Show Menu",name:"menu-visible-button",aa:d,K:"Hide Menu"});var e=new BABYLON.TransformNode("");d.linkToTransformNode(e);e.rotation.x=.5*Math.PI;b.a.registerBeforeRender(function(){e.position.copyFrom(t.X);
e.position.y+=.1;e.rotation.y=c.ha()})}Object.defineProperty(a,"__esModule",{value:!0});var h=[],x,v,l,w;a.c=function(a){m(a);d();l=new BABYLON.Sound("click-button","assets/staple-public-domain.mp3",b.a,null,{loop:!1,autoplay:!1,Xa:!0,volume:.1})};var p=function(){function a(a){var c=this;this.button=new BABYLON.GUI.HolographicButton(a.name);a.aa.addControl(this.button);this.C=new BABYLON.GUI.TextBlock;this.C.color="white";this.C.g=!0;this.value=a.default;this.K=a.K;this.I=a.I;this.u=a.u;this.W();
this.g=BABYLON.Mesh.CreateSphere(a.name+"-container-mesh",2,b.U,b.a);this.g.position=this.button.node.absolutePosition;this.g.visibility=0;this.g.u=function(){c.za()};e.va(this.g);void 0!==a.Z&&a.Z(this)}a.prototype.isVisible=function(a){if(void 0===a)return this.button.isVisible;this.button.isVisible=a;this.g.isVisible=a};a.prototype.W=function(){this.C.text=this.value?this.K:this.I;this.button.content.dispose();this.button.content=this.C};a.prototype.za=function(){l.setPosition(this.g.position.clone());
l.play();this.value=!this.value;this.u(this);this.W()};return a}()});n("Scene/Extras","require exports ./GUI ./jQuery ./Vars ./VR/Optimizations ./VR/Pickables".split(" "),function(n,a,b,c,e,t,q){function m(){var a=e.a.lights[0],b=64,c=.9625,k=a.name.match(/blur_([0-9\.]+)/g);null!==k&&(b=parseFloat(k[0].substr(5)));a=a.name.match(/dark_([0-9\.]+)/g);null!==a&&(c=parseFloat(a[0].substr(5)));return{blur:b,P:c}}function k(){var b=e.a.lights[0],c=m();a.A=new BABYLON.ShadowGenerator(4096,b);a.A.useBlurExponentialShadowMap=
!0;a.A.setDarkness(c.P);a.A.C=!0;a.A.g=c.blur;window.A=a.A}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){k();c.Ba(function(c){function d(b){if(c.objIDs.hasOwnProperty(b)){var d=c.objIDs[b];k.addMeshTask(d,"","./",d+".gltf").onSuccess=function(b){for(var h in b.loadedMeshes)if(b.loadedMeshes.hasOwnProperty(h)){var k=parseInt(h,10),l=b.loadedMeshes[k],f=d;if(void 0!==l.material){if("Skip"!==c.shadowQuality){var n=l.material.sideOrientation;l.material.dispose();l.material=null;l.hasVertexAlpha=
!1;l.visibility=!0;var p=new BABYLON.StandardMaterial("molMat"+k.toString(),e.a);p.diffuseColor=new BABYLON.Color3(1,1,1);p.specularColor=new BABYLON.Color3(0,0,0);p.g=null;p.sideOrientation=n;f=new BABYLON.Texture(f+".png",e.a);f.g=-1;p.emissiveTexture=f;p.W=!0;p.sideOrientation=BABYLON.Material.ClockWiseSideOrientation;p.C=!1;l.material=p}else f=m(),f=.95<f.P?.01:.4>f.P?.0025:.013636363636363637*f.P-.0029545454545454545,l.material.emissiveColor=new BABYLON.Color3(f,f,f);t.ga(l)}l.scaling.z=-1;0<
k&&(l.scaling.x=-1);a.A.getShadowMap().renderList.push(l);q.wa(l)}}}}BABYLON.OBJFileLoader.OPTIMIZE_WITH_UV=!0;!1===c.menuActive&&(e.b.ka=!1);var k=new BABYLON.AssetsManager(e.a),n;for(n in c.objIDs)d(n);k.onProgress=function(a,b){e.o.displayLoadingUI();e.o.loadingUIText="Loading molecular meshes... "+a+" of "+b+" remaining."};k.onFinish=function(){for(var a in e.a.meshes)if(e.a.meshes.hasOwnProperty(a)){var b=e.a.meshes[a];if(-1!==b.name.toLowerCase().indexOf("shadowcatcher")||-1!==b.name.toLowerCase().indexOf("shadow_catcher"))b.material=
new BABYLON.ShadowOnlyMaterial("shadow_catch"+a.toString(),e.a),b.material.activeLight=e.a.lights[0],b.receiveShadows=!0}e.a.activeCamera.maxZ=250;void 0!==c.transparentGround&&!0===c.transparentGround&&(e.b.l.visibility=1,a=new BABYLON.StandardMaterial("transparentGround",e.a),a.diffuseColor=new BABYLON.Color3(1,1,1),a.specularColor=new BABYLON.Color3(0,0,0),a.emissiveColor=new BABYLON.Color3(0,0,0),a.alpha=e.ra,e.b.l.material=a);setTimeout(t.S,1E3)};k.load();e.b.ka&&b.c(c)})}});n("Scene/VR/VRControllers",
"require exports ../Vars ./CommonCamera ./Navigation ./Pickables ./Points ./VRCamera".split(" "),function(n,a,b,c,e,t,q,m){function k(a){a.onTriggerStateChangedObservable.add(function(a){a.pressed&&(a=(new Date).getTime(),a-h>b.ta&&(h=a,e.B()))})}function d(a){a.onPadStateChangedObservable.add(function(a){(w=a.pressed)&&Math.abs(v)<b.L&&Math.abs(l)<b.L&&console.log("Would reset camera view if you didn't get an error below...")});a.onPadValuesChangedObservable.add(function(a){v=a.y;l=a.x;Math.abs(l)<
b.L&&Math.abs(v)<b.L?l=v=0:.5>Math.abs(l)?l=0:(l+=0<l?-.5:.5,l=2*l)});b.a.registerBeforeRender(function(){if(w){if(!q.i.equals(q.J)){var a=c.m(),d=q.i.subtract(a);d.normalize();d=d.scale(v*b.qa*b.a.getAnimationRatio());c.ma(a.subtract(d))}0!==l&&(a=(new Date).getTime(),a-p<b.sa||(p=a,a=b.f.webVRCamera.rotationQuaternion.toEulerAngles(),a.y+=.25*Math.sign(l)*Math.PI,b.f.webVRCamera.rotationQuaternion=BABYLON.Quaternion.FromEulerVector(a)))}})}Object.defineProperty(a,"__esModule",{value:!0});var h=
0,p=0,v=0,l=0,w=!1;a.c=function(){t.Ha();b.f.webVRCamera.onControllerMeshLoadedObservable.add(function(a){b.b.h=1;console.log("controller loaded");m.Na();console.log("Isnt there on pickable or something");k(a);d(a)})}});n("Scene/VR/VRCamera","require exports ../Vars ./Optimizations ./Pickables ./VRControllers".split(" "),function(n,a,b,c,e,t){function p(){b.f.onEnteringVRObservable.add(function(){b.b.h=2;k();e.G(void 0);c.S();window.vrHelper=b.f});b.f.onExitingVRObservable.add(function(){b.b.h=3;
e.G(void 0);c.S()})}function m(){var a=new BABYLON.Mesh("vrNavTargetMesh",b.a),c=new BABYLON.VertexData;c.C=[0,0,0];c.g=[0];c.applyToMesh(a);a.isVisible=!1;return a}function k(){b.f.raySelectionPredicate=function(a){return e.ea(a)};b.f.gazeTrackerMesh=m();b.f.updateGazeTrackerScale=!1;b.f.displayGaze=!0;b.f.enableInteractions()}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){p();t.c()};a.Na=k});n("Scene/VR/Load",["require","exports","../Vars","./Optimizations","./VRCamera"],function(n,
a,b,c,e){Object.defineProperty(a,"__esModule",{value:!0});a.c=function(a){b.Oa(a);e.c();c.c();window.g=b}});n("Scene/Load","require exports ./Extras ./Vars ./VR/Load ./VR/Optimizations ./VR/Pickables".split(" "),function(n,a,b,c,e,t,q){function m(a){c.o.displayLoadingUI();c.o.loadingUIText="Loading the main scene...";BABYLON.SceneLoader.LoadAssetContainer("scene/","scene.babylon",c.a,function(b){c.a.executeWhenReady(function(){b.addAllToScene();c.a.activeCamera=c.a.cameras[0];c.a.activeCamera.minZ=
0;for(var d=!1,e=0;1<c.a.lights.length;){var k=c.a.lights[e].name.toLowerCase();-1===k.indexOf("shadowlight")&&-1===k.indexOf("shadow_light")?c.a.lights[e].dispose():d?c.a.lights[e].dispose():(d=!0,e++)}for(var l in c.a.meshes)"protein_box"===c.a.meshes[l].name&&c.a.meshes[l].dispose();for(l in c.a.meshes)if(c.a.meshes[l].material){d=c.a.meshes[l];if(void 0===d.material.emissiveTexture||null===d.material.emissiveTexture)d.material.emissiveTexture=d.material.diffuseTexture,d.material.diffuseColor=
new BABYLON.Color3(0,0,0),d.material.specularColor=new BABYLON.Color3(0,0,0),d.material.emissiveColor=new BABYLON.Color3(0,0,0);t.ga(d,!1);q.ja({F:d,a:c.a})}a()})},function(a){a.lengthComputable&&(c.o.loadingUIText="Loading the main scene... "+Math.round(90*a.loaded/a.total).toString()+"%")})}Object.defineProperty(a,"__esModule",{value:!0});a.load=function(){c.c();document.getElementById("loading-container").outerHTML="";new BABYLON.FreeCamera("camera1",new BABYLON.Vector3(0,5,-10),c.a);var a=BABYLON.Mesh.CreateSphere("navTargetMesh",
4,.1,c.a),d=new BABYLON.StandardMaterial("myMaterial",c.a);d.diffuseColor=new BABYLON.Color3(1,0,1);a.material=d;e.c({ia:"ground",la:a});m(function(){c.ya();b.c();c.o.runRenderLoop(function(){c.a.render()})});window.addEventListener("resize",function(){c.o.resize()})}});n("Game",["require","exports","./Scene/Load"],function(n,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.start=function(){b.load()}});y.O({urlArgs:"bust="+(new Date).getTime()});y(["Game"],function(n){n.start("renderCanvas")});
n("Start",function(){})})();
