/*
 almond 0.3.3 Copyright jQuery Foundation and other contributors.
 Released under MIT license, http://github.com/requirejs/almond/LICENSE
*/
var D="function"==typeof Object.defineProperties?Object.defineProperty:function(A,z,f){A!=Array.prototype&&A!=Object.prototype&&(A[z]=f.value)},E="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function F(A){if(A){for(var z=E,f=["Math","sign"],x=0;x<f.length-1;x++){var a=f[x];a in z||(z[a]={});z=z[a]}f=f[f.length-1];x=z[f];A=A(x);A!=x&&null!=A&&D(z,f,{configurable:!0,writable:!0,value:A})}}
F(function(A){return A?A:function(z){z=Number(z);return 0===z||isNaN(z)?z:0<z?1:-1}});
(function(){var A,z,f;(function(x){function a(a,b){var p,n;b=b&&b.split("/");var g=v.map,m=g&&g["*"]||{};if(a){a=a.split("/");var c=a.length-1;v.ib&&C.test(a[c])&&(a[c]=a[c].replace(C,""));"."===a[0].charAt(0)&&b&&(c=b.slice(0,b.length-1),a=c.concat(a));for(c=0;c<a.length;c++){var q=a[c];"."===q?(a.splice(c,1),--c):".."===q&&0!==c&&(1!==c||".."!==a[2])&&".."!==a[c-1]&&0<c&&(a.splice(c-1,2),c-=2)}a=a.join("/")}if((b||m)&&g){q=a.split("/");for(c=q.length;0<c;--c){var B=q.slice(0,c).join("/");if(b)for(n=
b.length;0<n;--n)if(p=g[b.slice(0,n).join("/")])if(p=p[B]){var d=p;var y=c;break}if(d)break;if(!e&&m&&m[B]){var e=m[B];var k=c}}!d&&e&&(d=e,y=k);d&&(q.splice(0,y,d),a=q.join("/"))}return a}function b(a,b){return function(){var p=w.call(arguments,0);"string"!==typeof p[0]&&1===p.length&&p.push(null);return l.apply(x,p.concat([a,b]))}}function d(b){return function(p){return a(p,b)}}function c(a){return function(b){g[a]=b}}function r(a){if(u.call(m,a)){var b=m[a];delete m[a];t[a]=!0;n.apply(x,b)}if(!u.call(g,
a)&&!u.call(t,a))throw Error("No "+a);return g[a]}function k(a){var b=a?a.indexOf("!"):-1;if(-1<b){var p=a.substring(0,b);a=a.substring(b+1,a.length)}return[p,a]}function e(a){return function(){return v&&v.S&&v.S[a]||{}}}var l,g={},m={},v={},t={},u=Object.prototype.hasOwnProperty,w=[].slice,C=/\.js$/;var q=function(b,n){b=k(b);var p=b[0];n=n[1];b=b[1];if(p){p=a(p,n);var c=r(p)}p?c&&c.normalize?b=c.normalize(b,d(n)):b=a(b,n):(b=a(b,n),b=k(b),p=b[0],b=b[1],p&&(c=r(p)));return{ia:p?p+"!"+b:b,n:b,jb:p,
p:c}};var y={Qa:function(a){return b(a)},I:function(a){var b=g[a];return"undefined"!==typeof b?b:g[a]={}},Na:function(a){return{id:a,uri:"",I:g[a],S:e(a)}}};var n=function(a,n,d,e){var p,B=[];var l=typeof d;var v=(e=e||a)?k(e):[];if("undefined"===l||"function"===l){n=!n.length&&d.length?["require","exports","module"]:n;for(p=0;p<n.length;p+=1){var w=q(n[p],v);l=w.ia;if("require"===l)B[p]=y.Qa(a);else if("exports"===l){B[p]=y.I(a);var G=!0}else if("module"===l)var f=B[p]=y.Na(a);else if(u.call(g,l)||
u.call(m,l)||u.call(t,l))B[p]=r(l);else if(w.p)w.p.load(w.n,b(e,!0),c(l),{}),B[p]=g[l];else throw Error(a+" missing "+l);}n=d?d.apply(g[a],B):void 0;a&&(f&&f.I!==x&&f.I!==g[a]?g[a]=f.I:n===x&&G||(g[a]=n))}else a&&(g[a]=d)};A=z=l=function(a,b,c,g,m){if("string"===typeof a)return y[a]?y[a](b):r(q(a,b?k(b):[]).ia);if(!a.splice){v=a;v.Da&&l(v.Da,v.eb);if(!b)return;b.splice?(a=b,b=c,c=null):a=x}b=b||function(){};"function"===typeof c&&(c=g,g=m);g?n(x,a,b,c):setTimeout(function(){n(x,a,b,c)},4);return l};
l.S=function(a){return l(a)};A.h=g;f=function(a,b,n){if("string"!==typeof a)throw Error("See almond README: incorrect module build, no module name");b.splice||(n=b,b=[]);u.call(g,a)||u.call(m,a)||(m[a]=[a,b,n])};f.h={jQuery:!0}})();f("external/almond",function(){});f("Scene/Vars",["require","exports"],function(f,a){Object.defineProperty(a,"__esModule",{value:!0});a.ea=11;a.X=1.5;a.da=1;a.ra=2E3;a.W=1.2;a.ta=2.5;a.sa=.1;a.ua=.01;a.xa=500;a.wa=750;a.N=.1;a.ca=15;a.va=.05;a.qa=/iPad|iPhone|iPod/.test(navigator.userAgent)&&
!window.MSStream;a.c=function(){a.canvas=document.getElementById("renderCanvas");a.u=new BABYLON.Engine(a.canvas,!0);BABYLON.Database.IDBStorageEnabled=!0;a.a=new BABYLON.Scene(a.u);window.scene=a.a};a.Ea=function(){if(void 0===a.R){var b=new BABYLON.Ray(a.a.activeCamera.position,new BABYLON.Vector3(0,-1,0),50);b=a.a.pickWithRay(b,function(a){return"ground"===a.name});a.R=b.distance}};a.Sa=function(b){a.R=b};a.Ya=function(b){var d={createDeviceOrientationCamera:!0};a.a.getEngine().getCaps().multiview&&
(d.useMultiview=!0);a.f=a.a.createDefaultVRExperience(d);document.getElementById("babylonVRiconbtn").style.opacity="0.0";document.getElementById("babylonVRiconbtn").style.filter="alpha(opacity=0)";window.vrHelper=a.f;a.b=b;a.b.na=!0}});f("Scene/LoadingScreens",["require","exports","./Vars"],function(f,a,b){function d(){clearInterval(c)}Object.defineProperty(a,"__esModule",{value:!0});var c;a.Pa=function(){document.getElementById("loading-container").outerHTML=""};a.fa=function(a){d();b.u.displayLoadingUI();
b.u.loadingUIText=a};a.$a=function(){var a=90;c=setInterval(function(){a+=.02*(99-a);b.u.displayLoadingUI();b.u.loadingUIText="Loading the main scene... "+a.toFixed(0)+"%"},100)};a.ab=d});f("Scene/VR/NonVRCamera",["require","exports","../Vars"],function(f,a,b){function d(){c.ellipsoid=new BABYLON.Vector3(1,.5*b.R,1)}Object.defineProperty(a,"__esModule",{value:!0});var c;new BABYLON.Vector3(0,0,0);a.c=function(){c=b.a.activeCamera;c.keysUp=[87,38];c.keysDown=[83,40];c.keysLeft=[65,37];c.keysRight=
[68,39];d();b.a.collisionsEnabled=!0;c.checkCollisions=!0;c.speed=.1;c.attachControl(b.canvas,!0);c._updatePosition()};a.Ra=d});f("Scene/Mols/Shadows",["require","exports","../Vars"],function(f,a,b){function d(){var a=b.a.lights[0],d=64,k=.9625,e=a.name.match(/blur_([0-9\.]+)/g);null!==e&&(d=parseFloat(e[0].substr(5)));a=a.name.match(/dark_([0-9\.]+)/g);null!==a&&(k=parseFloat(a[0].substr(5)));return{blur:d,T:k}}Object.defineProperty(a,"__esModule",{value:!0});a.Xa=function(){var c=b.a.lights[0],
r=d();r.cb=0;r.blur=2;console.log(r);b.qa?console.log("iOS, so not generating shadows... causes an error... See https://forum.babylonjs.com/t/issues-between-shadowgenerator-and-ios-osx/795"):(a.s=new BABYLON.ShadowGenerator(4096,c),a.s.useBlurExponentialShadowMap=!0,a.s.setDarkness(r.T),a.s.F=!0,a.s.h=r.blur,window.s=a.s)};a.Ga=d;a.Wa=function(){for(var a in b.a.meshes)if(b.a.meshes.hasOwnProperty(a)){var d=b.a.meshes[a];if(-1!==d.name.toLowerCase().indexOf("shadowcatcher")||-1!==d.name.toLowerCase().indexOf("shadow_catcher"))d.material=
new BABYLON.ShadowOnlyMaterial("shadow_catch"+a.toString(),b.a),d.material.activeLight=b.a.lights[0],d.receiveShadows=!0}}});f("Scene/VR/Optimizations",["require","exports","../Mols/Shadows","../Vars"],function(f,a,b,d){function c(a){if(void 0!==a){a=a.getVerticesData(BABYLON.VertexBuffer.PositionKind);if(null===a)return null;a=a.length/3}else a=0;return a}function r(){var a=new BABYLON.SceneOptimizerOptions(25,2E3),b=0;a.optimizations.push(new BABYLON.ShadowsOptimization(b));a.optimizations.push(new BABYLON.LensFlaresOptimization(b));
a.optimizations.push(new BABYLON.PostProcessesOptimization(b));a.optimizations.push(new BABYLON.ParticlesOptimization(b));a.optimizations.push(new k(b));b++;a.optimizations.push(new e(b));a.optimizations.push(new k(b));b++;a.optimizations.push(new BABYLON.TextureOptimization(b,512));a.optimizations.push(new k(b));b++;a.optimizations.push(new BABYLON.RenderTargetsOptimization(b));a.optimizations.push(new BABYLON.TextureOptimization(b,256));a.optimizations.push(new k(b));b++;a.optimizations.push(new BABYLON.HardwareScalingOptimization(b,
4));a.optimizations.push(new l(b,500));a.optimizations.push(new k(b));return a}function k(a){var b=this;"undefined"===typeof a&&(a=0);this.priority=a;this.apply=function(){console.log("Optimization priority:",b.priority);console.log("FPS:",d.u.getFps());console.log("");return!0};this.getDescription=function(){return"Reports the current priority. For debugging."}}function e(a){"undefined"===typeof a&&(a=0);this.priority=a;this.apply=function(){var a=d.a.getMeshByName("surfaces.wrl");null!==a&&a.dispose();
return!0};this.getDescription=function(){return"Removes surface representations."}}function l(a,b,e){void 0===e&&(e=void 0);"undefined"===typeof a&&(a=0);this.priority=a;this.apply=function(){var a=[],m;for(m in d.a.meshes)if(d.a.meshes.hasOwnProperty(m)){var g=d.a.meshes[m];if(-1===g.name.indexOf("Decimated")){var l=c(g);null!==l&&(l<b||a.push([l,g,void 0===e?1-b/l:e]))}}a.sort(function(a,b){return b[0]-a[0]});for(m in a)if(a.hasOwnProperty(m)){g=a[m][1];for(l=a[m][2];0<g.getLODLevels().length;){var q=
g.getLODLevels()[0].mesh;g.removeLODLevel(q);null!==q&&q.dispose()}g.simplify([{quality:l,distance:.001}],!1,BABYLON.SimplificationType.QUADRATIC,function(){})}return!0};this.getDescription=function(){return"Simplifies the geometry of complex objects in the scene."}}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){BABYLON.SceneOptimizer.OptimizeAsync(d.a,r());d.a.autoClear=!1;d.a.autoClearDepthAndStencil=!1;for(var a in d.a.meshes)if(d.a.meshes.hasOwnProperty(a)){var b=d.a.meshes[a];
-1!==b.name.indexOf("baked")&&void 0!==b.material&&(b.material.diffuseColor=new BABYLON.Color3(0,0,0),b.material.specularColor=new BABYLON.Color3(0,0,0),b.material.emissiveTexture=b.material.diffuseTexture,b.material.diffuseTexture=null,b.freezeWorldMatrix())}};a.aa=function(a){var b=c(a);null===b||100>b||(b=1+Math.floor(b/d.ra),1<b&&a.subdivide(b),a.createOrUpdateSubmeshesOctree(64,2),a.useOctreeForCollisions=!0)};a.ja=function(a,b){void 0===b&&(b=!0);b&&a.material.freeze()};a.M=function(){b.s&&
(d.a.lights[0].autoUpdateExtends=!0,b.s.getShadowMap().refreshRate=BABYLON.RenderTargetTexture.REFRESHRATE_RENDER_ONCE,d.a.lights[0].autoUpdateExtends=!1)}});f("Scene/VR/Navigation","require exports ../Vars ./CommonCamera ./NonVRCamera ./Optimizations ./Pickables ./Points".split(" "),function(f,a,b,d,c,r,k,e){function l(){w=d.o();b.a.registerBeforeRender(function(){var a=d.o();null===e.Ja(a).pickedMesh?d.pa(w):w=a})}function g(){jQuery("body").keypress(function(a){32===a.charCode&&m()})}function m(){var a=
(new Date).getTime();if(!(250>a-x))switch(x=a,console.log("hi"),k.Ha()){case 2:console.log("teleport");v();break;case 4:t();break;case 3:k.A.w()}}function v(a,c){void 0===a&&(a=void 0);void 0===c&&(c=void 0);void 0===c&&(c=function(){});b.f.gazeTrackerMesh.isVisible=!1;var n=new BABYLON.Animation("animationCameraTeleportation","position",90,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),p=d.o();void 0===a&&(a=new BABYLON.Vector3(e.i.x,e.i.y+b.R,e.i.z));var q=
d.Ia();a=a.subtract(q);p=p.subtract(q);n.setKeys([{frame:0,value:p},{frame:b.ea,value:a}]);var g=b.a.activeCamera;g.animations=[];g.animations.push(n);b.a.beginAnimation(g,0,b.ea,!1,1,function(){b.f.gazeTrackerMesh.isVisible=!0;g.animations=[];c()})}function t(){var a=e.Z,p=d.o(),q=e.i.subtract(p),g=q.length(),m;.1*g<b.da?m=e.i.subtract(q.normalize().scale(b.da)):.1*g>b.X?m=e.i.subtract(q.normalize().scale(b.X)):.1*g<b.X&&(m=p.add(q.scale(.9)));m.y=e.i.y;m.y-a.y<.5*b.W+.1&&(m.y=a.y+.5*b.W+.1);b.Sa(e.i.y-
a.y);v(m,function(){c.Ra()})}function u(){q=jQuery("#capture-clicks");q.click(function(){console.log("clicked!");m()});b.a.registerBeforeRender(function(){var a=b.a.activeCamera.inputs.attached.deviceOrientation;(a=a?0!==a._alpha||0!==a._beta||0!==a._gamma:!1)&&!y?(y=!0,q.show()):!a&&y&&(y=!1,q.fb())})}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){b.b.m=b.a.getMeshByID(b.b.la);null===b.b.m&&alert("No mesh named "+b.b.la);b.b.m.checkCollisions=!0;b.b.m.visibility=0;r.aa(b.b.m);k.ma({O:m,
G:b.b.m});b.b.g=3;g();e.c();u();l()};var w,x=0;a.C=m;var q=void 0,y=!1});f("Scene/VR/Pickables","require exports ../Vars ./CommonCamera ./Navigation ./Optimizations".split(" "),function(f,a,b,d,c,r){function k(a){void 0===a.O&&(a.O=c.C);void 0===a.a&&(a.a=b.a);void 0!==a.G&&(a.G.ya=new BABYLON.ActionManager(a.a),a.G.ya.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(){3===b.b.g&&a.O()})))}Object.defineProperty(a,"__esModule",{value:!0});var e=[],l=[],g=[];
a.H=function(b){a.A=b};a.c=function(){e.push(b.b.m)};a.za=function(a){e.push(a);l.push(a);r.aa(a);k({G:a,O:function(){a.w()}})};a.Aa=function(a){e.push(a);g.push(a);r.aa(a);k({G:a})};a.ha=function(a){return a.id===b.b.m.id?!0:a.isVisible?-1!==e.indexOf(a):!1};a.Ha=function(){return void 0===a.A?1:a.A===b.b.m?2:-1!==l.indexOf(a.A)?3:-1!==g.indexOf(a.A)?4:a.A===a.D?5:1};a.ma=k;a.Ma=function(){a.D=BABYLON.Mesh.CreateSphere("padNavSphereAroundCamera",4,b.ca-1,b.a);a.D.flipFaces(!0);var c=new BABYLON.StandardMaterial("padNavSphereAroundCameraMat",
b.a);c.diffuseColor=new BABYLON.Color3(1,1,1);c.specularColor=new BABYLON.Color3(0,0,0);c.h=null;a.D.material=c;a.D.visibility=0;b.a.registerBeforeRender(function(){a.D.position=d.o()});e.push(a.D)}});f("Scene/VR/Points",["require","exports","../Vars","./CommonCamera","./Pickables"],function(f,a,b,d,c){function r(b){a.i.copyFrom(b)}function k(){if(3===b.b.g)var c=b.a.activeCamera.getForwardRay();else if(2===b.b.g||1===b.b.g){c=void 0;1===b.b.g?(c=b.f.rightControllerGazeTrackerMesh,c||(c=b.f.leftControllerGazeTrackerMesh)):
2===b.b.g&&(c=b.f.gazeTrackerMesh);if(!c){console.log("error!");return}c.isVisible?r(c.absolutePosition):r(a.K);c=d.o();c=new BABYLON.Ray(c,a.i.subtract(c))}else console.log("Unexpected error.");e(c)}function e(d,e){void 0===e&&(e=!0);d=b.a.pickWithRay(d,function(a){return c.ha(a)});d.hit&&d.distance<b.ca?(e&&r(d.pickedPoint),c.H(d.pickedMesh)):(r(a.K),c.H(void 0))}function l(a){a=new BABYLON.Ray(a,new BABYLON.Vector3(0,-1,0),50);return b.a.pickWithRay(a,function(a){return a.id===b.b.m.id})}Object.defineProperty(a,
"__esModule",{value:!0});a.K=new BABYLON.Vector3(-1E3,1E3,1E3);a.Y=new BABYLON.Vector3(0,0,0);a.Z=new BABYLON.Vector3(0,0,0);a.i=new BABYLON.Vector3(0,0,0);a.kb=r;a.c=function(){b.a.registerBeforeRender(function(){k();void 0===a.i?(r(a.K),c.H(void 0)):10<BABYLON.Vector3.Distance(d.o(),a.i)&&(r(a.K),c.H(void 0));b.b.oa.position.copyFrom(a.i);void 0!==c.A&&(b.b.oa.isVisible=c.A!==c.D);var e=l(d.o()).pickedPoint;e&&(a.Y=e);if(e=l(a.i).pickedPoint)a.Z=e})};a.lb=k;a.Ja=l});f("Scene/VR/CommonCamera",["require",
"exports","../Vars","./Points"],function(f,a,b,d){function c(){if(3===b.b.g)return new BABYLON.Vector3(0,0,0);var a=b.f.webVRCamera,c;a.leftCamera?c=a.leftCamera.globalPosition.subtract(a.position):c=new BABYLON.Vector3(0,0,0);return c}Object.defineProperty(a,"__esModule",{value:!0});var r=new BABYLON.Vector3(1,0,0),k=new BABYLON.Vector3(1,0,0);a.o=function(){var a=b.a.activeCamera,c=a.position.clone();if(2===b.b.g||1===b.b.g)a.leftCamera?c.copyFrom(a.leftCamera.globalPosition):console.log("Prob here");
return c};a.pa=function(a){if(3===b.b.g){var d=b.a.activeCamera;d.position.copyFrom(a)}else if(2===b.b.g||1===b.b.g)d=b.f.webVRCamera,d.position.copyFrom(a.subtract(c()))};a.ka=function(){if(2===b.b.g||1===b.b.g){var a=d.Z.subtract(d.Y),c=BABYLON.Vector3.GetAngleBetweenVectors(a,r,k);for(0>a.z&&(c=-c);0>c;)c+=2*Math.PI;for(;c>2*Math.PI;)c-=2*Math.PI;return c+=.5*Math.PI}return b.a.activeCamera.rotation.clone().y};a.Ia=c});f("Scene/VR/VoiceCommands",["require","exports","../Vars","./Navigation","./Optimizations"],
function(f,a,b,d,c){function r(b){function c(a){function b(a){if(v.hasOwnProperty(a)){var b=v[a];if(""!==b){a=function(a){if(t.hasOwnProperty(a)){var c=t[a];""!==c&&(n[d+" "+b+" "+c]=function(){g([b,c],q)})}};for(var c in t)a(c)}}}function c(a){if(t.hasOwnProperty(a)){var b=t[a];""!==b&&(n[d+" "+b]=function(){g([b],q)})}}function p(a){if(v.hasOwnProperty(a)){var b=v[a];""!==b&&(n[d+" "+b]=function(){g([b],q)})}}var d=["hide","show","high"][a],q="show"===d,e;for(e in v)p(e);for(var y in t)c(y);for(e in v)b(e);
n[d+" surface"]=function(){g(["Surfaces"],q)}}var n={};void 0===a.j&&l(b);for(b=0;3>b;b++)c(b);n.teleport=function(){d.C()};n.click=function(){d.C()};n.move=function(){d.C()};n.look=function(){d.C()};n.hiya=function(){d.C()};annyang&&(annyang.debug(),annyang.removeCommands(),annyang.addCommands(n),annyang.start());w||(x.speak("The show and hide commands control visualization. For example, show proteen or hide ribbon. The teleport command moves your position to the stair point sphere."),w=!0)}function k(a){return a.charAt(0).toUpperCase()+
a.substring(1)}function e(a){a=a.replace(/.sdf/g,"").replace(/.pdb/g,"");a=a.replace(/.wrl/g,"");a=a.replace(/surfaces/g,"Surfaces");var b=a.split("_");a=b[0];if("Surfaces"===a)return{key:"Surfaces",v:a,B:""};b=b[1].replace(/[A-Z]/g,function(a){return"_"+a}).split(/_/g)[1];a=k(a);b=k(b);return{key:a+"_"+b,v:a,B:b}}function l(b){a.j={};for(var c in b.objIDs)if(b.objIDs.hasOwnProperty(c)){var n=b.objIDs[c],d=e(n);void 0===a.j[d.key]&&(a.j[d.key]={description:d.key.replace(/_/g," "),U:[],v:d.v,B:d.B});
a.j[d.key].U.push(n);-1===v.indexOf(d.v)&&v.push(d.v);-1===t.indexOf(d.B)&&t.push(d.B)}}function g(b,c){for(var d in a.j)if(a.j.hasOwnProperty(d)){var p=a.j[d];a:{var q=void 0;var e=b,g=[p.v,p.B];for(q in e)if(e.hasOwnProperty(q)&&-1===g.indexOf(e[q])){q=!1;break a}q=!0}q&&m(p.v,p.B,c)}}function m(d,e,n){d=k(d);""!==e&&(d+="_"+k(e));for(var p in a.j[d].U)a.j[d].U.hasOwnProperty(p)&&(b.a.getMeshByName(a.j[d].U[p]).isVisible=n);c.M()}Object.defineProperty(a,"__esModule",{value:!0});var v=[],t=[],u=
!1,w=!1;a.c=function(a){u?r(a):jQuery.getScript("js/annyang.min.js",function(){r(a);u=!0})};a.Ta=l;a.hb=g;a.Za=m;a.bb=function(){annyang.abort()};var x=new (function(){function a(){var a=this;this.V=null;jQuery(document).ready(function(){"speechSynthesis"in window&&(a.V=window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged=function(){a.V=window.speechSynthesis.getVoices()})})}a.prototype.speak=function(a){if(null!==this.V){a=new SpeechSynthesisUtterance(a);a.rate=1;var b=this.V.filter(function(a){return-1<
a.name.toUpperCase().indexOf("SAMANTHA")});0<b.length&&(a.voice=b[0]);a.lang="en";a.volume=1;annyang&&annyang.abort();window.speechSynthesis.speak(a);setTimeout(function(){annyang&&annyang.start()},2E3)}};return a}())});f("Scene/GUI","require exports ./Vars ./VR/CommonCamera ./VR/Pickables ./VR/Points ./VR/VoiceCommands".split(" "),function(f,a,b,d,c,r,k){function e(a){function c(a){if(k.j.hasOwnProperty(a)){var b=k.j[a];a=b.description;m.push(new x({w:function(a){k.Za(b.v,b.B,!a.value)},default:!1,
J:a+"\n(Hide)",$:function(a){a.isVisible(!1)},name:"menu-visible-button-"+b.v.replace(/ /g,"").replace(/\n/g,""),ba:w,L:a+"\n(Show)"}))}}k.Ta(a);v=new BABYLON.GUI.GUI3DManager(b.a);w=new BABYLON.GUI.CylinderPanel;v.addControl(w);w.h=!0;for(var d in k.j)c(d);l(w,a);w.h=!1;t=new BABYLON.TransformNode("");w.linkToTransformNode(t);setInterval(function(){w.radius=b.ta;w.margin=b.sa},1E3);window.cylinderPanelMainMenu=w}function l(a,b){m.push(new x({w:function(a){a.value?k.c(b):k.bb()},default:!1,J:"Audio Commands\n(On)",
$:function(a){a.isVisible(!1)},name:"menu-audio-commands-button",ba:a,L:"Audio Commands\n(Off)"}))}function g(){var a=new BABYLON.GUI.GUI3DManager(b.a),c=new BABYLON.GUI.StackPanel3D;a.addControl(c);new x({w:function(a){for(var b in m)m.hasOwnProperty(b)&&m[parseInt(b,10)].isVisible(a.value);t.position.copyFrom(d.o());t.rotation.y=d.ka()},default:!1,J:"Show Menu",name:"menu-visible-button",ba:c,L:"Hide Menu"});var n=new BABYLON.TransformNode("");c.linkToTransformNode(n);n.rotation.x=.5*Math.PI;b.a.registerBeforeRender(function(){n.position.copyFrom(r.Y);
n.position.y+=.1;n.rotation.y=d.ka()})}Object.defineProperty(a,"__esModule",{value:!0});var m=[],v,t,u,w;a.c=function(a){e(a);g();u=new BABYLON.Sound("click-button","assets/staple-public-domain.mp3",b.a,null,{loop:!1,autoplay:!1,nb:!0,volume:.1})};var x=function(){function a(a){var d=this;this.button=new BABYLON.GUI.HolographicButton(a.name);a.ba.addControl(this.button);this.F=new BABYLON.GUI.TextBlock;this.F.color="white";this.F.h=!0;this.value=a.default;this.L=a.L;this.J=a.J;this.w=a.w;this.ga();
this.h=BABYLON.Mesh.CreateSphere(a.name+"-container-mesh",2,b.W,b.a);this.h.position=this.button.node.absolutePosition;this.h.visibility=0;this.h.w=function(){d.Fa()};c.za(this.h);void 0!==a.$&&a.$(this)}a.prototype.isVisible=function(a){if(void 0===a)return this.button.isVisible;this.button.isVisible=a;this.h.isVisible=a};a.prototype.ga=function(){this.F.text=this.value?this.L:this.J;this.button.content.dispose();this.button.content=this.F};a.prototype.Fa=function(){u.setPosition(this.h.position.clone());
u.play();this.value=!this.value;this.w(this);this.ga()};return a}()});f("Scene/Mols/CommonLoader","require exports ../Load ../Vars ../VR/Optimizations ../VR/Pickables ./Shadows".split(" "),function(f,a,b,d,c,r,k){Object.defineProperty(a,"__esModule",{value:!0});a.Ca=function(){k.Xa();BABYLON.OBJFileLoader.OPTIMIZE_WITH_UV=!0};a.Ba=function(a){k.Wa();void 0!==a.transparentGround&&!0===a.transparentGround&&(d.b.m?(d.b.m.visibility=1,a=new BABYLON.StandardMaterial("transparentGround",d.a),a.diffuseColor=
new BABYLON.Color3(1,1,1),a.specularColor=new BABYLON.Color3(0,0,0),a.emissiveColor=new BABYLON.Color3(0,0,0),a.alpha=d.va,d.b.m.material=a):console.log("Warning: Vars.vrVars.groundMesh not defined."));b.La()};a.Va=function(a){if(void 0!==a.material&&null!==a.material){var b=k.Ga();b=.95<b.T?.01:.4>b.T?.0025:.013636363636363637*b.T-.0029545454545454545;a.material.emissiveColor=new BABYLON.Color3(b,b,b);c.ja(a)}a.scaling.z=-1;a.scaling.x=-1;k.s&&k.s.getShadowMap().renderList.push(a);r.Aa(a)}});f("Scene/Mols/VRML",
["require","exports","../Vars","../VR/Optimizations","./CommonLoader"],function(f,a,b,d,c){function r(){var a=v(m("point [","]",y));a=a.map(function(a){return[a[2],a[1],a[0]]});t=[].concat.apply([],a);t=e(t);l(g().map(function(a){return-a}));a=v(m("vector [","]",y));u=[].concat.apply([],a);u=e(u);a=v(m("color [","]",y));a=a.map(function(a){return[a[0],a[1],a[2],1]});w=[].concat.apply([],a);w=e(w);x=m("coordIndex [","]",y).split(",").map(function(a){return parseInt(a,10)}).filter(function(a){return-1!==
a&&!isNaN(a)&&void 0!==a})}function k(){var d=new BABYLON.VertexData;d.positions=t;d.indices=x;d.normals=u;d.colors=w;a.l=new BABYLON.Mesh("MeshFrom3DMol",b.a);d.applyToMesh(a.l);d=new BABYLON.StandardMaterial("Material",b.a);d.diffuseColor=new BABYLON.Color3(1,1,1);d.emissiveColor=new BABYLON.Color3(0,0,0);d.specularColor=new BABYLON.Color3(0,0,0);d.sideOrientation=BABYLON.Mesh.h;a.l.material=d;c.Va(a.l)}function e(a){return a.filter(function(a){return!isNaN(a)&&void 0!==a})}function l(a){t=t.map(function(b,
c){return b+a[c%3]})}function g(){var a=t.map(function(a,b){return 0===b%3?a:0}).reduce(function(a,b){return a+b}),b=t.map(function(a,b){return 1===b%3?a:0}).reduce(function(a,b){return a+b}),c=t.map(function(a,b){return 2===b%3?a:0}).reduce(function(a,b){return a+b}),d=t.length/3;return[a/d,b/d,c/d]}function m(a,b,c){a=c.split(a,2);a=a[1].split(b,2);return a[0]}function v(a){return a.split(",").map(function(a){a=a.replace(/\n/g,"").replace(/^ +/gm,"");return a.split(" ").map(function(a){return parseFloat(a)})})}
Object.defineProperty(a,"__esModule",{value:!0});var t,u,w,x,q,y;a.c=function(){jQuery("body").append('<div\n        id="mol-container"\n        class="mol-container"\n        style="display:none;"></div>');var a=jQuery("#mol-container");q=$3Dmol.createViewer(a,{backgroundColor:"white"})};a.Ka=function(a){jQuery.ajax("https://files.rcsb.org/view/1XDN.pdb",{success:function(b){q.addModel(b,"pdb");a()},error:function(a,b,c){console.error("Failed to load PDB https://files.rcsb.org/view/1XDN.pdb: "+c)}})};
a.setStyle=function(a,b,c){void 0===a&&(a=void 0);void 0===b&&(b=void 0);void 0===c&&(c=!0);a=void 0===a?{}:a;b=void 0===b?{cartoon:{color:"spectrum"}}:b;q.setStyle(a,b);q.render();c&&(y=q.exportVRML(),r(),k())};a.gb=k;a.Oa=function(c){a.l.scaling=new BABYLON.Vector3(1,1,1);a.l.position=new BABYLON.Vector3(0,0,0);b.a.render();var e=c.getBoundingInfo().boundingBox;c=Object.keys(e.maximumWorld).map(function(a){return e.maximumWorld[a]-e.minimumWorld[a]});var q=a.l.getBoundingInfo().boundingBox,g=Object.keys(q.maximumWorld).map(function(a){return q.maximumWorld[a]-
q.minimumWorld[a]});c=c.map(function(a,b){return a/g[b]});c=Math.min.apply(null,c);a.l.scaling=new BABYLON.Vector3(c,c,c);b.a.render();c=q.centerWorld.subtract(e.centerWorld);a.l.position=a.l.position.subtract(c);d.M()}});f("Scene/Mols/ThreeDMol",["require","exports","../Vars","./CommonLoader","./VRML"],function(f,a,b,d,c){function r(a){c.c();c.Ka(function(){c.setStyle();c.Oa(b.a.getMeshByName("protein_box"));c.l.mb=!0;setTimeout(function(){console.log(c.l.getBoundingInfo().boundingBox.maximumWorld);
console.log(c.l.getBoundingInfo().boundingBox.minimumWorld)},2E3);d.Ba(a)})}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(a){try{jQuery.getScript("https://3Dmol.csb.pitt.edu/build/3Dmol-min.js",function(){r(a)})}catch(e){r(a)}}});f("Scene/Mols/Load","require exports ../GUI ../Vars ./CommonLoader ./ThreeDMol".split(" "),function(f,a,b,d,c,r){Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){c.Ca();jQuery.getJSON("scene_info.json",function(a){!1===a.menuActive&&(d.b.na=
!1);r.c(a);d.b.na&&b.c(a)})}});f("Scene/VR/UI",["require","exports","../Vars"],function(f,a,b){function d(){jQuery("body").append('\n        <button\n          title="Click to switch to full screen"\n          id="fullscreen-button"\n          class="ui-button"\n          style="color:white;\n                 width:80px;\n                 right:20px;\n                 position:absolute;\n                 height:50px;\n                 bottom:80px;\n                 background-color:rgba(51,51,51,0.7);\n                 border:none;\n                 outline:none;\n                 cursor:pointer;">\n            <svg\n              style="position:relative; left:0.5px;"\n              width="48" height="48"\n              xmlns="http://www.w3.org/2000/svg"\n              xmlns:svg="http://www.w3.org/2000/svg"\n              clip-rule="evenodd">\n                <g class="layer">\n                    <path d="m47.799999,43.649999l-47.699999,0l0,-39.749999l47.699999,0l0,39.749999zm-1.9875,-37.762499l-43.724999,0l0,35.774999l43.724999,0l0,-35.774999zm-7.95,13.9125l-1.9875,0l0,-6.441487l-22.341487,22.341487l6.441487,0l0,1.9875l-9.9375,0l0,-9.9375l1.9875,0l0,6.441487l22.341487,-22.341487l-6.441487,0l0,-1.9875l9.9375,0l0,9.9375z" fill="#ffffff" id="svg_1"/>\n                </g>\n            </svg>\n        </button>\n\n        <button\n          title="Click for help"\n          id="help-button"\n          class="ui-button"\n          style="color:white;\n                 width:80px;\n                 right:20px;\n                 position:absolute;\n                 height:50px;\n                 bottom:140px;\n                 background-color:rgba(51,51,51,0.7);\n                 border:none;\n                 outline:none;\n                 cursor:pointer;">\n                 <svg version="1.2" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n\t x="0px" y="0px" width="48px" height="48px" viewBox="0 0 48 48" xml:space="preserve">\n<path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="\n\tM35.5,9.8c1.7,5.4-0.6,8-1.6,8.9c-1.9,1.9-4.5,4.7-5.8,7c-1.5,2.7-4.1,12-6.8,4.4c-3.2-9.1,1.3-11.6,3.5-13.4\n\tc1.5-1.3,3.4-4.3,0.5-5.3c-4-1.3-6.1,5.3-10.7,4c-3-0.8-3.2-4.1-2.2-6.6C15.4,1.7,32.5,0.6,35.5,9.8L35.5,9.8z"/>\n<path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" d="M28.3,39.6c0-5.5-8.5-5.5-8.5,0S28.3,45.1,28.3,39.6\n\t"/>\n</svg>\n\n        </button>\n    ');
jQuery("#fullscreen-button").click(function(){b.u.switchFullscreen(!0);jQuery("#renderCanvas").focus()});jQuery("#help-button").click(function(){window.open("help/index.html","_blank")});document.getElementById("babylonVRiconbtn").style.opacity="1.0";document.getElementById("babylonVRiconbtn").style.filter="alpha(opacity=1.0)"}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){d()};window.debugMode=function(){b.a.debugLayer.show();setTimeout(function(){document.getElementById("inspector-host").style.zIndex=
"15";document.getElementById("scene-explorer-host").style.zIndex="15"},500)}});f("Scene/VR/General",["require","exports","./Navigation","./Pickables","./UI"],function(f,a,b,d,c){Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){b.c();d.c();c.c()}});f("Scene/VR/VRControllers","require exports ../Vars ./CommonCamera ./Navigation ./Pickables ./Points ./VRCamera".split(" "),function(f,a,b,d,c,r,k,e){function l(a){a.onTriggerStateChangedObservable.add(function(a){a.pressed&&(a=(new Date).getTime(),
a-m>b.xa&&(m=a,c.C()))})}function g(a){a.onPadStateChangedObservable.add(function(a){(w=a.pressed)&&Math.abs(t)<b.N&&Math.abs(u)<b.N&&console.log("Would reset camera view if you didn't get an error below...")});a.onPadValuesChangedObservable.add(function(a){t=a.y;u=a.x;Math.abs(u)<b.N&&Math.abs(t)<b.N?u=t=0:.5>Math.abs(u)?u=0:(u+=0<u?-.5:.5,u=2*u)});b.a.registerBeforeRender(function(){if(w){if(!k.i.equals(k.K)){var a=d.o(),c=k.i.subtract(a);c.normalize();c=c.scale(t*b.ua*b.a.getAnimationRatio());
d.pa(a.subtract(c))}0!==u&&(a=(new Date).getTime(),a-v<b.wa||(v=a,a=b.f.webVRCamera.rotationQuaternion.toEulerAngles(),a.y+=.25*Math.sign(u)*Math.PI,b.f.webVRCamera.rotationQuaternion=BABYLON.Quaternion.FromEulerVector(a)))}})}Object.defineProperty(a,"__esModule",{value:!0});var m=0,v=0,t=0,u=0,w=!1;a.c=function(){r.Ma();b.f.webVRCamera.onControllerMeshLoadedObservable.add(function(a){b.b.g=1;console.log("controller loaded");e.Ua();console.log("Isnt there on pickable or something");l(a);g(a)})}});
f("Scene/VR/VRCamera","require exports ../Vars ./Optimizations ./Pickables ./VRControllers".split(" "),function(f,a,b,d,c,r){function k(){b.f.onEnteringVRObservable.add(function(){b.b.g=2;l();c.H(void 0);d.M();window.vrHelper=b.f});b.f.onExitingVRObservable.add(function(){b.b.g=3;c.H(void 0);d.M()})}function e(){var a=new BABYLON.Mesh("vrNavTargetMesh",b.a),c=new BABYLON.VertexData;c.F=[0,0,0];c.h=[0];c.applyToMesh(a);a.isVisible=!1;return a}function l(){b.f.raySelectionPredicate=function(a){return c.ha(a)};
b.f.gazeTrackerMesh=e();b.f.updateGazeTrackerScale=!1;b.f.displayGaze=!0;b.f.enableInteractions()}Object.defineProperty(a,"__esModule",{value:!0});a.c=function(){k();r.c()};a.Ua=l});f("Scene/VR/Load",["require","exports","../Vars","./Optimizations","./VRCamera"],function(f,a,b,d,c){Object.defineProperty(a,"__esModule",{value:!0});a.c=function(a){b.Ya(a);c.c();d.c();window.h=b}});f("Scene/Load","require exports ./LoadingScreens ./Mols/Load ./Vars ./VR/General ./VR/Load ./VR/NonVRCamera ./VR/Optimizations ./VR/Pickables".split(" "),
function(f,a,b,d,c,r,k,e,l,g){function m(a){b.fa("Loading the main scene...");BABYLON.SceneLoader.LoadAssetContainer("scene/","scene.babylon",c.a,function(d){b.$a();c.a.executeWhenReady(function(){d.addAllToScene();c.a.activeCamera=c.a.cameras[0];for(var b=!1,e=0;1<c.a.lights.length;){var f=c.a.lights[e].name.toLowerCase();-1===f.indexOf("shadowlight")&&-1===f.indexOf("shadow_light")?c.a.lights[e].dispose():b?c.a.lights[e].dispose():(b=!0,e++)}for(var k in c.a.meshes)"protein_box"===c.a.meshes[k].name&&
(c.a.getMeshByName("protein_box").isVisible=!1);for(k in c.a.meshes)if(c.a.meshes[k].material){b=c.a.meshes[k];if(void 0===b.material.emissiveTexture||null===b.material.emissiveTexture)b.material.emissiveTexture=b.material.diffuseTexture,b.material.diffuseColor=new BABYLON.Color3(0,0,0),b.material.specularColor=new BABYLON.Color3(0,0,0),b.material.emissiveColor=new BABYLON.Color3(0,0,0);l.ja(b,!1);g.ma({G:b,a:c.a})}a()})},function(a){a.lengthComputable&&b.fa("Loading the main scene... "+Math.round(90*
a.loaded/a.total).toString()+"%")})}Object.defineProperty(a,"__esModule",{value:!0});a.load=function(){c.c();b.Pa();var f=BABYLON.Mesh.CreateSphere("navTargetMesh",4,.1,c.a),g=new BABYLON.StandardMaterial("myMaterial",c.a);g.diffuseColor=new BABYLON.Color3(1,0,1);f.material=g;k.c({la:"ground",oa:f});m(function(){a.P=c.a.cameras.filter(function(a){return-1===a.name.indexOf("VR")})[0];var b=new BABYLON.DeviceOrientationCamera("DevOr_camera",a.P.position.clone(),c.a,!0);b.rotation=a.P.rotation;window.cameraFromBabylonFile=
a.P;window.DevOrCamera=b;c.a.activeCamera=b;c.a.activeCamera.rotationQuaternion=BABYLON.Quaternion.FromEulerVector(a.P.rotation);c.Ea();e.c();r.c();d.c()});window.addEventListener("resize",function(){c.u.resize()})};a.La=function(){setTimeout(l.M,1E3);b.ab();c.a.activeCamera.maxZ=250;c.a.activeCamera.minZ=0;c.u.runRenderLoop(function(){c.a.render()})}});f("Game",["require","exports","./Scene/Load"],function(f,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.start=function(){b.load()}});z.S({urlArgs:"bust="+
(new Date).getTime()});z(["Game"],function(f){f.start("renderCanvas")});f("Start",function(){})})();
